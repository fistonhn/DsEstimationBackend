"use strict";(self.webpackChunk_ds_estimation_construction_web_app=self.webpackChunk_ds_estimation_construction_web_app||[]).push([[8685],{38166:(e,i,l)=>{l.d(i,{A:()=>h});var o=l(98587),n=l(58168),t=l(9417),d=l(77387),r=l(9950),a=l(28555);function s(e,i){var l=Object.create(null);return e&&r.Children.map(e,function(e){return e}).forEach(function(e){l[e.key]=function(e){return i&&(0,r.isValidElement)(e)?i(e):e}(e)}),l}function c(e,i,l){return null!=l[i]?l[i]:e.props[i]}function v(e,i,l){var o=s(e.children),n=function(e,i){function l(l){return l in i?i[l]:e[l]}e=e||{},i=i||{};var o,n=Object.create(null),t=[];for(var d in e)d in i?t.length&&(n[d]=t,t=[]):t.push(d);var r={};for(var a in i){if(n[a])for(o=0;o<n[a].length;o++){var s=n[a][o];r[n[a][o]]=l(s)}r[a]=l(a)}for(o=0;o<t.length;o++)r[t[o]]=l(t[o]);return r}(i,o);return Object.keys(n).forEach(function(t){var d=n[t];if((0,r.isValidElement)(d)){var a=t in i,s=t in o,v=i[t],u=(0,r.isValidElement)(v)&&!v.props.in;!s||a&&!u?s||!a||u?s&&a&&(0,r.isValidElement)(v)&&(n[t]=(0,r.cloneElement)(d,{onExited:l.bind(null,d),in:v.props.in,exit:c(d,"exit",e),enter:c(d,"enter",e)})):n[t]=(0,r.cloneElement)(d,{in:!1}):n[t]=(0,r.cloneElement)(d,{onExited:l.bind(null,d),in:!0,exit:c(d,"exit",e),enter:c(d,"enter",e)})}}),n}var u=Object.values||function(e){return Object.keys(e).map(function(i){return e[i]})},m=function(e){function i(i,l){var o,n=(o=e.call(this,i,l)||this).handleExited.bind((0,t.A)(o));return o.state={contextValue:{isMounting:!0},handleExited:n,firstRender:!0},o}(0,d.A)(i,e);var l=i.prototype;return l.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},l.componentWillUnmount=function(){this.mounted=!1},i.getDerivedStateFromProps=function(e,i){var l,o,n=i.children,t=i.handleExited;return{children:i.firstRender?(l=e,o=t,s(l.children,function(e){return(0,r.cloneElement)(e,{onExited:o.bind(null,e),in:!0,appear:c(e,"appear",l),enter:c(e,"enter",l),exit:c(e,"exit",l)})})):v(e,n,t),firstRender:!1}},l.handleExited=function(e,i){var l=s(this.props.children);e.key in l||(e.props.onExited&&e.props.onExited(i),this.mounted&&this.setState(function(i){var l=(0,n.A)({},i.children);return delete l[e.key],{children:l}}))},l.render=function(){var e=this.props,i=e.component,l=e.childFactory,n=(0,o.A)(e,["component","childFactory"]),t=this.state.contextValue,d=u(this.state.children).map(l);return delete n.appear,delete n.enter,delete n.exit,null===i?r.createElement(a.A.Provider,{value:t},d):r.createElement(a.A.Provider,{value:t},r.createElement(i,n,d))},i}(r.Component);m.propTypes={},m.defaultProps={component:"div",childFactory:function(e){return e}};const h=m},47350:(e,i,l)=>{l.r(i),l.d(i,{default:()=>E});var o=l(9950),n=l(49911),t=l(89379),d=l(59051),r=l.n(d),a=l(26080),s=l(59019),c=(l(60764),l(39324)),v=l(74959),u=l(37017),m=l(46411),h=(l(72383),l(67580)),x=l(46639),p=l(73878),f=l(51342),b=l(92686),g=l(97354),j=l(44414);const y=()=>(0,j.jsx)("div",{style:{backgroundColor:"#CCCCCC",padding:"10px",margin:"-20px"},children:(0,j.jsx)(g.A,{})});var A=l(52710);const C=()=>{var e,i,l,d,r;const{singleProject:a}=(0,p.d4)(b.Br),s=null===a||void 0===a||null===(e=a.activities)||void 0===e?void 0:e.map(e=>{var i;return null===e||void 0===e||null===(i=e.category)||void 0===i?void 0:i.name}),c=null===a||void 0===a||null===(i=a.activities)||void 0===i||null===(l=i.map((e,i)=>{var l;return{id:i+1,name:null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.name}}))||void 0===l?void 0:l.filter((e,i)=>{if(s.indexOf(e.name)===i)return e}),v=null===c||void 0===c?void 0:c.map((e,i)=>{var l,o,n,t,d;return{allIndex:i,id:i+1,name:e.name,unit:" ",quantity:" ",rate:" ",amount:null===(l=Number(null===a||void 0===a||null===(o=a.activities)||void 0===o||null===(n=o.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===(null===e||void 0===e?void 0:e.name)}))||void 0===n?void 0:n.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0)))||void 0===l?void 0:l.toLocaleString(),calculateAmount:null===a||void 0===a||null===(t=a.activities)||void 0===t||null===(d=t.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===e.name}))||void 0===d?void 0:d.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0),_props:{bgColor:"#e2e5de"}}}),u=null===(d=localStorage)||void 0===d?void 0:d.getItem(null===a||void 0===a?void 0:a.name);let m=[];"undefined"!==u&&(m=null===JSON||void 0===JSON?void 0:JSON.parse(u));const h=null===(r=m)||void 0===r?void 0:r.map((e,i)=>{var l;return(0,t.A)((0,t.A)({},e),{},{name:e.name,indexId:i+1,sortableChildren:null===e||void 0===e||null===(l=e.children)||void 0===l?void 0:l.map((e,i)=>(0,t.A)((0,t.A)({},e),{},{subIndexId:i+1,name:e.name}))})});let x;if(null!==m){let e=[];null===h||void 0===h||h.map(i=>e=e.concat(i.sortableChildren));const i=null===v||void 0===v?void 0:v.map(i=>{var l,o,n;return(0,t.A)((0,t.A)({},i),{},{indexId:Number(null===h||void 0===h||null===(l=h.filter(e=>e.name===i.name))||void 0===l?void 0:l.map(e=>e.indexId)),name:i.name,children:null===a||void 0===a||null===(o=a.activities)||void 0===o||null===(n=o.filter(e=>{var l;return(null===(l=e.category)||void 0===l?void 0:l.name)===i.name}))||void 0===n?void 0:n.map(i=>{var l,o;return(0,t.A)((0,t.A)({},i),{},{subIndexId:Number(null===(l=e)||void 0===l||null===(o=l.filter(e=>e.id===i.id))||void 0===o?void 0:o.map(e=>e.subIndexId)),name:i.name})})})});x=null===i||void 0===i?void 0:i.sort((e,i)=>(null===e||void 0===e?void 0:e.indexId)-(null===i||void 0===i?void 0:i.indexId)).map(e=>{var i;return(0,t.A)((0,t.A)({},e),{},{children:null===(i=e.children)||void 0===i?void 0:i.sort((e,i)=>(null===e||void 0===e?void 0:e.subIndexId)-(null===i||void 0===i?void 0:i.subIndexId))})})}else x=null===v||void 0===v?void 0:v.map((e,i)=>{var l,o;return(0,t.A)((0,t.A)({},e),{},{name:e.name,children:null===a||void 0===a||null===(l=a.activities)||void 0===l||null===(o=l.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===e.name}))||void 0===o?void 0:o.map(e=>(0,t.A)((0,t.A)({},e),{},{name:e.name}))})});const[f,g]=(0,o.useState)(x);return localStorage.setItem(null===a||void 0===a?void 0:a.name,JSON.stringify(f)),(0,j.jsx)("div",{children:(0,j.jsx)(A.Ay,{isVirtualized:!1,treeData:f,onChange:e=>g(e),style:{marginLeft:3,fontWeight:"lighter"},rowWidth:50,generateNodeProps:e=>{let{node:i,path:l}=e;return{title:(0,j.jsx)(n.YI,{children:(0,j.jsx)(n.cC,{style:{fontSize:"0.7rem",marginTop:"-10px"},children:i.name})})}}})})};var S=l(92560),I=l(5386);const w=()=>{var e,i,l,d,g,A;const[w,k]=(0,o.useState)((0,j.jsxs)("div",{children:[(0,j.jsx)("span",{children:"Expand "}),(0,j.jsx)(v.g,{icon:c.tdl})]})),[z,N]=(0,o.useState)(!1),[L,E]=(0,o.useState)(!1),[_,T]=(0,o.useState)([]),O=(0,p.wA)(),{projectsGrouping:W,singleProjectGrouping:Q,singleProject:B,updatedActivity:F,loading:Y,error:P,message:D}=(0,p.d4)(b.Br),{userActivities:J}=(0,p.d4)(f.$z),q=null===B||void 0===B?void 0:B.id;(0,o.useEffect)(()=>{O((0,b.a2)())},[O]),(0,o.useEffect)(()=>{O((0,f.jI)())},[O]),(0,o.useEffect)(()=>{O((0,f.We)())},[O]),(0,o.useEffect)(()=>{O((0,b.cf)())},[O]),(0,o.useEffect)(()=>{O((0,b.a2)())},[O]);(0,o.useEffect)(()=>{F&&O((0,f.q)(F))},[F,O]);const R=null===W||void 0===W?void 0:W.map(e=>({value:e.id,label:e.name})),V=null===J||void 0===J?void 0:J.map(e=>{var i;return null===e||void 0===e||null===(i=e.category)||void 0===i?void 0:i.name}),U=null===J||void 0===J||null===(e=J.map((e,i)=>{var l;return{id:i+1,name:null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.name}}))||void 0===e?void 0:e.filter((e,i)=>{if(V.indexOf(e.name)===i)return e}),G=null===U||void 0===U?void 0:U.map((e,i)=>{var l,o,n,t,d;return{allIndex:i,id:i+1,name:e.name,unit:" ",quantity:" ",rate:" ",prjctName:null===B||void 0===B?void 0:B.name,amount:null===(l=Number(null===B||void 0===B||null===(o=B.activities)||void 0===o||null===(n=o.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===(null===e||void 0===e?void 0:e.name)}))||void 0===n?void 0:n.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0)))||void 0===l?void 0:l.toLocaleString(),calculateAmount:null===B||void 0===B||null===(t=B.activities)||void 0===t||null===(d=t.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===e.name}))||void 0===d?void 0:d.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0),_props:{bgColor:"#e2e5de"}}}),M=null===G||void 0===G?void 0:G.map(e=>e.allIndex),$=null===G||void 0===G||null===(i=G.map(e=>e.calculateAmount))||void 0===i?void 0:i.reduce((e,i)=>e+i,0);function H(){var e,i=new s.default;i.autoTable({theme:"plain",headStyles:{fontSize:15},bodyStyles:{fontSize:15,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["BILLS OF QUANTITIES"]]}),i.autoTable({theme:"plain",styles:{fontSize:12,fillColor:"#01579b",textColor:"#ffffff"},body:[["Project Name:   ".concat(null===B||void 0===B?void 0:B.name)],["Client:    ".concat(null===B||void 0===B?void 0:B.client)],["Contractor:    ".concat(null===B||void 0===B?void 0:B.contractor)],["DATE:   ".concat(r()(null===B||void 0===B?void 0:B.createdAt).format("DD-MM-YYYY h:mm"))]]}),i.autoTable({theme:"grid",html:"#my-table",didParseCell(e){"main"===e.cell.raw.id&&(e.cell.styles.textColor="black",e.cell.styles.fillColor="#e2e5de",e.cell.styles.fontSize=10)}}),i.autoTable({theme:"plain",styles:{fontSize:14,fontStyle:"italic"},body:[["GRAND TOTAL: ".concat(null===(e=Number($))||void 0===e?void 0:e.toLocaleString()," ").concat(null===B||void 0===B?void 0:B.currencyCode)]]}),i.save("BOQ.pdf")}const K=[{key:"indexId",label:"Id",filter:!1,sorter:!1,_props:{className:"fw-semibold"},_style:{width:"8%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"name",label:"Item Description",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"60%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"unit",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"10%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"quantity",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"10%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"rate",labet:"unit rate",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"10%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"amount",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"10%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"show_details",label:"",_style:{width:"3%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"},filter:!1,sorter:!1,_props:{color:"primary",className:"fw-semibold"}}],X=null===B||void 0===B||null===(l=B.activities)||void 0===l?void 0:l.map((e,i)=>({id:e.id,name:e.name,unit:e.estimationUnit,quantity:e.estimationQuantity,rate:e.estimationRate,amount:e.estimationTotalAmount})),Z=localStorage.getItem(null===B||void 0===B?void 0:B.name);let ee=[];"undefined"!==Z&&(ee=null===JSON||void 0===JSON?void 0:JSON.parse(Z));const ie=null===(d=ee)||void 0===d?void 0:d.map((e,i)=>{var l;return(0,t.A)((0,t.A)({},e),{},{name:e.name,indexId:i+1,sortableChildren:null===e||void 0===e||null===(l=e.children)||void 0===l?void 0:l.map((e,i)=>(0,t.A)((0,t.A)({},e),{},{subIndexId:i+1,name:e.name}))})});let le;if(null!==ee){let e=[];null===ie||void 0===ie||ie.map(i=>e=e.concat(i.sortableChildren)),le=null===G||void 0===G?void 0:G.map((i,l)=>{var o,n,d;return(0,t.A)((0,t.A)({},i),{},{indexId:Number(null===ie||void 0===ie||null===(o=ie.filter(e=>e.name===i.name))||void 0===o?void 0:o.map(e=>e.indexId)),name:i.name,children:null===B||void 0===B||null===(n=B.activities)||void 0===n||null===(d=n.filter(e=>{var l;return(null===(l=e.category)||void 0===l?void 0:l.name)===i.name}))||void 0===d?void 0:d.map(i=>{var l,o;return(0,t.A)((0,t.A)({},i),{},{subIndexId:Number(null===(l=e)||void 0===l||null===(o=l.filter(e=>e.id===i.id))||void 0===o?void 0:o.map(e=>e.subIndexId)),name:i.name})})})})}else le=null===G||void 0===G?void 0:G.map((e,i)=>{var l,o;return(0,t.A)((0,t.A)({},e),{},{indexValue:i+1,indexId:i+1,name:e.name,children:null===B||void 0===B||null===(l=B.activities)||void 0===l||null===(o=l.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===e.name}))||void 0===o?void 0:o.map((e,i)=>(0,t.A)((0,t.A)({},e),{},{subIndexId:i+1,name:e.name}))})});const[oe,ne]=(0,o.useState)(null===(g=le)||void 0===g?void 0:g.sort((e,i)=>(null===e||void 0===e?void 0:e.indexId)-(null===i||void 0===i?void 0:i.indexId)).map(e=>{var i;return(0,t.A)((0,t.A)({},e),{},{sortedAllActivities:null===(i=e.children)||void 0===i?void 0:i.sort((e,i)=>(null===e||void 0===e?void 0:e.subIndexId)-(null===i||void 0===i?void 0:i.subIndexId)),name:e.name})})),te=()=>{var e,i;const l=localStorage.getItem(null===B||void 0===B?void 0:B.name);let o=[];"undefined"!==l&&(o=null===JSON||void 0===JSON?void 0:JSON.parse(l));const n=null===(e=o)||void 0===e?void 0:e.map((e,i)=>{var l;return(0,t.A)((0,t.A)({},e),{},{name:e.name,indexId:i+1,sortableChildren:null===e||void 0===e||null===(l=e.children)||void 0===l?void 0:l.map((e,i)=>(0,t.A)((0,t.A)({},e),{},{subIndexId:i+1,name:e.name}))})}),d=null===n||void 0===n||null===(i=n.sort((e,i)=>(null===e||void 0===e?void 0:e.indexId)-(null===i||void 0===i?void 0:i.indexId)))||void 0===i?void 0:i.map(e=>{var i;return(0,t.A)((0,t.A)({},e),{},{sortedAllActivities:null===(i=e.sortableChildren)||void 0===i?void 0:i.sort((e,i)=>(null===e||void 0===e?void 0:e.subIndexId)-(null===i||void 0===i?void 0:i.subIndexId))})});ne(d),E(!1)};return(0,o.useEffect)(()=>{const e=setTimeout(()=>{O((0,b.uY)())},3e3);return()=>clearTimeout(e)},[O,P,D]),(0,j.jsxs)("div",{style:{backgroundColor:"#CCCCCC",padding:"5px",fontSize:"0.75rem"},children:[(0,j.jsx)("div",{style:{width:"45%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC",marginBottom:"5px"},children:(0,j.jsx)(a.A,{isClearable:!0,onChange:e=>{const i={id:e.value,labourName:e.label};O((0,b.Le)({id:i.id}))},options:R,placeholder:Q?"PROJECT: ".concat(null===Q||void 0===Q?void 0:Q.name):"Select a project",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,j.jsx)(n.p3,{title:(0,j.jsx)(n.Q_,{style:{fontWeight:500,margin:"-10px",color:"white",fontSize:"0.80rem"},onClick:H,color:"info",children:"Export as PDF"}),content:(0,j.jsx)(m.CSVLink,{data:X,headers:[{label:"Id",key:"indexValue"},{label:"Item Description",key:"name"},{label:"Unit",key:"unit"},{label:"Quantity",key:"quantity"},{label:"Rate",key:"rate"},{label:"Amount",key:"amount"}],filename:"BOQ",children:(0,j.jsx)(n.Q_,{style:{fontWeight:500,margin:"-10px",color:"white",fontSize:"0.80rem"},color:"info",children:"Export as CSV"})}),placement:"right",children:(0,j.jsx)(n.Q_,{style:{fontWeight:500,marginBottom:"10px",color:"white",fontSize:"12px"},onClick:H,color:"info",size:"sm",children:"Download BOQ"})}),(0,j.jsx)(n.Q_,{color:"info",size:"sm",style:{fontWeight:500,marginBottom:"10px",color:"white",fontSize:"12px",height:"30px",marginLeft:"10px",cursor:"pointer"},children:(0,j.jsxs)("label",{htmlFor:"file",onChange:e=>{const i=new FormData,l=e.target.files[0];i.append("csvFile",l),i.append("projectId",q),O((0,b.qn)(i)),e.target.value=""},children:[(0,j.jsx)("input",{type:"file",id:"file",hidden:!0}),(0,j.jsx)("p",{children:"Import BOQ"})]})}),(0,j.jsx)(n.Q_,{style:{fontWeight:500,marginBottom:"10px",marginLeft:"5px",color:"white",fontSize:"0.70rem",float:"right"},onClick:()=>{ne([]),E(!0)},color:"info",size:"sm",children:"Order Items"}),(0,j.jsxs)(n.zS,{size:"xl",style:{backgroundColor:"#01579b",color:"white"},visible:L,onClose:te,children:[(0,j.jsx)(n.E4,{onClose:te,children:(0,j.jsx)(n.lb,{children:"Re-order Items"})}),(0,j.jsx)(n.Tc,{children:(0,j.jsx)(C,{})})]}),(0,j.jsx)(n.Q_,{style:{fontWeight:500,marginBottom:"10px",color:"white",fontSize:"0.70rem",float:"right"},onClick:()=>{const e=_.indexOf(1);let i=_.slice();-1!==e?(k((0,j.jsxs)("div",{children:[(0,j.jsx)("span",{children:"Expand "}),(0,j.jsx)(v.g,{icon:c.tdl})]})),i.splice(i)):(k((0,j.jsxs)("div",{children:[(0,j.jsx)("span",{children:"Collapse "}),(0,j.jsx)(v.g,{icon:c.GF6})]})),i=M),T(i)},color:"info",size:"sm",children:w}),(0,j.jsx)("div",{style:{backgroundColor:"#3c73a8",width:"100%",borderBottom:"2px solid white",fontSize:"0.85rem"},children:(0,j.jsxs)("div",{children:[(0,j.jsxs)(S.A,{children:[(0,j.jsx)(I.A,{style:{paddingLeft:"21px",color:"white",fontWeight:550},colSpan:3,children:"Project Name :"}),(0,j.jsx)(I.A,{style:{color:"white",paddingLeft:"5%",whiteSpace:"nowrap",fontWeight:550},colSpan:4,children:null===Q||void 0===Q?void 0:Q.name}),(0,j.jsx)("div",{style:{paddingLeft:"150%"},children:(0,j.jsxs)(S.A,{children:[(0,j.jsx)(I.A,{style:{paddingLeft:"21px",color:"white",fontWeight:"bold",whiteSpace:"nowrap",border:"none",fontSize:"0.85rem"},colSpan:3,children:"DATE :"}),(0,j.jsx)(I.A,{style:{fontSize:"0.85rem",color:"white",fontWeight:"bold",paddingLeft:"5%",whiteSpace:"nowrap",border:"none"},colSpan:4,children:r()(null===B||void 0===B?void 0:B.createdAt).format("DD-MM-YYYY h:mm")})]})})]}),(0,j.jsxs)(S.A,{children:[(0,j.jsx)(I.A,{style:{paddingLeft:"21px",fontSize:"0.85rem",color:"white",fontWeight:"bold"},colSpan:3,children:"Client :"}),(0,j.jsx)(I.A,{style:{fontSize:"0.85rem",color:"white",fontWeight:"bold",paddingLeft:"5%",whiteSpace:"nowrap"},colSpan:4,children:null===B||void 0===B?void 0:B.client})]}),(0,j.jsxs)(S.A,{children:[(0,j.jsx)(I.A,{style:{paddingLeft:"21px",fontSize:"0.85rem",color:"white",fontWeight:"bold",border:"none"},colSpan:3,children:"Contractor :"}),(0,j.jsx)(I.A,{style:{fontSize:"0.85rem",color:"white",fontWeight:"bold",border:"none"},colSpan:4,children:null===B||void 0===B?void 0:B.contractor})]})]})}),(0,j.jsxs)("div",{style:{backgroundColor:"#fbfbf8",fontWeight:"bold"},children:[null===Q||void 0===Q||null===(A=Q.projects)||void 0===A?void 0:A.map(e=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h6",{style:{margin:"10px 10px 5px 5px",fontWeight:700},children:null===e||void 0===e?void 0:e.name}),(0,j.jsx)(u.Pd,{columns:K,items:oe,pagination:!0,itemsPerPage:50,scopedColumns:{show_details:e=>(0,j.jsx)("td",{className:"py-2",children:(0,j.jsx)("div",{onClick:()=>{(e=>{const i=_.indexOf(e);let l=_.slice();-1!==i?l.splice(i,1):l=[..._,e],T(l)})(e._id)},children:_.includes(e._id)?(0,j.jsx)(v.g,{icon:c.GF6}):(0,j.jsx)(v.g,{icon:c.tdl})})}),details:(e,i)=>{var l,o;return(0,j.jsx)(n.x8,{visible:_.includes(e._id),children:(0,j.jsxs)(n._v,{bordered:!0,borderColor:"#01579b",style:{backgroundColor:"white",fontWeight:500,fontSize:"0.7rem"},children:[null===e||void 0===e||null===(l=e.sortedAllActivities)||void 0===l?void 0:l.map(e=>{var l,o;return null===e||void 0===e||null===(l=e.category)||void 0===l||null===(o=l.subcategory)||void 0===o?void 0:o.map((l,o)=>(0,j.jsxs)(n.YI,{children:[(0,j.jsxs)(n.$s,{style:{width:"5%",marginLeft:"3px"},scope:"row",children:[i+1,". ",l.code?l.code:o+1]}),(0,j.jsx)(n.cC,{style:{width:"40%",marginLeft:"3px"},children:l.name}),(0,j.jsx)(n.cC,{style:{marginLeft:"3px"},children:" "}),(0,j.jsx)(n.cC,{style:{marginLeft:"3px"},children:" "}),(0,j.jsx)(n.cC,{style:{marginLeft:"3px"},children:" "}),(0,j.jsx)(n.cC,{style:{marginLeft:"3px"},children:" "}),(0,j.jsx)(n.cC,{style:{marginLeft:"3px"},children:" "})]},e.id+588))}),null===e||void 0===e||null===(o=e.sortedAllActivities)||void 0===o?void 0:o.map((l,o)=>(0,j.jsx)(n.jS,{children:(0,j.jsxs)(n.YI,{children:[(0,j.jsxs)(n.$s,{style:{width:"7%"},scope:"row",children:[i+1,".",o+1]}),(0,j.jsx)(n.cC,{style:{width:"40%"},children:l.name}),(0,j.jsx)(n.cC,{style:{width:"7%"},children:l.estimationUnit}),(0,j.jsx)(n.cC,{style:{width:"5%"},children:Number(l.estimationQuantity).toLocaleString()}),(0,j.jsx)(n.cC,{style:{width:"5%"},children:Number(l.estimationRate).toLocaleString()||0}),(0,j.jsx)(n.cC,{style:{width:"7%"},children:Number(l.estimationTotalAmount).toLocaleString()||0}),(0,j.jsx)(n.cC,{style:{width:"1%"},children:(0,j.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{return e=l.id,O((0,b.bg)({projectId:q,id:e})),void N(!z);var e},children:(0,j.jsx)(v.g,{value:"activity.id",icon:c.ROs})})})]},l.id+586)},e.id+5586))]})})}},tableProps:{responsive:!0}})]})),(0,j.jsxs)(n.zS,{size:"xl",style:{backgroundColor:"#01579b",color:"white"},visible:z,onClose:()=>{O((0,b.EQ)(B.id)).then(e=>{var i;const l=null===e||void 0===e||null===(i=e.payload)||void 0===i?void 0:i.data,o=localStorage.getItem(null===l||void 0===l?void 0:l.name),n=JSON.parse(o),d=null===n||void 0===n?void 0:n.map((e,i)=>{var l;return(0,t.A)((0,t.A)({},e),{},{name:e.name,indexId:i+1,sortableChildren:null===e||void 0===e||null===(l=e.children)||void 0===l?void 0:l.map((e,i)=>(0,t.A)((0,t.A)({},e),{},{subIndexId:i+1,name:e.name}))})});if(null!==n){var r,a,s;let e=[];null===d||void 0===d||d.map(i=>e=e.concat(i.sortableChildren));const i=null===l||void 0===l||null===(r=l.activities)||void 0===r?void 0:r.map(e=>{var i;return null===e||void 0===e||null===(i=e.category)||void 0===i?void 0:i.name}),o=null===l||void 0===l||null===(a=l.activities)||void 0===a||null===(s=a.map((e,i)=>{var l;return{id:i+1,name:null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.name}}))||void 0===s?void 0:s.filter((e,l)=>{if(i.indexOf(e.name)===l)return e}),n=null===o||void 0===o?void 0:o.map((e,i)=>{var l,o,n,t,d;return{allIndex:i,id:i+1,name:e.name,unit:" ",quantity:" ",rate:" ",amount:null===(l=Number(null===B||void 0===B||null===(o=B.activities)||void 0===o||null===(n=o.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===(null===e||void 0===e?void 0:e.name)}))||void 0===n?void 0:n.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0)))||void 0===l?void 0:l.toLocaleString(),calculateAmount:null===B||void 0===B||null===(t=B.activities)||void 0===t||null===(d=t.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===e.name}))||void 0===d?void 0:d.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0),_props:{bgColor:"#e2e5de"}}}),c=null===n||void 0===n?void 0:n.map((i,o)=>{var n,r,a;return(0,t.A)((0,t.A)({indexValue:o+1},i),{},{indexId:Number(null===d||void 0===d||null===(n=d.filter(e=>e.name===i.name))||void 0===n?void 0:n.map(e=>e.indexId)),name:i.name,children:null===l||void 0===l||null===(r=l.activities)||void 0===r||null===(a=r.filter(e=>{var l;return(null===(l=e.category)||void 0===l?void 0:l.name)===i.name}))||void 0===a?void 0:a.map(i=>{var l,o;return(0,t.A)((0,t.A)({},i),{},{subIndexId:Number(null===(l=e)||void 0===l||null===(o=l.filter(e=>e.id===i.id))||void 0===o?void 0:o.map(e=>e.subIndexId)),name:i.name})})})}),v=null===c||void 0===c?void 0:c.sort((e,i)=>(null===e||void 0===e?void 0:e.indexId)-(null===i||void 0===i?void 0:i.indexId)).map(e=>{var i;return(0,t.A)((0,t.A)({},e),{},{sortedAllActivities:null===(i=e.children)||void 0===i?void 0:i.sort((e,i)=>(null===e||void 0===e?void 0:e.subIndexId)-(null===i||void 0===i?void 0:i.subIndexId))})});ne(v)}else{var c,v,u;const e=null===l||void 0===l||null===(c=l.activities)||void 0===c?void 0:c.map(e=>{var i;return null===e||void 0===e||null===(i=e.category)||void 0===i?void 0:i.name}),i=null===l||void 0===l||null===(v=l.activities)||void 0===v||null===(u=v.map((e,i)=>{var l;return{id:i+1,name:null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.name}}))||void 0===u?void 0:u.filter((i,l)=>{if(e.indexOf(i.name)===l)return i}),o=null===i||void 0===i?void 0:i.map((e,i)=>{var o,n,t;return{allIndex:i,id:i+1,name:e.name,unit:" ",quantity:" ",rate:" ",amount:null===(o=Number(null===l||void 0===l||null===(n=l.activities)||void 0===n||null===(t=n.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===(null===e||void 0===e?void 0:e.name)}))||void 0===t?void 0:t.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0)))||void 0===o?void 0:o.toLocaleString(),_props:{bgColor:"#e2e5de"}}}),n=null===o||void 0===o?void 0:o.map((e,i)=>{var o,n;return(0,t.A)((0,t.A)({indexValue:i+1},e),{},{indexId:i+1,name:e.name,sortedAllActivities:null===l||void 0===l||null===(o=l.activities)||void 0===o||null===(n=o.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===e.name}))||void 0===n?void 0:n.map(e=>(0,t.A)((0,t.A)({},e),{},{subIndexId:i+1,name:e.name}))})});ne(n)}}),N(!1)},children:[(0,j.jsx)(n.E4,{}),(0,j.jsx)(n.Tc,{children:(0,j.jsx)(y,{})})]}),(0,j.jsx)("div",{children:(0,j.jsx)(h.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:Y,children:(0,j.jsx)(x.A,{color:"inherit"})})})]}),(0,j.jsx)("div",{style:{backgroundColor:"#01579b",width:"100%"},children:(0,j.jsxs)(S.A,{children:[(0,j.jsx)(I.A,{style:{paddingLeft:"21px",fontSize:"1rem",color:"white",fontWeight:"bold"},colSpan:3,children:"Grand Total:"}),(0,j.jsx)(I.A,{style:{fontSize:"1rem",color:"white",fontWeight:"bold"},colSpan:4,children:"".concat(Number($).toLocaleString()," ").concat(null===B||void 0===B?void 0:B.currencyCode)})]})}),(0,j.jsxs)("table",{id:"my-table",style:{display:"none",color:"white"},children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{style:{backgroundColor:"red",color:"white"},children:[(0,j.jsx)("th",{children:"Id"}),(0,j.jsx)("th",{children:"Item Description"}),(0,j.jsx)("th",{children:"Unit"}),(0,j.jsx)("th",{children:"Quantity"}),(0,j.jsx)("th",{children:"Rate"}),(0,j.jsx)("th",{children:"Amount"})]})}),null===oe||void 0===oe?void 0:oe.map((e,i)=>{var l;return(0,j.jsxs)("tbody",{children:[(0,j.jsxs)("tr",{style:{backgroundColor:"blue",color:"white"},children:[(0,j.jsx)("td",{id:"main",children:i+1}),(0,j.jsx)("td",{id:"main",children:null===e||void 0===e?void 0:e.name}),(0,j.jsx)("td",{id:"main",children:""}),(0,j.jsx)("td",{id:"main",children:""}),(0,j.jsx)("td",{id:"main",children:""}),(0,j.jsx)("td",{id:"main",children:e.amount})]}),null===e||void 0===e||null===(l=e.children)||void 0===l?void 0:l.map((e,l)=>{var o,n,t;return(0,j.jsxs)("tr",{children:[(0,j.jsxs)("td",{children:[i+1,".",l+1]}),(0,j.jsx)("td",{children:e.name}),(0,j.jsx)("td",{children:e.estimationUnit}),(0,j.jsx)("td",{children:(null===(o=Number(e.estimationQuantity))||void 0===o?void 0:o.toLocaleString())||0}),(0,j.jsx)("td",{children:(null===(n=Number(e.estimationRate))||void 0===n?void 0:n.toLocaleString())||0}),(0,j.jsx)("td",{children:(null===(t=Number(e.estimationTotalAmount))||void 0===t?void 0:t.toLocaleString())||0})]},e.id+75)})]},e.id+535)})]}),D&&(0,j.jsx)(n.Yq,{placement:"top-end",children:(0,j.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,j.jsxs)("div",{className:"d-flex",children:[(0,j.jsx)(n.Bw,{children:D}),(0,j.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),P&&(0,j.jsx)(n.Yq,{placement:"top-end",children:(0,j.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,j.jsxs)("div",{className:"d-flex",children:[(0,j.jsx)(n.Bw,{children:P}),(0,j.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})};var k=l(79114);function z(){const[e,i]=(0,o.useState)(""),[l,d]=(0,o.useState)(null),{projects:r,singleProject:s}=(0,p.d4)(b.Br),c=(0,p.wA)(),{role:v}=(0,k.Q)(),{isLoading:u,createAddonError:m,createAddonMessage:h,selectedActivity:x}=(0,p.d4)(f.$z);(0,o.useEffect)(()=>{c((0,b.EQ)(null===s||void 0===s?void 0:s.id))},[c,null===s||void 0===s?void 0:s.id]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{c((0,f.kd)())},3e3);return()=>clearTimeout(e)},[c,m,h]);const g=l=>{const{name:o,value:n}=l.target;i((0,t.A)((0,t.A)({},e),{},{[o]:n}))},y=["Material","Labour","Equipment","Direct cost"],A=null===y||void 0===y?void 0:y.map(e=>({value:e,label:e}));return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{style:{backgroundColor:"#fff",padding:"2rem"},children:["owner"!==v&&(null===r||void 0===r?void 0:r.length)>0&&(0,j.jsxs)(n.qI,{className:"row g-3 needs-validation",noValidate:!0,onSubmit:i=>{i.preventDefault(),null!==l&&c((0,f.JI)({reasons:null===e||void 0===e?void 0:e.reasons,appliedTo:l,amount:null===e||void 0===e?void 0:e.amount,projectId:null===s||void 0===s?void 0:s.id})).then(()=>{if("Direct cost"===l){const i={id:null===x||void 0===x?void 0:x.id,projectId:null===s||void 0===s?void 0:s.id,newData:{contigencyPercentage:null===e||void 0===e?void 0:e.amount,profitPercentage:null===e||void 0===e?void 0:e.amount,overHeadPercentage:null===e||void 0===e?void 0:e.amount}};c((0,f.u_)(i))}c((0,b.EQ)(null===s||void 0===s?void 0:s.id))})},children:[(0,j.jsxs)(n.UF,{md:12,children:[(0,j.jsx)(n.A6,{htmlFor:"validationCustom01",style:{color:"black"},children:"Reasons"}),(0,j.jsx)(n.OG,{type:"text","aria-label":"reasons",id:"validationCustom01",placeholder:"Create reasons",name:"reasons",value:null===e||void 0===e?void 0:e.reasons,onChange:g,required:!0}),(0,j.jsx)(n.To,{invalid:!0,children:"Enter a reason"})]}),(0,j.jsxs)(n.UF,{md:12,children:[(0,j.jsx)(n.A6,{htmlFor:"validationCustom01",style:{color:"black"},children:"Amount"}),(0,j.jsx)(n.OG,{type:"number","aria-label":"SubCategory",id:"validationCustom01",placeholder:"Create amount",name:"amount",value:null===e||void 0===e?void 0:e.amount,onChange:g,required:!0}),(0,j.jsx)(n.To,{invalid:!0,children:"Enter an amount"})]}),(0,j.jsx)(n.UF,{md:12,style:{fontSize:"12px"},children:(0,j.jsx)(a.A,{isClearable:!0,onChange:(e,i)=>{d(e.value)},options:A,placeholder:l?"On ".concat(l):"Select a Item",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,j.jsx)(n.UF,{xs:12,children:(0,j.jsx)(n.Q_,{style:{backgroundColor:"#01579b",color:"#fff",fontWeight:500,fontSize:"12px"},color:u?"secondary":"primary",type:"submit",children:u?"Creating...":"Create Addons"})})]}),h&&(0,j.jsx)(n.Yq,{children:(0,j.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,j.jsxs)("div",{className:"d-flex",children:[(0,j.jsx)(n.Bw,{children:h}),(0,j.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),m&&(0,j.jsx)(n.Yq,{children:(0,j.jsx)(n.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,j.jsxs)("div",{className:"d-flex",children:[(0,j.jsx)(n.Bw,{children:m}),(0,j.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})})}const N=()=>{const[e,i]=(0,o.useState)(!1),l=(0,p.wA)(),{singleProject:t}=(0,p.d4)(b.Br),d=null===t||void 0===t?void 0:t.addons;return(0,o.useEffect)(()=>{l((0,b.EQ)(null===t||void 0===t?void 0:t.id))},[l,null===t||void 0===t?void 0:t.id]),(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{style:{backgroundColor:"#e2e5de",padding:"20px",margin:"-10px"},children:[(0,j.jsxs)("div",{style:{display:"flex",marginBottom:"10px"},children:[(0,j.jsx)(n.Q_,{onClick:()=>i(!0),color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",whiteSpace:"nowrap",marginLeft:"3px"},children:"Create Addons"}),(0,j.jsxs)(n.zS,{size:"md",style:{backgroundColor:"#01579b",color:"white"},visible:e,onClose:()=>i(!1),children:[(0,j.jsx)(n.E4,{onClose:()=>i(!1),children:(0,j.jsx)(n.lb,{children:"Create Addon"})}),(0,j.jsx)(n.Tc,{children:(0,j.jsx)(z,{})})]})]}),(0,j.jsxs)(n.UF,{xs:12,style:{backgroundColor:"#fbfbf8"},children:[(0,j.jsx)(n.V0,{style:{backgroundColor:"#01579b",color:"white",textAlign:"center",fontSize:"0.95rem"},children:(0,j.jsx)("strong",{children:"Addons "})}),(0,j.jsxs)(n._v,{hover:!0,bordered:!0,borderColor:"info",style:{fontSize:"0.80rem"},children:[(0,j.jsx)(n.wV,{children:(0,j.jsxs)(n.YI,{style:{backgroundColor:"#01579b",color:"white"},children:[(0,j.jsx)(n.$s,{style:{color:"white",fontSize:"0.85rem"},scope:"col",children:"ID"}),(0,j.jsx)(n.$s,{style:{color:"white",fontSize:"0.85rem"},scope:"col",children:"Reasons"}),(0,j.jsx)(n.$s,{style:{color:"white",fontSize:"0.85rem"},scope:"col",children:"AppliedTo"}),(0,j.jsx)(n.$s,{style:{color:"white",fontSize:"0.85rem"},scope:"col",children:"Amount"})]})}),(0,j.jsx)(n.jS,{children:null===d||void 0===d?void 0:d.map((e,i)=>{var l;return(0,j.jsxs)(n.YI,{children:[(0,j.jsx)(n.cC,{children:i+1}),(0,j.jsx)(n.cC,{children:e.reasons}),(0,j.jsx)(n.cC,{children:e.appliedTo}),(0,j.jsx)(n.cC,{children:(null===(l=Number(e.amount))||void 0===l?void 0:l.toLocaleString())+" %"})]},e.id+487)})})]})]})]})})},L=()=>{var e,i,l,d,g,A,w,k;const[z,L]=(0,o.useState)((0,j.jsxs)("div",{children:[(0,j.jsx)("span",{children:"Expand "}),(0,j.jsx)(v.g,{icon:c.tdl})]})),[E,_]=(0,o.useState)(!1),[T,O]=(0,o.useState)(!1),[W,Q]=(0,o.useState)(!1),[B,F]=(0,o.useState)(!1),[Y,P]=(0,o.useState)([]),D=(0,p.wA)(),{projects:J,projectsGrouping:q,singleProjectGrouping:R,singleProject:V,updatedActivity:U,loading:G,error:M,message:$}=(0,p.d4)(b.Br);(0,o.useEffect)(()=>{D((0,b.a2)())},[D]),(0,o.useEffect)(()=>{D((0,f.jI)())},[D]),(0,o.useEffect)(()=>{D((0,b.cf)())},[D]),(0,o.useEffect)(()=>{D((0,b.EQ)(null===V||void 0===V?void 0:V.id))},[D]);const H=null===V||void 0===V?void 0:V.id,K=null===J||void 0===J?void 0:J.filter(e=>null===e.groupId),X=null===R||void 0===R?void 0:R.projects;let Z;Z=void 0!==X?null===X||void 0===X?void 0:X.concat(K):K;const ee=null===(e=Z)||void 0===e?void 0:e.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name}));(0,o.useEffect)(()=>{U&&D((0,f.q)(U))},[U,D]);const ie=null===q||void 0===q?void 0:q.map(e=>({value:e.id,label:e.name})),le=null===V||void 0===V||null===(i=V.activities)||void 0===i?void 0:i.map(e=>{var i;return null===e||void 0===e||null===(i=e.category)||void 0===i?void 0:i.name}),oe=null===V||void 0===V||null===(l=V.activities)||void 0===l||null===(d=l.map((e,i)=>{var l;return{id:i+1,name:null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.name}}))||void 0===d?void 0:d.filter((e,i)=>{if(le.indexOf(e.name)===i)return e}),ne=null===oe||void 0===oe?void 0:oe.map((e,i)=>{var l,o,n,t,d;return{allIndex:i,id:i+1,name:e.name,unit:" ",quantity:" ",rate:" ",hidden:" ",amount:null===(l=Number(null===V||void 0===V||null===(o=V.activities)||void 0===o||null===(n=o.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===(null===e||void 0===e?void 0:e.name)}))||void 0===n?void 0:n.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0)))||void 0===l?void 0:l.toLocaleString(),calculateAmount:null===V||void 0===V||null===(t=V.activities)||void 0===t||null===(d=t.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===e.name}))||void 0===d?void 0:d.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0),_props:{bgColor:"#ddd"}}}),te=null===ne||void 0===ne?void 0:ne.map(e=>e.allIndex),de=null===ne||void 0===ne?void 0:ne.map(e=>e.calculateAmount).reduce((e,i)=>e+i,0);function re(){var e,i=new s.default;i.autoTable({theme:"plain",headStyles:{fontSize:15},bodyStyles:{fontSize:15,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["BILLS OF QUANTITIES"]]}),i.autoTable({theme:"plain",styles:{fontSize:12,fillColor:"#01579b",textColor:"#ffffff"},body:[["Project Name:   ".concat(null===V||void 0===V?void 0:V.name)],["Client:    ".concat(null===V||void 0===V?void 0:V.client)],["Contractor:    ".concat(null===V||void 0===V?void 0:V.contractor)],["DATE:   ".concat(r()(null===V||void 0===V?void 0:V.createdAt).format("DD-MM-YYYY h:mm"))]]}),i.autoTable({theme:"grid",html:"#my-table",didParseCell(e){"main"===e.cell.raw.id?(e.cell.styles.textColor="black",e.cell.styles.fillColor="#ccc",e.cell.styles.fontSize=10):"subCt"===e.cell.raw.id&&(e.cell.styles.textColor="black",e.cell.styles.fillColor="#eee",e.cell.styles.fontSize=9)}}),i.autoTable({theme:"plain",styles:{fontSize:14,fontStyle:"italic"},body:[["GRAND TOTAL: ".concat(!0===W?" ":null===(e=Number(de))||void 0===e?void 0:e.toLocaleString()," ").concat(null===V||void 0===V?void 0:V.currencyCode)]]}),i.save("BOQ.pdf")}const ae=[{key:"indexId",label:"Id",filter:!1,sorter:!1,_props:{className:"fw-semibold"},_style:{width:"8%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"name",label:"Item Description",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"60%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"unit",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"10%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"quantity",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"10%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"rate",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"10%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:!0===W?"hidden":"amount",label:"amount",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"10%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"show_details",label:"",_style:{width:"3%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"},filter:!1,sorter:!1,_props:{color:"primary",className:"fw-semibold"}}],se=null===V||void 0===V||null===(g=V.activities)||void 0===g?void 0:g.map((e,i)=>({id:e.id,name:e.name,unit:e.estimationUnit,quantity:e.estimationQuantity,rate:e.estimationRate,amount:e.estimationTotalAmount})),ce=null===(A=localStorage)||void 0===A?void 0:A.getItem(null===V||void 0===V?void 0:V.name);let ve=[];"undefined"!==ce&&(ve=null===JSON||void 0===JSON?void 0:JSON.parse(ce));const ue=null===(w=ve)||void 0===w?void 0:w.map((e,i)=>{var l;return(0,t.A)((0,t.A)({},e),{},{name:e.name,indexId:i+1,sortableChildren:null===e||void 0===e||null===(l=e.children)||void 0===l?void 0:l.map((e,i)=>(0,t.A)((0,t.A)({},e),{},{subIndexId:i+1,name:e.name}))})});let me;if(null!==ve){let e=[];null===ue||void 0===ue||ue.map(i=>e=e.concat(i.sortableChildren)),me=null===ne||void 0===ne?void 0:ne.map((i,l)=>{var o,n,d;return(0,t.A)((0,t.A)({},i),{},{indexId:Number(null===ue||void 0===ue||null===(o=ue.filter(e=>e.name===i.name))||void 0===o?void 0:o.map(e=>e.indexId)),name:i.name,hidden:" ",children:null===V||void 0===V||null===(n=V.activities)||void 0===n||null===(d=n.filter(e=>{var l;return(null===(l=e.category)||void 0===l?void 0:l.name)===i.name}))||void 0===d?void 0:d.map(i=>{var l,o;return(0,t.A)((0,t.A)({},i),{},{subIndexId:Number(null===(l=e)||void 0===l||null===(o=l.filter(e=>e.id===i.id))||void 0===o?void 0:o.map(e=>e.subIndexId)),name:i.name})})})})}else me=null===ne||void 0===ne?void 0:ne.map((e,i)=>{var l,o;return(0,t.A)((0,t.A)({},e),{},{indexValue:i+1,indexId:i+1,name:e.name,hidden:" ",children:null===V||void 0===V||null===(l=V.activities)||void 0===l||null===(o=l.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===e.name}))||void 0===o?void 0:o.map((e,i)=>(0,t.A)((0,t.A)({},e),{},{subIndexId:i+1,name:e.name}))})});const[he,xe]=(0,o.useState)(null===(k=me)||void 0===k?void 0:k.sort((e,i)=>(null===e||void 0===e?void 0:e.indexId)-(null===i||void 0===i?void 0:i.indexId)).map(e=>{var i;return(0,t.A)((0,t.A)({},e),{},{hidden:" ",sortedAllActivities:null===(i=e.children)||void 0===i?void 0:i.sort((e,i)=>(null===e||void 0===e?void 0:e.subIndexId)-(null===i||void 0===i?void 0:i.subIndexId))})})),pe=()=>{var e;const i=localStorage.getItem(null===V||void 0===V?void 0:V.name);let l=[];"undefined"!==i&&(l=null===JSON||void 0===JSON?void 0:JSON.parse(i));const o=null===(e=l)||void 0===e?void 0:e.map((e,i)=>{var l;return(0,t.A)((0,t.A)({},e),{},{hidden:" ",name:e.name,indexId:i+1,sortableChildren:null===e||void 0===e||null===(l=e.children)||void 0===l?void 0:l.map((e,i)=>(0,t.A)((0,t.A)({},e),{},{subIndexId:i+1,name:e.name}))})}),n=null===o||void 0===o?void 0:o.sort((e,i)=>(null===e||void 0===e?void 0:e.indexId)-(null===i||void 0===i?void 0:i.indexId)).map(e=>{var i;return(0,t.A)((0,t.A)({},e),{},{hidden:" ",sortedAllActivities:null===(i=e.sortableChildren)||void 0===i?void 0:i.sort((e,i)=>(null===e||void 0===e?void 0:e.subIndexId)-(null===i||void 0===i?void 0:i.subIndexId))})});xe(n),O(!1)};return(0,o.useEffect)(()=>{const e=setTimeout(()=>{D((0,b.uY)())},3e3);return()=>clearTimeout(e)},[D,M,$]),(0,j.jsxs)("div",{style:{backgroundColor:"#CCCCCC",padding:"1px",fontSize:"0.75rem"},children:[(0,j.jsx)("div",{style:{width:"45%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,j.jsx)(a.A,{isClearable:!0,onChange:e=>{const i={id:e.value,labourName:e.label};D((0,b.Le)({id:i.id}))},options:ie,placeholder:R?"PROJECT: ".concat(null===R||void 0===R?void 0:R.name):"Select a project",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),q&&(0,j.jsx)("div",{style:{marginBottom:"20px",width:"40%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,j.jsx)(a.A,{isClearable:!0,onChange:e=>{const i={id:e.value,labourName:e.label};xe([]),D((0,b.EQ)(i.id)).then(e=>{var i;const l=null===e||void 0===e||null===(i=e.payload)||void 0===i?void 0:i.data,o=localStorage.getItem(e.payload.data.name),n=JSON.parse(o);if(null!==n){const e=null===n||void 0===n?void 0:n.sort((e,i)=>(null===e||void 0===e?void 0:e.indexId)-(null===i||void 0===i?void 0:i.indexId)).map(e=>{var i;return(0,t.A)((0,t.A)({},e),{},{hidden:" ",sortedAllActivities:null===(i=e.children)||void 0===i?void 0:i.sort((e,i)=>(null===e||void 0===e?void 0:e.subIndexId)-(null===i||void 0===i?void 0:i.subIndexId))})});xe(e)}else{var d,r,a;const i=null===l||void 0===l||null===(d=l.activities)||void 0===d?void 0:d.map(e=>{var i;return null===e||void 0===e||null===(i=e.category)||void 0===i?void 0:i.name}),o=null===l||void 0===l||null===(r=l.activities)||void 0===r||null===(a=r.map((e,i)=>{var l;return{id:i+1,name:null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.name}}))||void 0===a?void 0:a.filter((e,l)=>{if(i.indexOf(e.name)===l)return e}),n=null===o||void 0===o?void 0:o.map((i,l)=>{var o,n,t,d,r;return{allIndex:l,id:l+1,name:i.name,unit:" ",quantity:" ",rate:" ",hidden:" ",amount:null===(o=Number(null===e||void 0===e||null===(n=e.payload)||void 0===n||null===(t=n.data)||void 0===t||null===(d=t.activities)||void 0===d||null===(r=d.filter(e=>{var l;return(null===(l=e.category)||void 0===l?void 0:l.name)===(null===i||void 0===i?void 0:i.name)}))||void 0===r?void 0:r.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0)))||void 0===o?void 0:o.toLocaleString(),_props:{bgColor:"#e2e5de"}}}),s=null===n||void 0===n?void 0:n.map((e,i)=>{var o,n;return(0,t.A)((0,t.A)({indexValue:i+1},e),{},{indexId:i+1,name:e.name,hidden:" ",sortedAllActivities:null===l||void 0===l||null===(o=l.activities)||void 0===o||null===(n=o.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===e.name}))||void 0===n?void 0:n.map(e=>(0,t.A)((0,t.A)({},e),{},{subIndexId:i+1,name:e.name}))})});xe(s)}})},options:ee,placeholder:V?"SUB-PROJECT: ".concat(null===V||void 0===V?void 0:V.name):"Select a sub-project",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,j.jsx)(n.p3,{title:(0,j.jsx)(n.Q_,{style:{fontWeight:500,margin:"-10px",color:"white",fontSize:"0.80rem"},onClick:re,color:"info",children:"Export as PDF"}),content:(0,j.jsx)(m.CSVLink,{data:se,headers:[{label:"Id",key:"indexValue"},{label:"Item Description",key:"name"},{label:"Unit",key:"unit"},{label:"Quantity",key:"quantity"},{label:"Rate",key:"rate"},{label:"Amount",key:"amount"}],filename:"BOQ",children:(0,j.jsx)(n.Q_,{style:{fontWeight:500,margin:"-10px",color:"white",fontSize:"0.80rem"},color:"info",children:"Export as CSV"})}),placement:"right",children:(0,j.jsx)(n.Q_,{style:{fontWeight:500,marginBottom:"10px",color:"white",fontSize:"12px"},onClick:re,color:"info",size:"sm",children:"Download BOQ"})}),(0,j.jsx)(n.Q_,{color:"info",size:"sm",style:{fontWeight:500,marginBottom:"10px",color:"white",fontSize:"12px",height:"30px",marginLeft:"10px",cursor:"pointer"},children:(0,j.jsxs)("label",{htmlFor:"file",onChange:e=>{const i=new FormData,l=e.target.files[0];i.append("csvFile",l),i.append("projectId",H),D((0,b.qn)(i)),e.target.value=""},children:[(0,j.jsx)("input",{type:"file",id:"file",hidden:!0}),(0,j.jsx)("p",{children:"Import BOQ"})]})}),(0,j.jsx)(n.Q_,{style:{fontWeight:500,marginBottom:"10px",marginLeft:"5px",color:"white",fontSize:"0.70rem",float:"right"},onClick:()=>Q(!W),color:"info",size:"sm",children:!1===W?"Hide rate":"UnHide rate"}),(0,j.jsx)(n.Q_,{style:{fontWeight:500,marginBottom:"10px",marginLeft:"5px",color:"white",fontSize:"0.70rem",float:"right"},onClick:()=>{xe([]),O(!0)},color:"info",size:"sm",children:"Order Items"}),(0,j.jsxs)(n.zS,{size:"xl",style:{backgroundColor:"#01579b",color:"white"},visible:T,onClose:pe,children:[(0,j.jsx)(n.E4,{onClose:pe,children:(0,j.jsx)(n.lb,{children:"Re-order Items"})}),(0,j.jsx)(n.Tc,{children:(0,j.jsx)(C,{})})]}),(0,j.jsxs)(n.zS,{size:"lg",style:{backgroundColor:"#01579b",color:"white"},visible:B,onClose:()=>F(!1),children:[(0,j.jsx)(n.E4,{onClose:()=>F(!1),children:(0,j.jsx)(n.lb,{children:"All Addons"})}),(0,j.jsx)(n.Tc,{children:(0,j.jsx)(N,{})})]}),(0,j.jsx)(n.Q_,{style:{fontWeight:500,marginBottom:"10px",marginLeft:"5px",color:"white",fontSize:"0.70rem",float:"right"},onClick:()=>F(!0),color:"info",size:"sm",children:"Addons"}),(0,j.jsx)(n.Q_,{style:{fontWeight:500,marginBottom:"10px",color:"white",fontSize:"0.70rem",float:"right"},onClick:()=>{const e=Y.indexOf(1);let i=Y.slice();-1!==e?(L((0,j.jsxs)("div",{children:[(0,j.jsx)("span",{children:"Expand "}),(0,j.jsx)(v.g,{icon:c.tdl})]})),i.splice(i)):(L((0,j.jsxs)("div",{children:[(0,j.jsx)("span",{children:"Collapse "}),(0,j.jsx)(v.g,{icon:c.GF6})]})),i=te),P(i)},color:"info",size:"sm",children:z}),(0,j.jsx)("div",{style:{backgroundColor:"#3c73a8",width:"100%",borderBottom:"2px solid white",fontSize:"0.85rem"},children:(0,j.jsxs)("div",{children:[(0,j.jsxs)(S.A,{children:[(0,j.jsx)(I.A,{style:{paddingLeft:"21px",color:"white",fontWeight:550},colSpan:3,children:"Project Name :"}),(0,j.jsx)(I.A,{style:{color:"white",paddingLeft:"5%",whiteSpace:"nowrap",fontWeight:550},colSpan:4,children:null===V||void 0===V?void 0:V.name}),(0,j.jsx)("div",{style:{paddingLeft:"150%"},children:(0,j.jsxs)(S.A,{children:[(0,j.jsx)(I.A,{style:{paddingLeft:"21px",color:"white",fontWeight:"bold",whiteSpace:"nowrap",border:"none",fontSize:"0.85rem"},colSpan:3,children:"DATE :"}),(0,j.jsx)(I.A,{style:{fontSize:"0.85rem",color:"white",fontWeight:"bold",paddingLeft:"5%",whiteSpace:"nowrap",border:"none"},colSpan:4,children:r()(null===V||void 0===V?void 0:V.createdAt).format("DD-MM-YYYY h:mm")})]})})]}),(0,j.jsxs)(S.A,{children:[(0,j.jsx)(I.A,{style:{paddingLeft:"21px",fontSize:"0.85rem",color:"white",fontWeight:"bold"},colSpan:3,children:"Client :"}),(0,j.jsx)(I.A,{style:{fontSize:"0.85rem",color:"white",fontWeight:"bold",paddingLeft:"5%",whiteSpace:"nowrap"},colSpan:4,children:null===V||void 0===V?void 0:V.client})]}),(0,j.jsxs)(S.A,{children:[(0,j.jsx)(I.A,{style:{paddingLeft:"21px",fontSize:"0.85rem",color:"white",fontWeight:"bold",border:"none"},colSpan:3,children:"Contractor :"}),(0,j.jsx)(I.A,{style:{fontSize:"0.85rem",color:"white",fontWeight:"bold",border:"none"},colSpan:4,children:null===V||void 0===V?void 0:V.contractor})]})]})}),(0,j.jsxs)("div",{style:{backgroundColor:"#fbfbf8",fontWeight:"bold"},children:[(0,j.jsx)(u.Pd,{columns:ae,items:he,pagination:!0,itemsPerPage:50,scopedColumns:{show_details:e=>(0,j.jsx)("td",{className:"py-2",children:(0,j.jsx)("div",{onClick:()=>{(e=>{const i=Y.indexOf(e);let l=Y.slice();-1!==i?l.splice(i,1):l=[...Y,e],P(l)})(e._id)},children:Y.includes(e._id)?(0,j.jsx)(v.g,{icon:c.GF6}):(0,j.jsx)(v.g,{icon:c.tdl})})}),details:(e,i)=>{var l,o;return(0,j.jsx)(n.x8,{visible:Y.includes(e._id),children:(0,j.jsxs)(n._v,{bordered:!0,borderColor:"#01579b",style:{backgroundColor:"white",fontWeight:500,fontSize:"0.7rem"},children:[null===e||void 0===e||null===(l=e.sortedAllActivities)||void 0===l?void 0:l.map(e=>{var l,o;return null===e||void 0===e||null===(l=e.category)||void 0===l||null===(o=l.subcategory)||void 0===o?void 0:o.map((l,o)=>(0,j.jsxs)(n.YI,{style:{backgroundColor:"#eee"},children:[(0,j.jsxs)(n.$s,{style:{width:"5%",marginLeft:"3px"},scope:"row",children:[i+1,". ",l.code?l.code:o+1]}),(0,j.jsx)(n.cC,{style:{width:"40%",marginLeft:"3px"},children:l.name}),(0,j.jsx)(n.cC,{style:{marginLeft:"3px"},children:" "}),(0,j.jsx)(n.cC,{style:{marginLeft:"3px"},children:" "}),(0,j.jsx)(n.cC,{style:{marginLeft:"3px"},children:" "}),(0,j.jsx)(n.cC,{style:{marginLeft:"3px"},children:" "}),(0,j.jsx)(n.cC,{style:{marginLeft:"3px"},children:" "})]},e.id+588))}),null===e||void 0===e||null===(o=e.sortedAllActivities)||void 0===o?void 0:o.map((l,o)=>(0,j.jsx)(n.jS,{children:(0,j.jsxs)(n.YI,{children:[(0,j.jsxs)(n.$s,{style:{width:"7%"},scope:"row",children:[i+1,".",o+1]}),(0,j.jsx)(n.cC,{style:{width:"40%"},children:l.name}),(0,j.jsx)(n.cC,{style:{width:"7%"},children:l.estimationUnit}),(0,j.jsx)(n.cC,{style:{width:"5%"},children:Number(l.estimationQuantity).toLocaleString()}),(0,j.jsx)(n.cC,{style:{width:"5%"},children:!0===W?" ":Number(l.estimationRate).toLocaleString()||0}),(0,j.jsx)(n.cC,{style:{width:"7%"},children:!0===W?" ":Number(l.estimationTotalAmount).toLocaleString()||0}),(0,j.jsx)(n.cC,{style:{width:"1%"},children:(0,j.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{return e=l.id,D((0,b.bg)({projectId:H,id:e})),void _(!E);var e},children:(0,j.jsx)(v.g,{value:"activity.id",icon:c.ROs})})})]},l.id+586)},e.id+5586))]})})}},tableProps:{responsive:!0}}),(0,j.jsxs)(n.zS,{size:"xl",style:{backgroundColor:"#01579b",color:"white"},visible:E,onClose:()=>{D((0,b.EQ)(V.id)).then(e=>{var i;const l=null===e||void 0===e||null===(i=e.payload)||void 0===i?void 0:i.data,o=localStorage.getItem(null===l||void 0===l?void 0:l.name),n=JSON.parse(o),d=null===n||void 0===n?void 0:n.map((e,i)=>{var l;return(0,t.A)((0,t.A)({},e),{},{name:e.name,indexId:i+1,sortableChildren:null===e||void 0===e||null===(l=e.children)||void 0===l?void 0:l.map((e,i)=>(0,t.A)((0,t.A)({},e),{},{subIndexId:i+1,name:e.name}))})});if(null!==n){var r,a,s;let e=[];null===d||void 0===d||d.map(i=>e=e.concat(i.sortableChildren));const i=null===l||void 0===l||null===(r=l.activities)||void 0===r?void 0:r.map(e=>{var i;return null===e||void 0===e||null===(i=e.category)||void 0===i?void 0:i.name}),o=null===l||void 0===l||null===(a=l.activities)||void 0===a||null===(s=a.map((e,i)=>{var l;return{id:i+1,name:null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.name}}))||void 0===s?void 0:s.filter((e,l)=>{if(i.indexOf(e.name)===l)return e}),n=null===o||void 0===o?void 0:o.map((e,i)=>{var l,o,n,t,d;return{allIndex:i,id:i+1,name:e.name,unit:" ",quantity:" ",rate:" ",hidden:" ",amount:null===(l=Number(null===V||void 0===V||null===(o=V.activities)||void 0===o||null===(n=o.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===(null===e||void 0===e?void 0:e.name)}))||void 0===n?void 0:n.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0)))||void 0===l?void 0:l.toLocaleString(),calculateAmount:null===V||void 0===V||null===(t=V.activities)||void 0===t||null===(d=t.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===e.name}))||void 0===d?void 0:d.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0),_props:{bgColor:"#e2e5de"}}}),c=null===n||void 0===n?void 0:n.map((i,o)=>{var n,r,a;return(0,t.A)((0,t.A)({indexValue:o+1},i),{},{indexId:Number(null===d||void 0===d||null===(n=d.filter(e=>e.name===i.name))||void 0===n?void 0:n.map(e=>e.indexId)),name:i.name,hidden:" ",children:null===l||void 0===l||null===(r=l.activities)||void 0===r||null===(a=r.filter(e=>{var l;return(null===(l=e.category)||void 0===l?void 0:l.name)===i.name}))||void 0===a?void 0:a.map(i=>{var l,o;return(0,t.A)((0,t.A)({},i),{},{subIndexId:Number(null===(l=e)||void 0===l||null===(o=l.filter(e=>e.id===i.id))||void 0===o?void 0:o.map(e=>e.subIndexId)),name:i.name})})})}),v=null===c||void 0===c?void 0:c.sort((e,i)=>(null===e||void 0===e?void 0:e.indexId)-(null===i||void 0===i?void 0:i.indexId)).map(e=>{var i;return(0,t.A)((0,t.A)({},e),{},{hidden:" ",sortedAllActivities:null===(i=e.children)||void 0===i?void 0:i.sort((e,i)=>(null===e||void 0===e?void 0:e.subIndexId)-(null===i||void 0===i?void 0:i.subIndexId))})});xe(v)}else{var c,v,u;const e=null===l||void 0===l||null===(c=l.activities)||void 0===c?void 0:c.map(e=>{var i;return null===e||void 0===e||null===(i=e.category)||void 0===i?void 0:i.name}),i=null===l||void 0===l||null===(v=l.activities)||void 0===v||null===(u=v.map((e,i)=>{var l;return{id:i+1,name:null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.name}}))||void 0===u?void 0:u.filter((i,l)=>{if(e.indexOf(i.name)===l)return i}),o=null===i||void 0===i?void 0:i.map((e,i)=>{var o,n,t;return{allIndex:i,id:i+1,name:e.name,unit:" ",quantity:" ",rate:" ",hidden:" ",amount:null===(o=Number(null===l||void 0===l||null===(n=l.activities)||void 0===n||null===(t=n.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===(null===e||void 0===e?void 0:e.name)}))||void 0===t?void 0:t.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0)))||void 0===o?void 0:o.toLocaleString(),_props:{bgColor:"#e2e5de"}}}),n=null===o||void 0===o?void 0:o.map((e,i)=>{var o,n;return(0,t.A)((0,t.A)({indexValue:i+1},e),{},{indexId:i+1,name:e.name,hidden:" ",sortedAllActivities:null===l||void 0===l||null===(o=l.activities)||void 0===o||null===(n=o.filter(i=>{var l;return(null===(l=i.category)||void 0===l?void 0:l.name)===e.name}))||void 0===n?void 0:n.map(e=>(0,t.A)((0,t.A)({},e),{},{subIndexId:i+1,name:e.name}))})});xe(n)}}),_(!1)},children:[(0,j.jsx)(n.E4,{}),(0,j.jsx)(n.Tc,{children:(0,j.jsx)(y,{})})]}),(0,j.jsx)("div",{children:(0,j.jsx)(h.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:G,children:(0,j.jsx)(x.A,{color:"inherit"})})})]}),(0,j.jsx)("div",{style:{backgroundColor:"#01579b",width:"100%"},children:(0,j.jsxs)(S.A,{children:[(0,j.jsx)(I.A,{style:{paddingLeft:"21px",fontSize:"1rem",color:"white",fontWeight:"bold"},colSpan:3,children:"Grand Total:"}),(0,j.jsx)(I.A,{style:{fontSize:"1rem",color:"white",fontWeight:"bold"},colSpan:4,children:"".concat(!0===W?" ":Number(de).toLocaleString()," ").concat(null===V||void 0===V?void 0:V.currencyCode)})]})}),(0,j.jsxs)("table",{id:"my-table",style:{display:"none",color:"white"},children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{style:{backgroundColor:"red",color:"white"},children:[(0,j.jsx)("th",{children:"Id"}),(0,j.jsx)("th",{children:"Item Description"}),(0,j.jsx)("th",{children:"Unit"}),(0,j.jsx)("th",{children:"Quantity"}),(0,j.jsx)("th",{children:"Rate"}),(0,j.jsx)("th",{children:"Amount"})]})}),null===he||void 0===he?void 0:he.map((e,i)=>{var l,o;return(0,j.jsxs)("tbody",{children:[(0,j.jsxs)("tr",{style:{backgroundColor:"blue",color:"white"},children:[(0,j.jsx)("td",{id:"main",children:i+1}),(0,j.jsx)("td",{id:"main",children:null===e||void 0===e?void 0:e.name}),(0,j.jsx)("td",{id:"main",children:""}),(0,j.jsx)("td",{id:"main",children:""}),(0,j.jsx)("td",{id:"main",children:""}),(0,j.jsx)("td",{id:"main",children:!0===W?" ":e.amount})]}),null===e||void 0===e||null===(l=e.children)||void 0===l?void 0:l.map(e=>{var l,o;return null===e||void 0===e||null===(l=e.category)||void 0===l||null===(o=l.subcategory)||void 0===o?void 0:o.map((l,o)=>(0,j.jsx)("tr",{style:{backgroundColor:"#eee"},children:(0,j.jsxs)("td",{id:"subCt",colSpan:"11",children:[i+1,". ",l.code?l.code:o+1,". "," ",(0,j.jsx)("span",{children:l.name})]})},e.id+588))}),null===e||void 0===e||null===(o=e.children)||void 0===o?void 0:o.map((e,l)=>{var o,n,t;return(0,j.jsxs)("tr",{children:[(0,j.jsxs)("td",{children:[i+1,".",l+1]}),(0,j.jsx)("td",{children:e.name}),(0,j.jsx)("td",{children:e.estimationUnit}),(0,j.jsx)("td",{children:(null===(o=Number(e.estimationQuantity))||void 0===o?void 0:o.toLocaleString())||0}),(0,j.jsx)("td",{children:!0===W?" ":(null===(n=Number(e.estimationRate))||void 0===n?void 0:n.toLocaleString())||0}),(0,j.jsx)("td",{children:!0===W?" ":(null===(t=Number(e.estimationTotalAmount))||void 0===t?void 0:t.toLocaleString())||0})]},e.id+75)})]},e.id+535)})]}),$&&(0,j.jsx)(n.Yq,{placement:"top-end",children:(0,j.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,j.jsxs)("div",{className:"d-flex",children:[(0,j.jsx)(n.Bw,{children:$}),(0,j.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),M&&(0,j.jsx)(n.Yq,{placement:"top-end",children:(0,j.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,j.jsxs)("div",{className:"d-flex",children:[(0,j.jsx)(n.Bw,{children:M}),(0,j.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})},E=()=>{const e=(0,p.wA)(),{singleProject:i}=(0,p.d4)(b.Br),[l,t]=(0,o.useState)(1);return(0,o.useEffect)(()=>{e((0,b.EQ)(null===i||void 0===i?void 0:i.id))},[e,null===i||void 0===i?void 0:i.id]),(0,o.useEffect)(()=>{e((0,b.cf)())},[e]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(n.by,{style:{marginBottom:"20px",backgroundColor:"white",fontWeight:"bold",cursor:"pointer",width:"fit-content"},variant:"pills",role:"tablist",children:[(0,j.jsx)(n.g9,{children:(0,j.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:1===l?"rgb(1, 87, 155)":"",color:1===l?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:1===l,onClick:()=>t(1),children:"Summarized BOQ"})}),(0,j.jsx)(n.g9,{children:(0,j.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:2===l?"rgb(1, 87, 155)":"",color:2===l?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:2===l,onClick:()=>t(2),children:"General BOQ"})})]}),(0,j.jsxs)(n.eL,{children:[(0,j.jsx)(n.x1,{role:"tabpanel","aria-labelledby":"home-tab",visible:1===l,children:(0,j.jsx)(L,{})}),(0,j.jsx)(n.x1,{role:"tabpanel","aria-labelledby":"profile-tab",visible:2===l,children:(0,j.jsx)(w,{})})]})]})}}}]);