"use strict";(self.webpackChunk_ds_estimation_construction_web_app=self.webpackChunk_ds_estimation_construction_web_app||[]).push([[3842],{33842:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var l=a(89379),i=a(9950),n=a(49911),o=a(73878),s=a(92686),r=a(26080),d=a(44414);function c(){const e=(0,o.wA)(),{projects:t,status:a,error:c,message:u}=(0,o.d4)(s.Br),[h,m]=(0,i.useState)(""),[v,p]=(0,i.useState)(""),x=null===t||void 0===t?void 0:t.map(e=>({value:e.id,label:e.name}));return(0,i.useEffect)(()=>{const t=setTimeout(()=>{e((0,s.uY)())},3e3);return()=>clearTimeout(t)},[e,u,c]),(0,i.useEffect)(()=>{const e=setTimeout(()=>{p("")},3e3);return()=>clearTimeout(e)},[v]),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(r.A,{isClearable:!0,onChange:e=>{m(e.value)},options:x,placeholder:"Select sub-project",styles:{option:(e,t)=>(0,l.A)((0,l.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})}}),v&&(0,d.jsx)(n.kj,{color:"danger",className:"mt-2",children:v}),(0,d.jsx)(n.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)"},onClick:t=>{t.preventDefault(),h?e((0,s.Gt)(h)):p("sub-project is required")},className:"mt-3",children:"loading"===a?"duplicating...":"Duplicate sub-project"})]}),c&&(0,d.jsx)(n.Yq,{placement:"top-end",children:(0,d.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,d.jsxs)("div",{className:"d-flex",children:[(0,d.jsx)(n.Bw,{children:c}),(0,d.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),u&&(0,d.jsx)(n.Yq,{placement:"top-end",children:(0,d.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,d.jsxs)("div",{className:"d-flex",children:[(0,d.jsx)(n.Bw,{children:u}),(0,d.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})}var u=a(79114),h=a(48303);function m(){const[e,t]=(0,i.useState)({name:"",description:"",client:"",contractor:"",consultant:"",startDate:void 0,endDate:void 0,status:"",vat:"",category:""}),{role:a}=(0,u.Q)(),[m,v]=(0,i.useState)(""),p=(0,o.wA)(),{loading:x,createProjectError:j,createSuccessMessage:C,singleProjectGrouping:D}=(0,o.d4)(s.Br),[g,b]=(0,i.useState)(!1),A=a=>{const{name:i,value:n}=a.target;t((0,l.A)((0,l.A)({},e),{},{[i]:n}))};(0,i.useEffect)(()=>{const e=setTimeout(()=>{p((0,s.uY)())},3e3);return()=>clearTimeout(e)},[p,j,C]);const[S,F]=(0,i.useState)(!1),[N,T]=(0,i.useState)(!1),P=null===h.M||void 0===h.M?void 0:h.M.map(e=>({value:e,label:e}));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h5",{children:"Select how you did like to Create sub-project"}),(0,d.jsx)("div",{className:"mb-3 mt-3",children:(0,d.jsxs)("select",{style:{outline:"none",height:"40px",width:"300px"},onChange:e=>{const{value:t}=e.target;if("duplicate"===t)return F(!0);"template"===t&&(window.location.href="#/templates"),"scratch"===t&&T(!0),"chose"===t&&T(!1)},children:[(0,d.jsx)("option",{value:"chose",children:"Choose option"}),(0,d.jsx)("option",{value:"duplicate",children:"Use previous sub-project"}),(0,d.jsx)("option",{value:"template",children:"Use default template"}),(0,d.jsx)("option",{value:"scratch",children:"create from scratch (starting)"})]})}),(0,d.jsxs)(n.zS,{size:"sm",alignment:"center",visible:S,onClose:()=>F(!1),style:{backgroundColor:"#3399ff",borderColor:"#3399ff"},children:[(0,d.jsx)(n.E4,{children:(0,d.jsx)(n.lb,{children:"dupliacte sub-project"})}),(0,d.jsx)(n.Tc,{children:(0,d.jsx)(c,{})})]}),N&&(0,d.jsxs)("div",{style:{backgroundColor:"#fff",padding:"2rem"},children:[(0,d.jsxs)(n.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:g,onSubmit:t=>{t.preventDefault();const a=t.currentTarget;!1===a.checkValidity()&&(t.preventDefault(),t.stopPropagation()),!0===a.checkValidity()&&p((0,s.gA)({name:e.name,description:null===e||void 0===e?void 0:e.description,client:e.client,contractor:e.contractor,consultant:e.consultant,startDate:null===e||void 0===e?void 0:e.startDate,endDate:null===e||void 0===e?void 0:e.endDate,status:e.status,category:null===e||void 0===e?void 0:e.category,currencyCode:m||"RWF",vat:+(null===e||void 0===e?void 0:e.vat),groupId:D.id})),b(!0)},children:[(0,d.jsxs)(n.UF,{md:6,children:[(0,d.jsxs)(n.A6,{htmlFor:"validationCustom01",children:[" ","admin"!==a?(0,d.jsx)("span",{children:"sub-project Name "}):(0,d.jsx)("span",{children:"Template Name "})]}),(0,d.jsx)(n.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write name here",name:"name",value:null===e||void 0===e?void 0:e.name,onChange:A,required:!0}),(0,d.jsx)(n.To,{invalid:!0,children:"Please provide sub-project name"})]}),"admin"===a||"manager"===a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.UF,{md:6,children:[(0,d.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Client"}),(0,d.jsx)(n.OG,{type:"text","aria-label":"client",id:"validationCustom03",placeholder:"Write client name here",name:"client",value:null===e||void 0===e?void 0:e.client,onChange:A,required:!0}),(0,d.jsx)(n.To,{invalid:!0,children:"Please provide client name"})]}),(0,d.jsxs)(n.UF,{md:6,children:[(0,d.jsx)(n.A6,{htmlFor:"validationCustom04",children:"Contractor"}),(0,d.jsx)(n.OG,{type:"text","aria-label":"contractor",id:"validationCustom04",placeholder:"Write contractor name here",name:"contractor",value:null===e||void 0===e?void 0:e.contractor,onChange:A,required:!0}),(0,d.jsx)(n.To,{invalid:!0,children:"Please provide contractor name"})]}),(0,d.jsxs)(n.UF,{md:6,children:[(0,d.jsx)(n.A6,{htmlFor:"validationCustom05",children:"Consultant"}),(0,d.jsx)(n.OG,{type:"text","aria-label":"consultant",id:"validationCustom05",placeholder:"Write consultant name here",name:"consultant",value:null===e||void 0===e?void 0:e.consultant,onChange:A,required:!0}),(0,d.jsx)(n.To,{invalid:!0,children:"Please provide consultant name"})]}),(0,d.jsxs)(n.UF,{md:6,children:[(0,d.jsx)(n.A6,{htmlFor:"validationCustom06",children:"Start Date"}),(0,d.jsx)(n.OG,{type:"date","aria-label":"startDate",id:"validationCustom06",placeholder:"Write start date here",name:"startDate",value:null===e||void 0===e?void 0:e.startDate,onChange:A})]}),(0,d.jsxs)(n.UF,{md:6,children:[(0,d.jsx)(n.A6,{htmlFor:"validationCustom07",children:"End Date"}),(0,d.jsx)(n.OG,{type:"date","aria-label":"endDate",id:"validationCustom07",placeholder:"Write end date here",name:"endDate",value:null===e||void 0===e?void 0:e.endDate,onChange:A})]})]}),(0,d.jsxs)(n.UF,{md:6,children:[(0,d.jsx)(n.A6,{htmlFor:"validationCustom08",children:"Status"}),(0,d.jsxs)(n.MT,{"aria-label":"status",id:"validationCustom08",placeholder:"Select status",name:"status",value:null===e||void 0===e?void 0:e.status,onChange:A,required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select status"}),(0,d.jsx)("option",{value:"not started",children:"not started"}),(0,d.jsx)("option",{value:"on progress",children:"on progress"}),(0,d.jsx)("option",{value:"suspended",children:"suspended"}),(0,d.jsx)("option",{value:"canceled",children:"canceled"}),(0,d.jsx)("option",{value:"completed",children:"completed"})]}),(0,d.jsx)(n.To,{invalid:!0,children:"Please provide status"})]}),(0,d.jsxs)(n.UF,{md:6,children:[(0,d.jsx)(n.A6,{htmlFor:"validationCustom08",children:"Currency (default RWF)"}),(0,d.jsx)(r.A,{style:{color:"red"},isClearable:!0,placeholder:"Search currency",onChange:e=>{v(e.value)},options:P,styles:{option:(e,t)=>(0,l.A)((0,l.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})}})]}),"admin"===a||"manager"===a?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(n.UF,{md:12,children:[(0,d.jsx)(n.A6,{htmlFor:"validationCustom05",children:"VAT"}),(0,d.jsx)(n.OG,{type:"number","aria-label":"VAT",id:"validationCustom05",placeholder:"VAT percentage",name:"vat",value:null===e||void 0===e?void 0:e.vat,onChange:A})]})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.UF,{md:6,children:[(0,d.jsx)(n.A6,{htmlFor:"validationCustom05",children:"VAT"}),(0,d.jsx)(n.OG,{type:"number","aria-label":"VAT",id:"validationCustom05",placeholder:"VAT percentage",name:"vat",value:null===e||void 0===e?void 0:e.vat,onChange:A})]}),(0,d.jsxs)(n.UF,{md:6,children:[(0,d.jsx)(n.A6,{htmlFor:"validationCustom05",children:"Template Category"}),(0,d.jsx)(n.OG,{type:"text","aria-label":"Category",id:"validationCustom05",placeholder:"category",name:"category",value:null===e||void 0===e?void 0:e.category,onChange:A})]})]}),(0,d.jsxs)(n.UF,{xs:12,children:[(0,d.jsx)(n.A6,{htmlFor:"validationCustom02",children:"Description"}),(0,d.jsx)(n.Im,{"aria-label":"description",id:"validationCustom02",placeholder:"Write sub-project description here",name:"description",value:null===e||void 0===e?void 0:e.description,onChange:A})]}),(0,d.jsx)(n.UF,{xs:12,children:(0,d.jsx)(n.Q_,{color:x?"secondary":"primary",type:"submit",disabled:x,children:x?"Processing...":"Create sub-project"})})]}),C&&(0,d.jsx)(n.Yq,{placement:"top-end",children:(0,d.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,d.jsxs)("div",{className:"d-flex",children:[(0,d.jsx)(n.Bw,{children:C}),(0,d.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),j&&(0,d.jsx)(n.Yq,{placement:"top-end",children:(0,d.jsx)(n.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,d.jsxs)("div",{className:"d-flex",children:[(0,d.jsx)(n.Bw,{children:j}),(0,d.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})]})}},48303:(e,t,a)=>{a.d(t,{M:()=>l});const l=["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTC","BTN","BWP","BYN","BZD","CAD","CDF","CHF","CLF","CLP","CNH","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","STN","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VES","VND","VUV","WST","XAF","XAG","XAU","XCD","XDR","XOF","XPD","XPF","XPT","YER","ZAR","ZMW","ZWL"]}}]);