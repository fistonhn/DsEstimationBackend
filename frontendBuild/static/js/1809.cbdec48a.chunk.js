"use strict";(self.webpackChunk_ds_estimation_construction_web_app=self.webpackChunk_ds_estimation_construction_web_app||[]).push([[1809],{23528:(e,t,i)=>{i.d(t,{j:()=>r});var l=i(89379),o=(i(9950),i(59254)),n=i(97497),a=i(97591),d=i(44414);const r=(0,o.Ay)(e=>(0,d.jsx)(a.A,(0,l.A)({elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e)))(e=>{let{theme:t}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:180,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:(0,n.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}})},44730:(e,t,i)=>{i.d(t,{I:()=>n});var l=i(9950);i(44414);const o=l.createContext();const n=()=>{const e=l.useContext(o);return null!=e&&e}},98748:(e,t,i)=>{i.r(t),i.d(t,{default:()=>A});var l=i(89379),o=i(9950),n=i(49911),a=i(73878),d=i(23528),r=i(25333),s=i(11088),c=i(94453),u=i(7999),v=i(57988),m=i(92686),p=i(44414);const h=()=>{const{singleProject:e,status:t,error:i,message:d}=(0,a.d4)(m.Br),[r,s]=(0,o.useState)({name:null===e||void 0===e?void 0:e.name,description:null===e||void 0===e?void 0:e.description,client:null===e||void 0===e?void 0:e.client,contractor:null===e||void 0===e?void 0:e.contractor,consultant:null===e||void 0===e?void 0:e.consultant,startDate:null===e||void 0===e?void 0:e.startDate,endDate:null===e||void 0===e?void 0:e.endDate,status:null===e||void 0===e?void 0:e.status,currencyCode:null===e||void 0===e?void 0:e.currencyCode,defaultCode:null===e||void 0===e?void 0:e.currencyCode,vat:+(null===e||void 0===e?void 0:e.vat),isApproved:null===e||void 0===e?void 0:e.isApproved,category:null===e||void 0===e?void 0:e.category}),c=(0,a.wA)(),[u,v]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{e&&s({name:null===e||void 0===e?void 0:e.name,description:null===e||void 0===e?void 0:e.description,client:null===e||void 0===e?void 0:e.client,contractor:null===e||void 0===e?void 0:e.contractor,consultant:null===e||void 0===e?void 0:e.consultant,startDate:null===e||void 0===e?void 0:e.startDate,endDate:null===e||void 0===e?void 0:e.endDate,status:null===e||void 0===e?void 0:e.status,currencyCode:null===e||void 0===e?void 0:e.currencyCode,defaultCode:null===e||void 0===e?void 0:e.currencyCode,vat:100*+(null===e||void 0===e?void 0:e.vat),isApproved:null===e||void 0===e?void 0:e.isApproved,category:null===e||void 0===e?void 0:e.category})},[e]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{c((0,m.uY)())},1e4);return()=>clearTimeout(e)},[c,t,i,d]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{style:{backgroundColor:"#fff",padding:"2rem"},children:[(0,p.jsxs)(n.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:u,onSubmit:t=>{t.preventDefault();const i=t.currentTarget;!1===i.checkValidity()&&(t.preventDefault(),t.stopPropagation()),!0===i.checkValidity()&&c((0,m.vr)({id:e.id,name:r.name,description:r.description,client:r.client,contractor:r.contractor,consultant:r.consultant,startDate:r.startDate,endDate:r.endDate,status:r.status,currencyCode:null===r||void 0===r?void 0:r.currencyCode,vat:+(null===r||void 0===r?void 0:r.vat),isApproved:null===r||void 0===r?void 0:r.isApproved,category:null===e||void 0===e?void 0:e.category})),v(!0)},children:[(0,p.jsxs)(n.UF,{md:12,children:[(0,p.jsx)(n.A6,{htmlFor:"validationCustom01",children:"Name"}),(0,p.jsx)(n.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write project name here",name:"name",value:null===r||void 0===r?void 0:r.name,readOnly:!0,required:!0})]}),(0,p.jsxs)(n.UF,{md:12,children:[(0,p.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Email"}),(0,p.jsx)(n.OG,{type:"text","aria-label":"client",id:"validationCustom03",placeholder:"Write client name here",name:"client",value:null===r||void 0===r?void 0:r.client,readOnly:!0,required:!0})]}),(0,p.jsx)(n.UF,{md:12,children:(0,p.jsx)("h5",{children:"Project C"})}),(0,p.jsxs)(n.UF,{md:12,children:[(0,p.jsx)(n.A6,{htmlFor:"validationCustom08",children:"Role"}),(0,p.jsxs)(n.MT,{"aria-label":"status",id:"validationCustom08",placeholder:"Select status",name:"status",value:null===r||void 0===r?void 0:r.status,onChange:e=>{const{name:t,value:i}=e.target;s((0,l.A)((0,l.A)({},r),{},{[t]:i}))},required:!0,children:[(0,p.jsx)("option",{value:"",children:"Select status"}),(0,p.jsx)("option",{value:"not started",children:"not started"}),(0,p.jsx)("option",{value:"on progress",children:"on progress"}),(0,p.jsx)("option",{value:"suspended",children:"suspended"}),(0,p.jsx)("option",{value:"canceled",children:"canceled"}),(0,p.jsx)("option",{value:"completed",children:"completed"})]}),(0,p.jsx)(n.To,{invalid:!0,children:"Please provide status"})]}),(0,p.jsx)(n.UF,{xs:12,children:(0,p.jsx)(n.Q_,{type:"submit",style:{backgroundColor:"rgb(1, 87, 155)"},children:"Save Changes"})})]}),d&&(0,p.jsx)(n.Yq,{placement:"top-end",children:(0,p.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(n.Bw,{children:d}),(0,p.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),i&&(0,p.jsx)(n.Yq,{placement:"top-end",children:(0,p.jsx)(n.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(n.Bw,{children:i}),(0,p.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})})},x=o.memo(h);var j=i(83990),g=i(4474);const y=()=>{const{projectToAssign:e,status:t,error:i,roles:d}=(0,a.d4)(g.F7),{singleProject:r,message:s}=(0,a.d4)(m.Br),{singleUser:c}=(0,a.d4)(j.dt),[u,v]=(0,o.useState)({id:e,name:null===r||void 0===r?void 0:r.name}),h=(0,a.wA)();(0,o.useEffect)(()=>{u.id&&h((0,m.EQ)(u.id))},[h,u.id]);const[x,y]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{r&&v({name:null===r||void 0===r?void 0:r.name,description:null===r||void 0===r?void 0:r.description,client:null===r||void 0===r?void 0:r.client,contractor:null===r||void 0===r?void 0:r.contractor,consultant:null===r||void 0===r?void 0:r.consultant,startDate:null===r||void 0===r?void 0:r.startDate,endDate:null===r||void 0===r?void 0:r.endDate,status:null===r||void 0===r?void 0:r.status,currencyCode:null===r||void 0===r?void 0:r.currencyCode,defaultCode:null===r||void 0===r?void 0:r.currencyCode,vat:100*+(null===r||void 0===r?void 0:r.vat),isApproved:null===r||void 0===r?void 0:r.isApproved,category:null===r||void 0===r?void 0:r.category})},[r]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{h((0,m.uY)())},1e4);return()=>clearTimeout(e)},[h,t,i,s]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{style:{backgroundColor:"#fff",padding:"2rem"},children:[(0,p.jsxs)(n.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:x,onSubmit:e=>{e.preventDefault();const t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),!0===t.checkValidity()&&h((0,m.vr)({id:r.id,name:u.name,description:u.description,client:u.client,contractor:u.contractor,consultant:u.consultant,startDate:u.startDate,endDate:u.endDate,status:u.status,currencyCode:null===u||void 0===u?void 0:u.currencyCode,vat:+(null===u||void 0===u?void 0:u.vat),isApproved:null===u||void 0===u?void 0:u.isApproved,category:null===r||void 0===r?void 0:r.category})),y(!0)},children:[(0,p.jsxs)(n.UF,{md:12,children:[(0,p.jsx)(n.A6,{htmlFor:"validationCustom01",children:"Name"}),(0,p.jsx)(n.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write project name here",name:"name",value:null===c||void 0===c?void 0:c.name,readOnly:!0,required:!0})]}),(0,p.jsxs)(n.UF,{md:12,children:[(0,p.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Email"}),(0,p.jsx)(n.OG,{type:"text","aria-label":"client",id:"validationCustom03",placeholder:"Write client name here",name:"client",value:null===c||void 0===c?void 0:c.email,readOnly:!0,required:!0})]}),(0,p.jsx)(n.UF,{md:12,children:(0,p.jsx)("h5",{children:null===u||void 0===u?void 0:u.name})}),(0,p.jsxs)(n.UF,{md:12,children:[(0,p.jsx)(n.A6,{htmlFor:"validationCustom08",children:"Role"}),(0,p.jsxs)(n.MT,{"aria-label":"status",id:"validationCustom08",placeholder:"Select status",name:"status",value:null===u||void 0===u?void 0:u.status,onChange:e=>{const{name:t,value:i}=e.target;v((0,l.A)((0,l.A)({},u),{},{[t]:i}))},required:!0,children:[(0,p.jsx)("option",{value:"",children:"Select role"}),null===d||void 0===d?void 0:d.map(e=>(0,p.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,p.jsx)(n.To,{invalid:!0,children:"Please provide role"})]}),(0,p.jsx)(n.UF,{xs:12,children:(0,p.jsx)(n.Q_,{type:"submit",style:{backgroundColor:"rgb(1, 87, 155)"},children:"Assign"})})]}),s&&(0,p.jsx)(n.Yq,{placement:"top-end",children:(0,p.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(n.Bw,{children:s}),(0,p.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),i&&(0,p.jsx)(n.Yq,{placement:"top-end",children:(0,p.jsx)(n.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(n.Bw,{children:i}),(0,p.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})})},b=o.memo(y);var C=i(28429);const f=e=>{let{project:t}=e;const i=(0,a.wA)(),[l,h]=(0,o.useState)(null),[j,g]=(0,o.useState)(!1),y=Boolean(l),b=()=>{g(!1)};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(n.zS,{visible:j,onClose:b,size:"lg",children:[(0,p.jsx)(n.E4,{onClose:b,style:{backgroundColor:"rgb(1, 87, 155)",color:"#fff"},children:(0,p.jsx)(n.lb,{style:{color:"#fff"},children:"edit rights"})}),(0,p.jsx)(n.Tc,{children:(0,p.jsx)(x,{})})]}),(0,p.jsx)(r.A,{"aria-label":"more",id:"long-button","aria-controls":y?"long-menu":void 0,"aria-expanded":y?"true":void 0,"aria-haspopup":"true",onClick:e=>{h(e.currentTarget)},children:(0,p.jsx)(c.A,{})}),(0,p.jsxs)(d.j,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:l,open:y,onClose:()=>{h(null)},children:[(0,p.jsxs)(s.A,{onClick:()=>{i((0,m.EQ)(t.id)),h(null),g(!0)},disableRipple:!0,children:[(0,p.jsx)(u.A,{}),"Edit Rights"]}),(0,p.jsxs)(s.A,{onClick:()=>{h(null)},disableRipple:!0,children:[(0,p.jsx)(v.A,{}),"Un-assign"]})]})]})},A=()=>{const[e,t]=(0,o.useState)(!1),i=(0,C.g)(),d=(0,a.wA)(),r=null===i||void 0===i?void 0:i.id,{singleUser:s}=(0,a.d4)(j.dt),{projects:c,errorMessage:u,message:v}=(0,a.d4)(m.Br),[h,x]=(0,o.useState)({project:null});(0,o.useEffect)(()=>{d((0,m.cf)())},[d]);const y=[{value:"a",label:"project A",id:1},{value:"b",label:"project B",id:2},{value:"c",label:"project C",id:3},{value:"d",label:"project D",id:4}];return(0,o.useEffect)(()=>{r&&d((0,j.Gr)(r))},[d,r]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{d((0,m.uY)())},3e3);return()=>clearTimeout(e)},[d,v,u]),(0,o.useEffect)(()=>{h.project&&d((0,g.Jw)(h.project))},[d,h.project]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(n.zS,{visible:e,onClose:()=>t(!1),size:"lg",children:[(0,p.jsx)(n.E4,{onClose:()=>t(!1),style:{backgroundColor:"rgb(1, 87, 155)",color:"#fff"},children:(0,p.jsx)(n.lb,{style:{color:"white"},children:"Assign Project"})}),(0,p.jsx)(n.Tc,{children:(0,p.jsx)(b,{})})]}),(0,p.jsx)("h2",{children:"View & Edit User"}),(0,p.jsxs)("div",{style:{width:"100%",maxWidth:"900px"},children:[(0,p.jsxs)(n.sK,{children:[(0,p.jsxs)(n.UF,{md:6,children:[(0,p.jsx)(n.A6,{htmlFor:"validationCustom01",children:"Full Name"}),(0,p.jsx)(n.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write role name here",name:"name",value:null===s||void 0===s?void 0:s.name,readOnly:!0,required:!0})]}),(0,p.jsxs)(n.UF,{md:6,children:[(0,p.jsx)(n.A6,{htmlFor:"validationCustom01",children:"Email"}),(0,p.jsx)(n.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write role name here",name:"name",value:null===s||void 0===s?void 0:s.email,readOnly:!0,required:!0})]})]}),(0,p.jsx)(n.sK,{children:(0,p.jsxs)(n.UF,{md:6,style:{marginTop:"1rem"},children:[(0,p.jsx)(n.A6,{htmlFor:"validationCustom08",children:"Assigned Projects (0)"}),(0,p.jsxs)(n.MT,{"aria-label":"project",id:"validationCustom08",name:"project",value:null===h||void 0===h?void 0:h.project,onChange:e=>{const{name:i,value:o}=e.target;x((0,l.A)((0,l.A)({},h),{},{[i]:o})),t(!0)},children:[(0,p.jsx)("option",{children:"search and assign more project"}),null===c||void 0===c?void 0:c.map(e=>(0,p.jsx)("option",{value:e.id,children:e.name},e.id))]})]})})]}),(0,p.jsx)(n.sK,{xs:{cols:1},md:{cols:4},className:"g-4",children:(0,p.jsx)(p.Fragment,{children:(null===y||void 0===y?void 0:y.length)>0&&(null===y||void 0===y?void 0:y.map(e=>(0,p.jsx)(n.UF,{style:{cursor:"pointer",marginTop:"4rem"},children:(0,p.jsxs)(n.y5,{className:"d-flex justify-content-between align-items-center p-0",children:[(0,p.jsx)(n.d$,{color:"secondary",style:{fontSize:"16px",paddingLeft:"1rem",paddingTop:"1rem"},children:(0,p.jsxs)("b",{children:[e.label," "]})}),(0,p.jsx)(f,{project:e})]})},e.id)))})})]})}}}]);