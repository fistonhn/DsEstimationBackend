"use strict";(self.webpackChunk_ds_estimation_construction_web_app=self.webpackChunk_ds_estimation_construction_web_app||[]).push([[1333,3842],{23528:(e,l,n)=>{n.d(l,{j:()=>r});var t=n(89379),i=(n(9950),n(59254)),o=n(97497),a=n(97591),s=n(44414);const r=(0,i.Ay)(e=>(0,s.jsx)(a.A,(0,t.A)({elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e)))(e=>{let{theme:l}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:l.spacing(1),minWidth:180,color:"light"===l.palette.mode?"rgb(55, 65, 81)":l.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:l.palette.text.secondary,marginRight:l.spacing(1.5)},"&:active":{backgroundColor:(0,o.X4)(l.palette.primary.main,l.palette.action.selectedOpacity)}}}}})},27027:(e,l,n)=>{n.d(l,{S:()=>u});var t=n(89379),i=n(9950),o=n(49911),a=n(73878),s=n(92686),r=n(48303),d=n(79114),c=n(44414);const u=()=>{const{singleProject:e,status:l,error:n,message:u,updateLoading:h}=(0,a.d4)(s.Br),{role:v}=(0,d.Q)(),[x,m]=(0,i.useState)({name:null===e||void 0===e?void 0:e.name,description:null===e||void 0===e?void 0:e.description,client:null===e||void 0===e?void 0:e.client,contractor:null===e||void 0===e?void 0:e.contractor,consultant:null===e||void 0===e?void 0:e.consultant,startDate:null===e||void 0===e?void 0:e.startDate,endDate:null===e||void 0===e?void 0:e.endDate,status:null===e||void 0===e?void 0:e.status,currencyCode:null===e||void 0===e?void 0:e.currencyCode,defaultCode:null===e||void 0===e?void 0:e.currencyCode,vat:+(null===e||void 0===e?void 0:e.vat),isApproved:null===e||void 0===e?void 0:e.isApproved,category:null===e||void 0===e?void 0:e.category}),p=(0,a.wA)(),[j,g]=(0,i.useState)(!1),C=e=>{const{name:l,value:n}=e.target;m((0,t.A)((0,t.A)({},x),{},{[l]:n}))};return(0,i.useEffect)(()=>{e&&m({name:null===e||void 0===e?void 0:e.name,description:null===e||void 0===e?void 0:e.description,client:null===e||void 0===e?void 0:e.client,contractor:null===e||void 0===e?void 0:e.contractor,consultant:null===e||void 0===e?void 0:e.consultant,startDate:null===e||void 0===e?void 0:e.startDate,endDate:null===e||void 0===e?void 0:e.endDate,status:null===e||void 0===e?void 0:e.status,currencyCode:null===e||void 0===e?void 0:e.currencyCode,defaultCode:null===e||void 0===e?void 0:e.currencyCode,vat:100*+(null===e||void 0===e?void 0:e.vat),isApproved:null===e||void 0===e?void 0:e.isApproved,category:null===e||void 0===e?void 0:e.category})},[e]),(0,i.useEffect)(()=>{const e=setTimeout(()=>{p((0,s.uY)())},1e4);return()=>clearTimeout(e)},[p,l,n,u]),(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{style:{backgroundColor:"#fff",padding:"2rem"},children:[(0,c.jsxs)(o.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:j,onSubmit:l=>{l.preventDefault();const n=l.currentTarget;!1===n.checkValidity()&&(l.preventDefault(),l.stopPropagation()),!0===n.checkValidity()&&p((0,s.vr)({id:e.id,name:x.name,description:x.description,client:x.client,contractor:x.contractor,consultant:x.consultant,startDate:x.startDate,endDate:x.endDate,status:x.status,currencyCode:null===x||void 0===x?void 0:x.currencyCode,vat:+(null===x||void 0===x?void 0:x.vat),isApproved:null===x||void 0===x?void 0:x.isApproved,category:null===e||void 0===e?void 0:e.category})),g(!0)},children:["admin"===v||"manager"===v&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom01",children:"Project Name"}),(0,c.jsx)(o.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write project name here",name:"name",value:null===x||void 0===x?void 0:x.name,onChange:C,required:!0}),(0,c.jsx)(o.To,{invalid:!0,children:"Please provide project name"})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom03",children:"Client"}),(0,c.jsx)(o.OG,{type:"text","aria-label":"client",id:"validationCustom03",placeholder:"Write client name here",name:"client",value:null===x||void 0===x?void 0:x.client,onChange:C,required:!0}),(0,c.jsx)(o.To,{invalid:!0,children:"Please provide client name"})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom04",children:"Contractor"}),(0,c.jsx)(o.OG,{type:"text","aria-label":"contractor",id:"validationCustom04",placeholder:"Write contractor name here",name:"contractor",value:null===x||void 0===x?void 0:x.contractor,onChange:C,required:!0}),(0,c.jsx)(o.To,{invalid:!0,children:"Please provide contractor name"})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom05",children:"Consultant"}),(0,c.jsx)(o.OG,{type:"text","aria-label":"consultant",id:"validationCustom05",placeholder:"Write consultant name here",name:"consultant",value:null===x||void 0===x?void 0:x.consultant,onChange:C,required:!0}),(0,c.jsx)(o.To,{invalid:!0,children:"Please provide consultant name"})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom06",children:"Start Date"}),(0,c.jsx)(o.OG,{type:"date","aria-label":"startDate",id:"validationCustom06",placeholder:"Write start date here",name:"startDate",value:null===x||void 0===x?void 0:x.startDate,onChange:C})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom07",children:"End Date"}),(0,c.jsx)(o.OG,{type:"date","aria-label":"endDate",id:"validationCustom07",placeholder:"Write end date here",name:"endDate",value:null===x||void 0===x?void 0:x.endDate,onChange:C})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom08",children:"Status"}),(0,c.jsxs)(o.MT,{"aria-label":"status",id:"validationCustom08",placeholder:"Select status",name:"status",value:null===x||void 0===x?void 0:x.status,onChange:C,required:!0,children:[(0,c.jsx)("option",{value:"",children:"Select status"}),(0,c.jsx)("option",{value:"not started",children:"not started"}),(0,c.jsx)("option",{value:"on progress",children:"on progress"}),(0,c.jsx)("option",{value:"suspended",children:"suspended"}),(0,c.jsx)("option",{value:"canceled",children:"canceled"}),(0,c.jsx)("option",{value:"completed",children:"completed"})]}),(0,c.jsx)(o.To,{invalid:!0,children:"Please provide status"})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsx)(o.A6,{htmlFor:"formSwitchCheckChecked",children:"Is Approved"}),(0,c.jsx)(o.Qb,{label:null!==x&&void 0!==x&&x.isApproved?"Approved":"Not Approved",id:"formSwitchCheckChecked",value:null===x||void 0===x?void 0:x.isApproved,defaultChecked:null===x||void 0===x?void 0:x.isApproved,onChange:e=>{m((0,t.A)((0,t.A)({},x),{},{isApproved:e.target.checked}))}})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom05",children:"Current currency"}),(0,c.jsx)(o.OG,{type:"text","aria-label":"currencyValue",id:"validationCustom05",placeholder:"Currency value compared to 1 RWF",name:"currencyCode",value:null===x||void 0===x?void 0:x.defaultCode,readOnly:!0})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsxs)(o.A6,{htmlFor:"validationCustom08",children:["Currency converted (",null===x||void 0===x?void 0:x.currencyCode,")"]}),(0,c.jsxs)(o.MT,{"aria-label":"status",id:"validationCustom08",placeholder:"Select Currency",name:"currencyCode",value:null===x||void 0===x?void 0:x.currencyCode,onChange:C,children:[(0,c.jsx)("option",{value:null===x||void 0===x?void 0:x.currencyCode,children:null===x||void 0===x?void 0:x.currencyCode}),null===r.M||void 0===r.M?void 0:r.M.map(e=>(0,c.jsx)("option",{value:e,children:e},e))]})]}),(0,c.jsxs)(o.UF,{md:12,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom05",children:"VAT"}),(0,c.jsx)(o.OG,{type:"number","aria-label":"VAT",id:"validationCustom05",placeholder:"VAT percentage",name:"vat",value:null===x||void 0===x?void 0:x.vat,onChange:C})]}),(0,c.jsxs)(o.UF,{xs:12,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom02",children:"Description"}),(0,c.jsx)(o.Im,{"aria-label":"description",id:"validationCustom02",placeholder:"Write project description here",name:"description",value:null===x||void 0===x?void 0:x.description,onChange:C})]})]}),"owner"===v&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom01",children:"Template Name"}),(0,c.jsx)(o.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write project name here",name:"name",value:null===x||void 0===x?void 0:x.name,onChange:C,required:!0}),(0,c.jsx)(o.To,{invalid:!0,children:"Please provide project name"})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom03",children:"Category"}),(0,c.jsx)(o.OG,{type:"text","aria-label":"category",id:"validationCustom03",placeholder:"Category",name:"category",value:null===x||void 0===x?void 0:x.category,onChange:C,required:!0}),(0,c.jsx)(o.To,{invalid:!0,children:"Please provide category name"})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom08",children:"Status"}),(0,c.jsxs)(o.MT,{"aria-label":"status",id:"validationCustom08",placeholder:"Select status",name:"status",value:null===x||void 0===x?void 0:x.status,onChange:C,required:!0,children:[(0,c.jsx)("option",{value:"",children:"Select status"}),(0,c.jsx)("option",{value:"not started",children:"not started"}),(0,c.jsx)("option",{value:"on progress",children:"on progress"}),(0,c.jsx)("option",{value:"suspended",children:"suspended"}),(0,c.jsx)("option",{value:"canceled",children:"canceled"}),(0,c.jsx)("option",{value:"completed",children:"completed"})]}),(0,c.jsx)(o.To,{invalid:!0,children:"Please provide status"})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsx)(o.A6,{htmlFor:"formSwitchCheckChecked",children:"Is Approved"}),(0,c.jsx)(o.Qb,{label:null!==x&&void 0!==x&&x.isApproved?"Approved":"Not Approved",id:"formSwitchCheckChecked",value:null===x||void 0===x?void 0:x.isApproved,defaultChecked:null===x||void 0===x?void 0:x.isApproved,onChange:e=>{m((0,t.A)((0,t.A)({},x),{},{isApproved:e.target.checked}))}})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsxs)(o.A6,{htmlFor:"validationCustom08",children:["Currency (",null===x||void 0===x?void 0:x.currencyCode,")"]}),(0,c.jsxs)(o.MT,{"aria-label":"status",id:"validationCustom08",placeholder:"Select Currency",name:"currencyCode",value:null===x||void 0===x?void 0:x.currencyCode,onChange:C,children:[(0,c.jsx)("option",{value:null===x||void 0===x?void 0:x.currencyCode,children:null===x||void 0===x?void 0:x.currencyCode}),null===r.M||void 0===r.M?void 0:r.M.map(e=>(0,c.jsx)("option",{value:e,children:e},e))]})]}),(0,c.jsxs)(o.UF,{md:6,children:[(0,c.jsxs)(o.A6,{htmlFor:"validationCustom05",children:["enter ",null===x||void 0===x?void 0:x.currencyCode," value compared 1 RWF"]}),(0,c.jsx)(o.OG,{type:"number","aria-label":"currencyValue",id:"validationCustom05",placeholder:"Currency value compared to 1 RWF",name:"currencyValue",value:null===x||void 0===x?void 0:x.currencyValue,onChange:C})]}),(0,c.jsxs)(o.UF,{md:12,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom05",children:"VAT"}),(0,c.jsx)(o.OG,{type:"number","aria-label":"VAT",id:"validationCustom05",placeholder:"VAT percentage",name:"vat",value:null===x||void 0===x?void 0:x.vat,onChange:C})]}),(0,c.jsxs)(o.UF,{xs:12,children:[(0,c.jsx)(o.A6,{htmlFor:"validationCustom02",children:"Description"}),(0,c.jsx)(o.Im,{"aria-label":"description",id:"validationCustom02",placeholder:"Write project description here",name:"description",value:null===x||void 0===x?void 0:x.description,onChange:C})]})]}),(0,c.jsx)(o.UF,{xs:12,children:(0,c.jsx)(o.Q_,{color:h?"secondary":"primary",type:"submit",disabled:h,children:h?"updating...":"Save Changes"})})]}),u&&(0,c.jsx)(o.Yq,{placement:"top-end",children:(0,c.jsx)(o.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,c.jsxs)("div",{className:"d-flex",children:[(0,c.jsx)(o.Bw,{children:u}),(0,c.jsx)(o.vo,{className:"me-2 m-auto"})]})})}),n&&(0,c.jsx)(o.Yq,{placement:"top-end",children:(0,c.jsx)(o.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,c.jsxs)("div",{className:"d-flex",children:[(0,c.jsx)(o.Bw,{children:n}),(0,c.jsx)(o.vo,{className:"me-2 m-auto"})]})})})]})})}},33842:(e,l,n)=>{n.r(l),n.d(l,{default:()=>v});var t=n(89379),i=n(9950),o=n(49911),a=n(73878),s=n(92686),r=n(26080),d=n(44414);function c(){const e=(0,a.wA)(),{projects:l,status:n,error:c,message:u}=(0,a.d4)(s.Br),[h,v]=(0,i.useState)(""),[x,m]=(0,i.useState)(""),p=null===l||void 0===l?void 0:l.map(e=>({value:e.id,label:e.name}));return(0,i.useEffect)(()=>{const l=setTimeout(()=>{e((0,s.uY)())},3e3);return()=>clearTimeout(l)},[e,u,c]),(0,i.useEffect)(()=>{const e=setTimeout(()=>{m("")},3e3);return()=>clearTimeout(e)},[x]),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(r.A,{isClearable:!0,onChange:e=>{v(e.value)},options:p,placeholder:"Select sub-project",styles:{option:(e,l)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:l.isSelected?"white":"black"})}}),x&&(0,d.jsx)(o.kj,{color:"danger",className:"mt-2",children:x}),(0,d.jsx)(o.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)"},onClick:l=>{l.preventDefault(),h?e((0,s.Gt)(h)):m("sub-project is required")},className:"mt-3",children:"loading"===n?"duplicating...":"Duplicate sub-project"})]}),c&&(0,d.jsx)(o.Yq,{placement:"top-end",children:(0,d.jsx)(o.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,d.jsxs)("div",{className:"d-flex",children:[(0,d.jsx)(o.Bw,{children:c}),(0,d.jsx)(o.vo,{className:"me-2 m-auto"})]})})}),u&&(0,d.jsx)(o.Yq,{placement:"top-end",children:(0,d.jsx)(o.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,d.jsxs)("div",{className:"d-flex",children:[(0,d.jsx)(o.Bw,{children:u}),(0,d.jsx)(o.vo,{className:"me-2 m-auto"})]})})})]})}var u=n(79114),h=n(48303);function v(){const[e,l]=(0,i.useState)({name:"",description:"",client:"",contractor:"",consultant:"",startDate:void 0,endDate:void 0,status:"",vat:"",category:""}),{role:n}=(0,u.Q)(),[v,x]=(0,i.useState)(""),m=(0,a.wA)(),{loading:p,createProjectError:j,createSuccessMessage:g,singleProjectGrouping:C}=(0,a.d4)(s.Br),[y,b]=(0,i.useState)(!1),A=n=>{const{name:i,value:o}=n.target;l((0,t.A)((0,t.A)({},e),{},{[i]:o}))};(0,i.useEffect)(()=>{const e=setTimeout(()=>{m((0,s.uY)())},3e3);return()=>clearTimeout(e)},[m,j,g]);const[f,S]=(0,i.useState)(!1),[F,D]=(0,i.useState)(!1),N=null===h.M||void 0===h.M?void 0:h.M.map(e=>({value:e,label:e}));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h5",{children:"Select how you did like to Create sub-project"}),(0,d.jsx)("div",{className:"mb-3 mt-3",children:(0,d.jsxs)("select",{style:{outline:"none",height:"40px",width:"300px"},onChange:e=>{const{value:l}=e.target;if("duplicate"===l)return S(!0);"template"===l&&(window.location.href="#/templates"),"scratch"===l&&D(!0),"chose"===l&&D(!1)},children:[(0,d.jsx)("option",{value:"chose",children:"Choose option"}),(0,d.jsx)("option",{value:"duplicate",children:"Use previous sub-project"}),(0,d.jsx)("option",{value:"template",children:"Use default template"}),(0,d.jsx)("option",{value:"scratch",children:"create from scratch (starting)"})]})}),(0,d.jsxs)(o.zS,{size:"sm",alignment:"center",visible:f,onClose:()=>S(!1),style:{backgroundColor:"#3399ff",borderColor:"#3399ff"},children:[(0,d.jsx)(o.E4,{children:(0,d.jsx)(o.lb,{children:"dupliacte sub-project"})}),(0,d.jsx)(o.Tc,{children:(0,d.jsx)(c,{})})]}),F&&(0,d.jsxs)("div",{style:{backgroundColor:"#fff",padding:"2rem"},children:[(0,d.jsxs)(o.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:y,onSubmit:l=>{l.preventDefault();const n=l.currentTarget;!1===n.checkValidity()&&(l.preventDefault(),l.stopPropagation()),!0===n.checkValidity()&&m((0,s.gA)({name:e.name,description:null===e||void 0===e?void 0:e.description,client:e.client,contractor:e.contractor,consultant:e.consultant,startDate:null===e||void 0===e?void 0:e.startDate,endDate:null===e||void 0===e?void 0:e.endDate,status:e.status,category:null===e||void 0===e?void 0:e.category,currencyCode:v||"RWF",vat:+(null===e||void 0===e?void 0:e.vat),groupId:C.id})),b(!0)},children:[(0,d.jsxs)(o.UF,{md:6,children:[(0,d.jsxs)(o.A6,{htmlFor:"validationCustom01",children:[" ","admin"!==n?(0,d.jsx)("span",{children:"sub-project Name "}):(0,d.jsx)("span",{children:"Template Name "})]}),(0,d.jsx)(o.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write name here",name:"name",value:null===e||void 0===e?void 0:e.name,onChange:A,required:!0}),(0,d.jsx)(o.To,{invalid:!0,children:"Please provide sub-project name"})]}),"admin"===n||"manager"===n&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(o.UF,{md:6,children:[(0,d.jsx)(o.A6,{htmlFor:"validationCustom03",children:"Client"}),(0,d.jsx)(o.OG,{type:"text","aria-label":"client",id:"validationCustom03",placeholder:"Write client name here",name:"client",value:null===e||void 0===e?void 0:e.client,onChange:A,required:!0}),(0,d.jsx)(o.To,{invalid:!0,children:"Please provide client name"})]}),(0,d.jsxs)(o.UF,{md:6,children:[(0,d.jsx)(o.A6,{htmlFor:"validationCustom04",children:"Contractor"}),(0,d.jsx)(o.OG,{type:"text","aria-label":"contractor",id:"validationCustom04",placeholder:"Write contractor name here",name:"contractor",value:null===e||void 0===e?void 0:e.contractor,onChange:A,required:!0}),(0,d.jsx)(o.To,{invalid:!0,children:"Please provide contractor name"})]}),(0,d.jsxs)(o.UF,{md:6,children:[(0,d.jsx)(o.A6,{htmlFor:"validationCustom05",children:"Consultant"}),(0,d.jsx)(o.OG,{type:"text","aria-label":"consultant",id:"validationCustom05",placeholder:"Write consultant name here",name:"consultant",value:null===e||void 0===e?void 0:e.consultant,onChange:A,required:!0}),(0,d.jsx)(o.To,{invalid:!0,children:"Please provide consultant name"})]}),(0,d.jsxs)(o.UF,{md:6,children:[(0,d.jsx)(o.A6,{htmlFor:"validationCustom06",children:"Start Date"}),(0,d.jsx)(o.OG,{type:"date","aria-label":"startDate",id:"validationCustom06",placeholder:"Write start date here",name:"startDate",value:null===e||void 0===e?void 0:e.startDate,onChange:A})]}),(0,d.jsxs)(o.UF,{md:6,children:[(0,d.jsx)(o.A6,{htmlFor:"validationCustom07",children:"End Date"}),(0,d.jsx)(o.OG,{type:"date","aria-label":"endDate",id:"validationCustom07",placeholder:"Write end date here",name:"endDate",value:null===e||void 0===e?void 0:e.endDate,onChange:A})]})]}),(0,d.jsxs)(o.UF,{md:6,children:[(0,d.jsx)(o.A6,{htmlFor:"validationCustom08",children:"Status"}),(0,d.jsxs)(o.MT,{"aria-label":"status",id:"validationCustom08",placeholder:"Select status",name:"status",value:null===e||void 0===e?void 0:e.status,onChange:A,required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select status"}),(0,d.jsx)("option",{value:"not started",children:"not started"}),(0,d.jsx)("option",{value:"on progress",children:"on progress"}),(0,d.jsx)("option",{value:"suspended",children:"suspended"}),(0,d.jsx)("option",{value:"canceled",children:"canceled"}),(0,d.jsx)("option",{value:"completed",children:"completed"})]}),(0,d.jsx)(o.To,{invalid:!0,children:"Please provide status"})]}),(0,d.jsxs)(o.UF,{md:6,children:[(0,d.jsx)(o.A6,{htmlFor:"validationCustom08",children:"Currency (default RWF)"}),(0,d.jsx)(r.A,{style:{color:"red"},isClearable:!0,placeholder:"Search currency",onChange:e=>{x(e.value)},options:N,styles:{option:(e,l)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:l.isSelected?"white":"black"})}})]}),"admin"===n||"manager"===n?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(o.UF,{md:12,children:[(0,d.jsx)(o.A6,{htmlFor:"validationCustom05",children:"VAT"}),(0,d.jsx)(o.OG,{type:"number","aria-label":"VAT",id:"validationCustom05",placeholder:"VAT percentage",name:"vat",value:null===e||void 0===e?void 0:e.vat,onChange:A})]})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(o.UF,{md:6,children:[(0,d.jsx)(o.A6,{htmlFor:"validationCustom05",children:"VAT"}),(0,d.jsx)(o.OG,{type:"number","aria-label":"VAT",id:"validationCustom05",placeholder:"VAT percentage",name:"vat",value:null===e||void 0===e?void 0:e.vat,onChange:A})]}),(0,d.jsxs)(o.UF,{md:6,children:[(0,d.jsx)(o.A6,{htmlFor:"validationCustom05",children:"Template Category"}),(0,d.jsx)(o.OG,{type:"text","aria-label":"Category",id:"validationCustom05",placeholder:"category",name:"category",value:null===e||void 0===e?void 0:e.category,onChange:A})]})]}),(0,d.jsxs)(o.UF,{xs:12,children:[(0,d.jsx)(o.A6,{htmlFor:"validationCustom02",children:"Description"}),(0,d.jsx)(o.Im,{"aria-label":"description",id:"validationCustom02",placeholder:"Write sub-project description here",name:"description",value:null===e||void 0===e?void 0:e.description,onChange:A})]}),(0,d.jsx)(o.UF,{xs:12,children:(0,d.jsx)(o.Q_,{color:p?"secondary":"primary",type:"submit",disabled:p,children:p?"Processing...":"Create sub-project"})})]}),g&&(0,d.jsx)(o.Yq,{placement:"top-end",children:(0,d.jsx)(o.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,d.jsxs)("div",{className:"d-flex",children:[(0,d.jsx)(o.Bw,{children:g}),(0,d.jsx)(o.vo,{className:"me-2 m-auto"})]})})}),j&&(0,d.jsx)(o.Yq,{placement:"top-end",children:(0,d.jsx)(o.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,d.jsxs)("div",{className:"d-flex",children:[(0,d.jsx)(o.Bw,{children:j}),(0,d.jsx)(o.vo,{className:"me-2 m-auto"})]})})})]})]})}},48303:(e,l,n)=>{n.d(l,{M:()=>t});const t=["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTC","BTN","BWP","BYN","BZD","CAD","CDF","CHF","CLF","CLP","CNH","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","STN","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VES","VND","VUV","WST","XAF","XAG","XAU","XCD","XDR","XOF","XPD","XPF","XPT","YER","ZAR","ZMW","ZWL"]},71333:(e,l,n)=>{n.r(l),n.d(l,{default:()=>T});var t=n(89379),i=n(9950),o=n(71293),a=n(81949),s=n(25333),r=n(23528),d=n(7999),c=n(11088),u=n(94453),h=n(16260),v=n(57988),x=n(67580),m=n(46639),p=n(44739),j=n(36080),g=n(27027),C=n(26080),y=n(49911),b=n(73878),A=n(92686),f=n(79114),S=n(44414);function F(){const[e,l]=(0,i.useState)({name:""}),{role:n}=(0,f.Q)(),o=(0,b.wA)(),{loading:a,createProjectError:s,createSuccessMessage:r}=(0,b.d4)(A.Br),[d,c]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{const e=setTimeout(()=>{o((0,A.uY)())},3e3);return()=>clearTimeout(e)},[o,s,r]),(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{style:{backgroundColor:"#fff",padding:"2rem"},children:[(0,S.jsxs)(y.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:d,onSubmit:l=>{l.preventDefault();const n=l.currentTarget;!1===n.checkValidity()&&(l.preventDefault(),l.stopPropagation()),!0===n.checkValidity()&&(o((0,A.n8)({name:e.name})),console.log(e)),c(!0)},children:[(0,S.jsxs)(y.UF,{children:[(0,S.jsxs)(y.A6,{htmlFor:"validationCustom01",children:[" ","admin"!==n?(0,S.jsx)("span",{children:"Project Name "}):(0,S.jsx)("span",{children:"Template Name "})]}),(0,S.jsx)(y.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write name here",name:"name",value:null===e||void 0===e?void 0:e.name,onChange:n=>{const{name:i,value:o}=n.target;l((0,t.A)((0,t.A)({},e),{},{[i]:o}))},required:!0}),(0,S.jsx)(y.To,{invalid:!0,children:"Please provide project name"})]}),(0,S.jsx)(y.UF,{xs:12,children:(0,S.jsx)(y.Q_,{color:a?"secondary":"primary",type:"submit",disabled:a,children:a?"Processing...":"Create Project"})})]}),r&&(0,S.jsx)(y.Yq,{placement:"top-end",children:(0,S.jsx)(y.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsx)(y.Bw,{children:r}),(0,S.jsx)(y.vo,{className:"me-2 m-auto"})]})})}),s&&(0,S.jsx)(y.Yq,{placement:"top-end",children:(0,S.jsx)(y.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsx)(y.Bw,{children:s}),(0,S.jsx)(y.vo,{className:"me-2 m-auto"})]})})})]})})}var D=n(33842);const N=e=>{let{project:l}=e;const n=(0,b.wA)(),[t,o]=(0,i.useState)(null),[a,x]=(0,i.useState)(!1),m=Boolean(t),C=()=>{x(!1)};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(y.zS,{visible:a,onClose:C,size:"lg",children:[(0,S.jsx)(y.E4,{onClose:C,children:(0,S.jsx)(y.lb,{children:"Update project"})}),(0,S.jsx)(y.Tc,{children:(0,S.jsx)(g.S,{})})]}),(0,S.jsx)(s.A,{"aria-label":"more",id:"long-button","aria-controls":m?"long-menu":void 0,"aria-expanded":m?"true":void 0,"aria-haspopup":"true",onClick:e=>{o(e.currentTarget)},children:(0,S.jsx)(u.A,{})}),(0,S.jsxs)(r.j,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:t,open:m,onClose:()=>{o(null)},children:[(0,S.jsxs)(c.A,{onClick:()=>{n((0,A.EQ)(l.id)),o(null),x(!0)},disableRipple:!0,children:[(0,S.jsx)(d.A,{}),"Edit"]}),(0,S.jsxs)(c.A,{onClick:()=>{n((0,A.xx)(l.id)),o(null)},disableRipple:!0,children:[(0,S.jsx)(v.A,{}),"Delete"]}),(0,S.jsxs)(c.A,{onClick:()=>{n((0,A.Gt)(l.id)),o(null)},disableRipple:!0,children:[(0,S.jsx)(h.A,{}),"Duplicate"]}),(0,S.jsxs)(c.A,{disableRipple:!0,children:[(0,S.jsx)(p.A,{}),(0,S.jsx)(j.A,{href:"/#/project/detail/".concat(l.id),underline:"none",color:"rgb(55, 65, 81)",children:"View"})]})]})]})},T=()=>{const e=(0,b.wA)(),{projects:l,projectsGrouping:n,singleProjectGrouping:s,loading:r,errorMessage:d,message:c,deleteBegin:u,deleteError:h}=(0,b.d4)(A.Br),{role:v}=(0,f.Q)(),[p,j]=(0,i.useState)(""),[g,T]=(0,i.useState)(!1),[w,P]=(0,i.useState)(!1),U=null===n||void 0===n?void 0:n.map(e=>({value:e.id,label:e.name})),G=null===s||void 0===s?void 0:s.projects,[M,k]=(0,i.useState)(G),B=()=>{e((0,A.Le)({id:s.id})).then(e=>{var l,n;k([...null===e||void 0===e||null===(l=e.payload)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.projects])}),P(!1)};(0,i.useEffect)(()=>e(""===p?(0,A.cf)():(0,A.Jt)(p)),[e,p]);(0,i.useEffect)(()=>{const l=setTimeout(()=>{e((0,A.uY)())},3e3);return()=>clearTimeout(l)},[e,c,d,h]),(0,i.useEffect)(()=>{e((0,A.a2)())},[e]);const R=null===l||void 0===l?void 0:l.filter(e=>null===e.groupId);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px"},className:"mb-3",children:[(0,S.jsxs)(y.zS,{visible:g,onClose:()=>T(!1),children:[(0,S.jsx)(y.E4,{onClose:()=>T(!1),children:(0,S.jsx)(y.lb,{children:"Create new project"})}),(0,S.jsx)(y.Tc,{children:(0,S.jsx)(F,{})})]}),(0,S.jsxs)(y.zS,{size:"lg",visible:w,onClose:B,children:[(0,S.jsx)(y.E4,{onClose:B,children:(0,S.jsxs)(y.lb,{children:["Add new sub-project to ",(0,S.jsx)("span",{style:{color:"rgb(51, 153, 255",fontWeight:700},children:"".concat(null===s||void 0===s?void 0:s.name)})]})}),(0,S.jsx)(y.Tc,{children:(0,S.jsx)(D.default,{})})]}),(0,S.jsxs)(y.Q_,{className:"btn-primary",size:"sm",onClick:()=>T(!0),style:{backgroundColor:"#3399ff",borderColor:"#3399ff",fontWeight:550},children:[(0,S.jsx)(a.Ay,{icon:o.x,size:"sm"})," Create project"]}),0!==n.length&&(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(y.Q_,{className:"btn-primary",size:"sm",onClick:()=>P(!0),style:{backgroundColor:"#3399ff",borderColor:"#3399ff",fontWeight:550},children:[(0,S.jsx)(a.Ay,{icon:o.x,size:"md"})," Add sub-project"]})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("span",{style:{fontSize:"14px",marginRight:"10px"},children:"Filter by status"}),(0,S.jsxs)("select",{style:{outline:"none"},onChange:e=>{j(e.target.value)},children:[(0,S.jsx)("option",{value:"",children:"All"}),(0,S.jsx)("option",{value:"not started",children:"not started"}),(0,S.jsx)("option",{value:"on progress",children:"on progress"}),(0,S.jsx)("option",{value:"suspended",children:"suspended"}),(0,S.jsx)("option",{value:"canceled",children:"canceled"}),(0,S.jsx)("option",{value:"completed",children:"completed"})]})]})]}),(0,S.jsx)("div",{style:{marginBottom:"20px",width:"40%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,S.jsx)(C.A,{isClearable:!0,onChange:l=>{const n={id:l.value,labourName:l.label};e((0,A.Le)({id:n.id})).then(e=>{var l,n;k([...null===e||void 0===e||null===(l=e.payload)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.projects])})},options:U,placeholder:s?null===s||void 0===s?void 0:s.name:"Select a Project",styles:{option:(e,l)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:l.isSelected?"white":"black"})}})}),M&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(y.lb,{style:{margin:"10px"},children:["All sub-projects of ",(0,S.jsx)("span",{style:{color:"rgb(51, 153, 255",fontWeight:700},children:"".concat(s.name)})]}),(0,S.jsxs)(y.sK,{xs:{cols:1},md:{cols:4},className:"g-4",children:["admin"===v||"manager"===v&&(0,S.jsx)(S.Fragment,{children:(null===M||void 0===M?void 0:M.length)>0&&(null===M||void 0===M?void 0:M.map(e=>(0,S.jsx)(y.UF,{style:{cursor:"pointer"},children:(0,S.jsxs)(y.y5,{className:"d-flex justify-content-between align-items-start p-0",children:[(0,S.jsxs)(y.HQ,{href:"/#/project/detail/".concat(e.id),style:{color:"#4f5d73"},children:[(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"Name: "})," ",e.name," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"Client: "})," ",e.client," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"contractor: "})," ",e.contractor," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"consultant: "})," ",e.consultant," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"Status: "})," ",e.status," "]})]}),(0,S.jsx)(N,{project:e})]})},e.id)))}),"owner"===v&&(0,S.jsx)(S.Fragment,{children:(null===M||void 0===M?void 0:M.length)>0&&(null===M||void 0===M?void 0:M.map(e=>(0,S.jsx)(y.UF,{style:{cursor:"pointer"},children:(0,S.jsxs)(y.y5,{className:"d-flex justify-content-between align-items-start p-0",children:[(0,S.jsxs)(y.HQ,{href:"/#/project/detail/".concat(e.id),style:{color:"#4f5d73"},children:[(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"Name: "})," ",e.name," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"currency code: "})," ",null===e||void 0===e?void 0:e.currencyCode," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"currency value: "})," ",null===e||void 0===e?void 0:e.currencyValue," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"VAT: "})," ",100*(null===e||void 0===e?void 0:e.vat)," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"Status: "})," ",e.status," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"Category: "})," ",null===e||void 0===e?void 0:e.category," "]})]}),(0,S.jsx)(N,{project:e})]})},e.id)))})]})]}),0!==R.length&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(y.lb,{style:{margin:"10px"},children:"All sub-projects with no projects"}),(0,S.jsxs)(y.sK,{xs:{cols:1},md:{cols:4},className:"g-4",children:["admin"===v||"manager"===v&&(0,S.jsx)(S.Fragment,{children:(null===R||void 0===R?void 0:R.length)>0&&(null===R||void 0===R?void 0:R.map(e=>(0,S.jsx)(y.UF,{style:{cursor:"pointer"},children:(0,S.jsxs)(y.y5,{className:"d-flex justify-content-between align-items-start p-0",children:[(0,S.jsxs)(y.HQ,{href:"/#/project/detail/".concat(e.id),style:{color:"#4f5d73"},children:[(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"Name: "})," ",e.name," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"Client: "})," ",e.client," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"contractor: "})," ",e.contractor," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"consultant: "})," ",e.consultant," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"Status: "})," ",e.status," "]})]}),(0,S.jsx)(N,{project:e})]})},e.id)))}),"owner"===v&&(0,S.jsx)(S.Fragment,{children:(null===M||void 0===M?void 0:M.length)>0&&(null===M||void 0===M?void 0:M.map(e=>(0,S.jsx)(y.UF,{style:{cursor:"pointer"},children:(0,S.jsxs)(y.y5,{className:"d-flex justify-content-between align-items-start p-0",children:[(0,S.jsxs)(y.HQ,{href:"/#/project/detail/".concat(e.id),style:{color:"#4f5d73"},children:[(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"Name: "})," ",e.name," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"currency code: "})," ",null===e||void 0===e?void 0:e.currencyCode," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"currency value: "})," ",null===e||void 0===e?void 0:e.currencyValue," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"VAT: "})," ",100*(null===e||void 0===e?void 0:e.vat)," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"Status: "})," ",e.status," "]}),(0,S.jsxs)(y.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,S.jsx)("b",{children:"Category: "})," ",null===e||void 0===e?void 0:e.category," "]})]}),(0,S.jsx)(N,{project:e})]})},e.id)))})]})]}),r&&(0,S.jsx)(y.JT,{color:"primary"}),0===(null===M||void 0===M?void 0:M.length)&&(0,S.jsx)("p",{style:{paddingTop:"3rem"},children:"You don't have sub-project yet. "}),d&&(0,S.jsx)(y.Yq,{placement:"top-end",children:(0,S.jsx)(y.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsx)(y.Bw,{children:d}),(0,S.jsx)(y.vo,{className:"me-2 m-auto"})]})})}),c&&(0,S.jsx)(y.Yq,{placement:"top-end",children:(0,S.jsx)(y.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsx)(y.Bw,{children:c}),(0,S.jsx)(y.vo,{className:"me-2 m-auto"})]})})}),(0,S.jsx)("div",{children:(0,S.jsx)(x.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:u,children:(0,S.jsx)(m.A,{color:"inherit"})})}),u&&(0,S.jsx)(y.Yq,{placement:"top-end",children:(0,S.jsx)(y.JY,{autohide:!1,visible:!0,color:"warning",icon:"cil-ban",className:"text-white align-items-center",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsxs)(y.Bw,{children:[" ",(0,S.jsx)(y.JT,{color:"danger"})," ",(0,S.jsx)("span",{children:"Deleting..."})," "]}),(0,S.jsx)(y.vo,{className:"me-2 m-auto"})]})})}),h&&(0,S.jsx)(y.Yq,{placement:"top-end",children:(0,S.jsx)(y.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-ban",className:"text-white align-items-center",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsx)(y.Bw,{children:h}),(0,S.jsx)(y.vo,{className:"me-2 m-auto"})]})})})]})}}}]);