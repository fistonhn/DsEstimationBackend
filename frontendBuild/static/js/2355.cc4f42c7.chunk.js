"use strict";(self.webpackChunk_ds_estimation_construction_web_app=self.webpackChunk_ds_estimation_construction_web_app||[]).push([[2355],{23528:(e,n,l)=>{l.d(n,{j:()=>s});var i=l(89379),a=(l(9950),l(59254)),r=l(97497),t=l(97591),o=l(44414);const s=(0,a.Ay)(e=>(0,o.jsx)(t.A,(0,i.A)({elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e)))(e=>{let{theme:n}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:n.spacing(1),minWidth:180,color:"light"===n.palette.mode?"rgb(55, 65, 81)":n.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:n.palette.text.secondary,marginRight:n.spacing(1.5)},"&:active":{backgroundColor:(0,r.X4)(n.palette.primary.main,n.palette.action.selectedOpacity)}}}}})},72355:(e,n,l)=>{l.r(n),l.d(n,{default:()=>q});var i=l(89379),a=l(80045),r=l(9950),t=l(50242),o=l(14857),s=l(88060),d=l(72236),c=l(84142),u=l(82053),m=l(4036),h=l(49911),x=l(73878),v=l(77910),p=l(44414);const j=()=>{const[e,n]=(0,r.useState)({name:"",amount:"",interval:"monthly",currency:"USD"}),l=(0,x.wA)(),{loading:a,error:t,message:o}=(0,x.d4)(v._Q),[s,d]=(0,r.useState)(!1),c=l=>{const{name:a,value:r}=l.target;n((0,i.A)((0,i.A)({},e),{},{[a]:r}))};return(0,r.useEffect)(()=>{const e=setTimeout(()=>{l((0,v.W6)())},5e3);return()=>clearTimeout(e)},[l,t,o]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{style:{backgroundColor:"#fff",padding:"2rem"},children:[(0,p.jsxs)(h.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:s,onSubmit:n=>{n.preventDefault();const i=n.currentTarget;!1===i.checkValidity()&&(n.preventDefault(),n.stopPropagation()),!0===i.checkValidity()&&l((0,v.kS)({name:e.name,amount:null===e||void 0===e?void 0:e.amount,interval:e.interval,currency:e.currency})),d(!0)},children:[(0,p.jsxs)(h.UF,{md:6,children:[(0,p.jsx)(h.A6,{htmlFor:"validationCustom01",children:"plan name"}),(0,p.jsx)(h.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write name here",name:"name",value:null===e||void 0===e?void 0:e.name,onChange:c,required:!0}),(0,p.jsx)(h.To,{invalid:!0,children:"Please provide plan name"})]}),(0,p.jsxs)(h.UF,{md:6,children:[(0,p.jsx)(h.A6,{htmlFor:"validationCustom03",children:"Plan amount"}),(0,p.jsx)(h.OG,{type:"number","aria-label":"amount",id:"validationCustom03",placeholder:"Write amount here",name:"amount",value:null===e||void 0===e?void 0:e.amount,onChange:c,required:!0}),(0,p.jsx)(h.To,{invalid:!0,children:"Please provide paln amount"})]}),(0,p.jsxs)(h.UF,{md:6,children:[(0,p.jsx)(h.A6,{htmlFor:"validationCustom08",children:"Currency"}),(0,p.jsxs)(h.MT,{"aria-label":"currency",id:"validationCustom08",placeholder:"Select currency",name:"currency",value:null===e||void 0===e?void 0:e.currency,onChange:c,required:!0,children:[(0,p.jsx)("option",{value:"USD",children:"USD"}),(0,p.jsx)("option",{value:"RWF",children:"RWF"})]}),(0,p.jsx)(h.To,{invalid:!0,children:"Please provide currency"})]}),(0,p.jsxs)(h.UF,{md:6,children:[(0,p.jsx)(h.A6,{htmlFor:"validationCustom08",children:"Interval"}),(0,p.jsxs)(h.MT,{"aria-label":"interval",id:"validationCustom08",placeholder:"Select interval",name:"interval",value:null===e||void 0===e?void 0:e.interval,onChange:c,required:!0,children:[(0,p.jsx)("option",{value:"monthly",children:"monthly"}),(0,p.jsx)("option",{value:"quarterly",children:"quarterly"}),(0,p.jsx)("option",{value:"yearly",children:"yearly"}),(0,p.jsx)("option",{value:"every 6 months",children:"every 6 months"}),(0,p.jsx)("option",{value:"weekly",children:"weekly"}),(0,p.jsx)("option",{value:"daily",children:"daily"}),(0,p.jsx)("option",{value:"hourly",children:"hourly"})]}),(0,p.jsx)(h.To,{invalid:!0,children:"Please provide interval"})]}),(0,p.jsx)(h.UF,{xs:12,children:(0,p.jsx)(h.Q_,{color:a?"secondary":"primary",type:"submit",disabled:a,children:a?"Processing...":"Create Plan"})})]}),o&&(0,p.jsx)(h.Yq,{placement:"top-end",children:(0,p.jsx)(h.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(h.Bw,{children:o}),(0,p.jsx)(h.vo,{className:"me-2 m-auto"})]})})}),t&&(0,p.jsx)(h.Yq,{placement:"top-end",children:(0,p.jsx)(h.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(h.Bw,{children:t}),(0,p.jsx)(h.vo,{className:"me-2 m-auto"})]})})})]})})};var y=l(25333),g=l(23528),b=l(7999),C=l(11088),f=l(94453),A=l(57988);const F=()=>{const{singlePlan:e,error:n,message:l,loading:a}=(0,x.d4)(v._Q),[t,o]=(0,r.useState)({name:null===e||void 0===e?void 0:e.name,interval:null===e||void 0===e?void 0:e.interval,amount:null===e||void 0===e?void 0:e.amount,currency:null===e||void 0===e?void 0:e.currency,status:null===e||void 0===e?void 0:e.status}),s=(0,x.wA)(),[d,c]=(0,r.useState)(!1),u=e=>{const{name:n,value:l}=e.target;o((0,i.A)((0,i.A)({},t),{},{[n]:l}))};return(0,r.useEffect)(()=>{e&&o({name:null===e||void 0===e?void 0:e.name,interval:null===e||void 0===e?void 0:e.interval,amount:null===e||void 0===e?void 0:e.singlePlan,currency:null===e||void 0===e?void 0:e.currency,status:null===e||void 0===e?void 0:e.status})},[e]),(0,r.useEffect)(()=>{const e=setTimeout(()=>{s((0,v.W6)())},5e3);return()=>clearTimeout(e)},[s,n,l]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{style:{backgroundColor:"#fff",padding:"2rem"},children:[(0,p.jsxs)(h.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:d,onSubmit:n=>{n.preventDefault();const l=n.currentTarget;!1===l.checkValidity()&&(n.preventDefault(),n.stopPropagation()),!0===l.checkValidity()&&s((0,v.VU)({id:e.id,name:t.name,status:t.status})),c(!0)},children:[(0,p.jsxs)(h.UF,{md:6,children:[(0,p.jsx)(h.A6,{htmlFor:"validationCustom01",children:"plan name"}),(0,p.jsx)(h.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write name here",name:"name",value:null===t||void 0===t?void 0:t.name,onChange:u,required:!0}),(0,p.jsx)(h.To,{invalid:!0,children:"Please provide plan name"})]}),(0,p.jsxs)(h.UF,{md:6,children:[(0,p.jsx)(h.A6,{htmlFor:"validationCustom03",children:"Plan amount"}),(0,p.jsx)(h.OG,{type:"number","aria-label":"amount",id:"validationCustom03",placeholder:"Write amount here",name:"amount",value:null===t||void 0===t?void 0:t.amount,onChange:u,required:!0,readOnly:!0}),(0,p.jsx)(h.To,{invalid:!0,children:"Please provide plan amount"})]}),(0,p.jsxs)(h.UF,{md:6,children:[(0,p.jsx)(h.A6,{htmlFor:"validationCustom03",children:"Currency"}),(0,p.jsx)(h.OG,{type:"text","aria-label":"text",id:"validationCustom03",placeholder:"Write amount here",name:"amount",value:null===t||void 0===t?void 0:t.currency,onChange:u,required:!0,readOnly:!0}),(0,p.jsx)(h.To,{invalid:!0,children:"Please provide plan currency"})]}),(0,p.jsxs)(h.UF,{md:6,children:[(0,p.jsx)(h.A6,{htmlFor:"validationCustom03",children:"Interval"}),(0,p.jsx)(h.OG,{type:"text","aria-label":"interval",id:"validationCustom03",placeholder:"Write interval here",name:"interval",value:null===t||void 0===t?void 0:t.interval,onChange:u,required:!0,readOnly:!0}),(0,p.jsx)(h.To,{invalid:!0,children:"Please provide plan interval"})]}),(0,p.jsxs)(h.UF,{md:12,children:[(0,p.jsx)(h.A6,{htmlFor:"validationCustom08",children:"Status"}),(0,p.jsxs)(h.MT,{"aria-label":"status",id:"validationCustom08",placeholder:"Select status",name:"status",value:null===t||void 0===t?void 0:t.status,onChange:u,children:[(0,p.jsx)("option",{value:"active",children:"active"}),(0,p.jsx)("option",{value:"cancelled",children:"cancelled"})]}),(0,p.jsx)(h.To,{invalid:!0,children:"Please provide status"})]}),(0,p.jsx)(h.UF,{xs:12,children:(0,p.jsx)(h.Q_,{color:a?"secondary":"primary",type:"submit",disabled:a,children:a?"Processing...":"Update Plan"})})]}),l&&(0,p.jsx)(h.Yq,{placement:"top-end",children:(0,p.jsx)(h.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(h.Bw,{children:l}),(0,p.jsx)(h.vo,{className:"me-2 m-auto"})]})})}),n&&(0,p.jsx)(h.Yq,{placement:"top-end",children:(0,p.jsx)(h.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(h.Bw,{children:n}),(0,p.jsx)(h.vo,{className:"me-2 m-auto"})]})})})]})})};var w=l(75150);const S=e=>{let{plan:n}=e;const l=(0,x.wA)(),[i,a]=(0,r.useState)(null),[t,o]=(0,r.useState)(!1),s=Boolean(i),d=()=>{o(!1)};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(h.zS,{visible:t,onClose:d,size:"lg",children:[(0,p.jsx)(h.E4,{onClose:d,children:(0,p.jsx)(h.lb,{children:"Update plan"})}),(0,p.jsx)(h.Tc,{children:(0,p.jsx)(F,{})})]}),(0,p.jsx)(y.A,{"aria-label":"more",id:"long-button","aria-controls":s?"long-menu":void 0,"aria-expanded":s?"true":void 0,"aria-haspopup":"true",onClick:e=>{a(e.currentTarget)},children:(0,p.jsx)(f.A,{})}),(0,p.jsxs)(g.j,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:i,open:s,onClose:()=>{a(null)},children:[(0,p.jsxs)(C.A,{onClick:()=>{l((0,v.EX)(n.id)),a(null),o(!0)},disableRipple:!0,children:[(0,p.jsx)(b.A,{}),"Edit plan"]}),(0,p.jsxs)(C.A,{onClick:()=>{l((0,v.c5)(n.id)),a(null)},disableRipple:!0,children:[(0,p.jsx)(A.A,{}),"cancel plan"]})]})]})},T=()=>{const e=(0,x.wA)(),{paymentPlans:n,error:l,message:i,loading:a}=(0,x.d4)(v._Q),{role:t}=(0,w.Q)();return(0,r.useEffect)(()=>{e((0,v.rO)())},[e]),(0,r.useEffect)(()=>{const n=setTimeout(()=>{e((0,v.W6)())},3e3);return()=>clearTimeout(n)},[e,i,l]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(h.sK,{xs:{cols:1},md:{cols:4},className:"g-4",children:"owner"===t&&(0,p.jsx)(p.Fragment,{children:(null===n||void 0===n?void 0:n.length)>0&&(null===n||void 0===n?void 0:n.map(e=>(0,p.jsx)(h.UF,{style:{cursor:"pointer"},children:(0,p.jsxs)(h.y5,{className:"d-flex justify-content-between align-items-start p-0",children:[(0,p.jsxs)("div",{style:{padding:"2rem"},children:[(0,p.jsxs)(h.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,p.jsx)("b",{children:"Name: "})," ",e.name," "]}),(0,p.jsxs)(h.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,p.jsx)("b",{children:"amount: "})," ",null===e||void 0===e?void 0:e.amount," "]}),(0,p.jsxs)(h.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,p.jsx)("b",{children:"interval: "})," ",null===e||void 0===e?void 0:e.interval," "]}),(0,p.jsxs)(h.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,p.jsx)("b",{children:"currency: "})," ",null===e||void 0===e?void 0:e.currency," "]}),(0,p.jsxs)(h.d$,{color:"secondary",style:{fontSize:"12px"},children:[" ",(0,p.jsx)("b",{children:"status: "})," ",null===e||void 0===e?void 0:e.status," "]})]}),(0,p.jsx)(S,{plan:e})]})},e.id)))})}),a&&(0,p.jsx)(h.JT,{color:"primary"}),0===(null===n||void 0===n?void 0:n.length)&&(0,p.jsx)("p",{style:{paddingTop:"3rem"},children:"There is no payment plan yet"}),l&&(0,p.jsx)(h.Yq,{placement:"top-end",children:(0,p.jsx)(h.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(h.Bw,{children:l}),(0,p.jsx)(h.vo,{className:"me-2 m-auto"})]})})}),i&&(0,p.jsx)(h.Yq,{placement:"top-end",children:(0,p.jsx)(h.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(h.Bw,{children:i}),(0,p.jsx)(h.vo,{className:"me-2 m-auto"})]})})})]})},N=["children","value","index"];function P(e){const{children:n,value:l,index:r}=e,t=(0,a.A)(e,N);return(0,p.jsx)(u.A,(0,i.A)((0,i.A)({component:"div",role:"tabpanel",hidden:l!==r,id:"action-tabpanel-".concat(r),"aria-labelledby":"action-tab-".concat(r)},t),{},{children:l===r&&(0,p.jsx)(m.A,{sx:{p:6},children:n})}))}const k=e=>({id:"action-tab-".concat(e),"aria-controls":"action-tabpanel-".concat(e)}),q=()=>{const e=(0,o.A)(),[n,l]=r.useState(0);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.A,{position:"static",color:"default",children:(0,p.jsxs)(d.A,{value:n,onChange:(e,n)=>{l(n)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"action tabs example",children:[(0,p.jsx)(c.A,(0,i.A)({style:{fontWeight:"bold"},label:"Plan list"},k(0))),(0,p.jsx)(c.A,(0,i.A)({style:{fontWeight:"bold"},label:"Create plan"},k(1)))]})}),(0,p.jsxs)(t.Ay,{axis:"rtl"===e.direction?"x-reverse":"x",index:n,onChangeIndex:e=>{l(e)},children:[(0,p.jsx)(P,{value:n,index:0,dir:e.direction,children:(0,p.jsx)(T,{})}),(0,p.jsx)(P,{value:n,index:1,dir:e.direction,children:(0,p.jsx)(j,{})})]})]})}}}]);