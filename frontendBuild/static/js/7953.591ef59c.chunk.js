"use strict";(self.webpackChunk_ds_estimation_construction_web_app=self.webpackChunk_ds_estimation_construction_web_app||[]).push([[7953],{71293:(e,s,i)=>{i.d(s,{x:()=>l});const l=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='440 240 272 240 272 72 240 72 240 240 72 240 72 272 240 272 240 440 272 440 272 272 440 272 440 240' class='ci-primary'/>"]},77953:(e,s,i)=>{i.r(s),i.d(s,{default:()=>p});var l=i(9950),n=i(81949),d=i(49911),r=i(71293),o=i(73878),c=i(4474),a=i(89379),t=i(79114),h=i(44414);const x=e=>{var s,i,n,r;let{id:x}=e;const{message:m,error:j,selectedRole:u,status:p}=(0,o.d4)(c.F7),[g,v]=(0,l.useState)({id:null===u||void 0===u?void 0:u.id,name:null===u||void 0===u?void 0:u.name,permissions:null===u||void 0===u?void 0:u.permissions}),[C,f]=(0,l.useState)(!1),b=(0,o.wA)(),{role:k,userId:y}=(0,t.Q)();(0,l.useEffect)(()=>{b((0,c.jR)(x))},[b,x]),(0,l.useEffect)(()=>{u&&v(u)},[u]),(0,l.useEffect)(()=>{const e=setTimeout(()=>{b((0,c.rg)())},3e3);return()=>clearTimeout(e)},[b,m,j]);const w=e=>{const{name:s,checked:i}=e.target;v(i?(0,a.A)((0,a.A)({},g),{},{permissions:[...g.permissions,s]}):(0,a.A)((0,a.A)({},g),{},{permissions:g.permissions.filter(e=>e!==s)}))},A=()=>{b((0,c.EO)(g.id))};return(0,h.jsxs)(h.Fragment,{children:[g&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(d.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:C,onSubmit:e=>{e.preventDefault();const s=e.currentTarget;!1===s.checkValidity()&&(e.preventDefault(),e.stopPropagation()),!0===s.checkValidity()&&(b((0,c.S0)(g)),f(!0))},children:[(0,h.jsxs)(d.UF,{md:12,children:[(0,h.jsx)(d.A6,{htmlFor:"validationCustom01",children:"Role title"}),(0,h.jsx)(d.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write role name here",name:"name",value:null===g||void 0===g?void 0:g.name,readOnly:"owner"!==k&&(null===u||void 0===u?void 0:u.userId)!==y,required:!0,onChange:e=>{const{name:s,value:i}=e.target;v((0,a.A)((0,a.A)({},g),{},{[s]:i}))}}),(0,h.jsx)(d.To,{invalid:!0,children:"Please provide role name"})]}),(0,h.jsx)("h4",{style:{fontSize:"12px",marginTop:"1rem",fontWeight:"bold"},children:"Grant access to"}),(0,h.jsxs)(d._v,{children:[(0,h.jsx)(d.wV,{children:(0,h.jsxs)(d.YI,{children:[(0,h.jsx)(d.$s,{scope:"col",children:"Right"}),(0,h.jsx)(d.$s,{scope:"col",children:"Read only"}),(0,h.jsx)(d.$s,{scope:"col",children:"Add"}),(0,h.jsx)(d.$s,{scope:"col",children:"Edit"}),(0,h.jsx)(d.$s,{scope:"col",children:"Delete"})]})}),(0,h.jsx)(d.jS,{children:(0,h.jsxs)(d.YI,{children:[(0,h.jsx)(d.cC,{children:"Projects"}),(0,h.jsx)(d.cC,{children:(0,h.jsx)(d.CK,{disabled:"owner"!==k&&(null===u||void 0===u?void 0:u.userId)!==y,id:"flexCheckRead",name:"read",onClick:w,checked:!(null===(s=g.permissions)||void 0===s||!s.includes("read"))})}),(0,h.jsx)(d.cC,{children:(0,h.jsx)(d.CK,{disabled:"owner"!==k&&(null===u||void 0===u?void 0:u.userId)!==y,id:"flexCheckAdd",name:"add",onClick:w,checked:!(null===(i=g.permissions)||void 0===i||!i.includes("add"))})}),(0,h.jsx)(d.cC,{children:(0,h.jsx)(d.CK,{disabled:"owner"!==k&&(null===u||void 0===u?void 0:u.userId)!==y,id:"flexCheckEdit",name:"edit",onClick:w,checked:!(null===(n=g.permissions)||void 0===n||!n.includes("edit"))})}),(0,h.jsx)(d.cC,{children:(0,h.jsx)(d.CK,{disabled:"owner"!==k&&(null===u||void 0===u?void 0:u.userId)!==y,id:"flexCheckDelete",name:"delete",onClick:w,checked:!(null===(r=g.permissions)||void 0===r||!r.includes("delete"))})})]})})]}),"owner"===k&&(0,h.jsxs)(d.sK,{children:[(0,h.jsx)(d.UF,{xs:6,children:(0,h.jsx)(d.Q_,{color:"loading"===p?"secondary":"primary",type:"submit",disabled:"loading"===p,style:{backgroundColor:"rgb(1, 87, 155)"},children:"loading"===p?"updating...":"Save Changes"})}),(0,h.jsx)(d.UF,{xs:6,children:(0,h.jsx)(d.Q_,{color:"loading"===p?"secondary":"danger",disabled:"loading"===p,onClick:A,children:"loading"===p?"updating...":"Delete"})})]}),(null===u||void 0===u?void 0:u.userId)===y&&(0,h.jsxs)(d.sK,{children:[(0,h.jsx)(d.UF,{xs:6,children:(0,h.jsx)(d.Q_,{color:"loading"===p?"secondary":"primary",type:"submit",disabled:"loading"===p,style:{backgroundColor:"rgb(1, 87, 155)"},children:"loading"===p?"updating...":"Save Changes"})}),(0,h.jsx)(d.UF,{xs:6,children:(0,h.jsx)(d.Q_,{color:"loading"===p?"secondary":"danger",disabled:"loading"===p,onClick:A,children:"loading"===p?"updating...":"Delete"})})]})]})}),m&&(0,h.jsx)(d.Yq,{placement:"top-end",children:(0,h.jsx)(d.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(d.Bw,{children:m}),(0,h.jsx)(d.vo,{className:"me-2 m-auto"})]})})}),j&&(0,h.jsx)(d.Yq,{placement:"top-end",children:(0,h.jsx)(d.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(d.Bw,{children:j}),(0,h.jsx)(d.vo,{className:"me-2 m-auto"})]})})})]})},m=l.memo(x),j=e=>{let{id:s}=e;const{message:i,error:n,status:r}=(0,o.d4)(c.F7),[t,x]=(0,l.useState)({name:"",permissions:[]}),[m,j]=(0,l.useState)(!1),u=(0,o.wA)();(0,l.useEffect)(()=>{const e=setTimeout(()=>{u((0,c.rg)())},3e3);return()=>clearTimeout(e)},[u,i,n]);const p=e=>{const{name:s,checked:i}=e.target;x(i?(0,a.A)((0,a.A)({},t),{},{permissions:[...t.permissions,s]}):(0,a.A)((0,a.A)({},t),{},{permissions:t.permissions.filter(e=>e!==s)}))};return(0,h.jsxs)(h.Fragment,{children:[t&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(d.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:m,onSubmit:e=>{e.preventDefault();const s=e.currentTarget;!1===s.checkValidity()&&(e.preventDefault(),e.stopPropagation()),!0===s.checkValidity()&&u((0,c.rd)(t)),j(!0)},children:[(0,h.jsxs)(d.UF,{md:12,children:[(0,h.jsx)(d.A6,{htmlFor:"validationCustom01",children:"Role title"}),(0,h.jsx)(d.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write role name here",name:"name",value:null===t||void 0===t?void 0:t.name,onChange:e=>{const{name:s,value:i}=e.target;x((0,a.A)((0,a.A)({},t),{},{[s]:i}))},required:!0}),(0,h.jsx)(d.To,{invalid:!0,children:"Please provide role name"})]}),(0,h.jsx)("h4",{style:{fontSize:"12px",marginTop:"1rem",fontWeight:"bold"},children:"Grant access to"}),(0,h.jsxs)(d._v,{children:[(0,h.jsx)(d.wV,{children:(0,h.jsxs)(d.YI,{children:[(0,h.jsx)(d.$s,{scope:"col",children:"Right"}),(0,h.jsx)(d.$s,{scope:"col",children:"Read only"}),(0,h.jsx)(d.$s,{scope:"col",children:"Add"}),(0,h.jsx)(d.$s,{scope:"col",children:"Edit"}),(0,h.jsx)(d.$s,{scope:"col",children:"Delete"})]})}),(0,h.jsx)(d.jS,{children:(0,h.jsxs)(d.YI,{children:[(0,h.jsx)(d.cC,{children:"Projects"}),(0,h.jsx)(d.cC,{children:(0,h.jsx)(d.CK,{id:"flexCheckRead",name:"read",onClick:p})}),(0,h.jsx)(d.cC,{children:(0,h.jsx)(d.CK,{id:"flexCheckAdd",name:"add",onClick:p})}),(0,h.jsx)(d.cC,{children:(0,h.jsx)(d.CK,{id:"flexCheckEdit",name:"edit",onClick:p})}),(0,h.jsx)(d.cC,{children:(0,h.jsx)(d.CK,{id:"flexCheckDelete",name:"delete",onClick:p})})]})})]}),(0,h.jsx)(d.UF,{xs:12,children:(0,h.jsx)(d.Q_,{color:"loading"===r?"secondary":"primary",type:"submit",disabled:"loading"===r,style:{backgroundColor:"rgb(1, 87, 155)"},children:"loading"===r?"adding ...":"add role"})})]})}),i&&(0,h.jsx)(d.Yq,{placement:"top-end",children:(0,h.jsx)(d.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(d.Bw,{children:i}),(0,h.jsx)(d.vo,{className:"me-2 m-auto"})]})})}),n&&(0,h.jsx)(d.Yq,{placement:"top-end",children:(0,h.jsx)(d.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(d.Bw,{children:n}),(0,h.jsx)(d.vo,{className:"me-2 m-auto"})]})})})]})},u=l.memo(j),p=()=>{const e=(0,o.wA)(),{roles:s,message:i,error:a}=(0,o.d4)(c.F7),[x,j]=(0,l.useState)(!1),[p,g]=(0,l.useState)(!1),[v,C]=(0,l.useState)(null),{role:f}=(0,t.Q)();(0,l.useEffect)(()=>{e((0,c.V7)())},[e]),(0,l.useEffect)(()=>{const s=setTimeout(()=>{e((0,c.rg)())},3e3);return()=>clearTimeout(s)},[e,i,a]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(d.zS,{visible:x,onClose:()=>j(!1),size:"lg",children:[(0,h.jsx)(d.E4,{onClose:()=>j(!1),style:{backgroundColor:"rgb(1, 87, 155)",color:"#fff"},children:(0,h.jsxs)(d.lb,{style:{color:"white"},children:[" ","owner"===f?"View & Edit Role":"View Role"," "]})}),(0,h.jsx)(d.Tc,{children:(0,h.jsx)(m,{id:v})})]}),(0,h.jsxs)(d.zS,{visible:p,onClose:()=>g(!1),size:"lg",children:[(0,h.jsx)(d.E4,{onClose:()=>g(!1),style:{backgroundColor:"rgb(1, 87, 155)",color:"#fff"},children:(0,h.jsx)(d.lb,{style:{color:"white"},children:"Add new role"})}),(0,h.jsx)(d.Tc,{children:(0,h.jsx)(u,{})})]}),(0,h.jsx)("div",{className:"recent-projects p-4",children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,h.jsxs)(d.Q_,{onClick:()=>g(!0),className:"btn-primary mb-3",size:"lg",style:{backgroundColor:"#3399ff",borderColor:"#3399ff"},children:[(0,h.jsx)(n.Ay,{icon:r.x,size:"lg"})," Add Role"]})}),(0,h.jsx)(d.XR,{children:null===s||void 0===s?void 0:s.map(e=>(0,h.jsx)(d.y5,{component:"a",style:{cursor:"pointer",marginBottom:"1rem",width:"100%",maxWidth:"500px"},onClick:()=>{return s=e.id,C(s),void j(!0);var s},children:e.name},e.id))})]})})]})}}}]);