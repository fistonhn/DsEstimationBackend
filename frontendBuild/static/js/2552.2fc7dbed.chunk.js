"use strict";(self.webpackChunk_ds_estimation_construction_web_app=self.webpackChunk_ds_estimation_construction_web_app||[]).push([[2552],{17981:(e,t,i)=>{i.d(t,{A:()=>u});var a=i(89379),l=i(9950),o=i(26080),n=i(49911),r=i(73878),s=i(51342),d=i(92686),c=i(16484),m=i(44414);function u(e){let{isGeneralTab:t}=e;const[i,u]=(0,l.useState)(""),[h,v]=(0,l.useState)(""),{projects:x,singleProject:p,error:b,message:j,loading:g}=(0,r.d4)(d.Br),[y,C]=(0,l.useState)(null===p||void 0===p?void 0:p.id),[f,S]=(0,l.useState)({}),[A,F]=(0,l.useState)({}),[w,N]=(0,l.useState)({}),[U,k]=(0,l.useState)({}),P=(0,r.wA)(),{duplicateSuccess:E,duplicatError:T,defaultActivities:I,isLoading:q}=(0,r.d4)(s.$z),{allProjectCategory:O,singleProjectCategory:B,destinationProjectCategory:G,error:W}=(0,r.d4)(c.k5),Q=null===I||void 0===I?void 0:I.map(e=>({value:e.id,label:e.name})),_=null===U||void 0===U?void 0:U.id,L=null===p||void 0===p?void 0:p.id,Y=null===x||void 0===x?void 0:x.map(e=>({value:e.id,label:e.name}));(0,l.useEffect)(()=>{const e=setTimeout(()=>{v("")},4e3);return()=>clearTimeout(e)});const z=null===f||void 0===f?void 0:f.id,V=null===A||void 0===A?void 0:A.id;(0,l.useEffect)(()=>{P((0,d.EQ)(y))},[P,y]),(0,l.useEffect)(()=>{const e=setTimeout(()=>{P((0,s.kd)())},3e3);return()=>clearTimeout(e)},[P,T,E]),(0,l.useEffect)(()=>{const e=setTimeout(()=>{P((0,d.uY)())},3e3);return()=>clearTimeout(e)},[P,h,j]),(0,l.useEffect)(()=>{P((0,d.bS)(z))},[P,z]),(0,l.useEffect)(()=>{z&&P((0,c.NT)(z))},[P,z]),(0,l.useEffect)(()=>{L&&P((0,c.MU)(L))},[P,L]),(0,l.useEffect)(()=>{z&&V&&P((0,c.MX)({projectId:z,id:V}))},[P,z,V]),(0,l.useEffect)(()=>{const e=setTimeout(()=>{P((0,c.Qk)())},3e3);return()=>clearTimeout(e)},[P,W]);const D=null===O||void 0===O?void 0:O.filter((e,t,i)=>t===i.findIndex(t=>t.projectId===e.projectId&&t.name===e.name)),M=null===D||void 0===D?void 0:D.map(e=>({value:e.id,label:e.name})),R=null===G||void 0===G?void 0:G.filter((e,t,i)=>t===i.findIndex(t=>t.projectId===e.projectId&&t.name===e.name)),J=null===R||void 0===R?void 0:R.map(e=>({value:e.id,label:e.name})),H=null===B||void 0===B?void 0:B.map(e=>({value:e.id,label:e.name}));return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{style:{backgroundColor:"#fff",padding:"2rem"},children:[(null===x||void 0===x?void 0:x.length)>0&&(0,m.jsxs)(n.qI,{className:"row g-3 needs-validation",noValidate:!0,onSubmit:e=>{if(e.preventDefault(),!w)return v("Please select an activity");P((0,d.uL)({id:w,fromProjectId:null===f||void 0===f?void 0:f.id,toProjectId:L,destinationCategoryId:_}))},children:[(0,m.jsxs)(n.UF,{md:12,children:[(0,m.jsxs)("div",{style:{marginBottom:"20px",fontSize:"0.75rem",fontWeight:"bold"},children:[(0,m.jsxs)("div",{style:{marginBottom:"20px",fontSize:"0.75rem",fontWeight:"bold"},children:[(0,m.jsx)(n.A6,{htmlFor:"validationCustom05",style:{color:"black",fontSize:"0.9rem"},children:"Select source Project"}),(0,m.jsx)(o.A,{isClearable:!0,onChange:(e,t)=>{const i={id:e.value,labelName:e.label};S(i)},options:Y,placeholder:f?null===f||void 0===f?void 0:f.labelName:"Select a source Project",styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})}})]}),(0,m.jsxs)("div",{style:{marginBottom:"20px",fontSize:"0.75rem",fontWeight:"bold"},children:[(0,m.jsx)(n.A6,{htmlFor:"validationCustom05",style:{color:"black",fontSize:"0.9rem"},children:"Select source category"}),(0,m.jsx)(o.A,{isClearable:!0,onChange:(e,t)=>{const i={id:e.value,labelName:e.label};F(i)},options:M,placeholder:A?null===A||void 0===A?void 0:A.labelName:"Select a source category",styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})}})]}),(0,m.jsxs)("div",{style:{fontSize:"0.75rem",fontWeight:"bold"},children:[(0,m.jsx)(n.A6,{htmlFor:"validationCustom05",style:{color:"black",fontSize:"0.9rem"},children:"Select source activity"}),(0,m.jsx)(o.A,{isClearable:!0,placeholder:"Search activities",onChange:e=>{N(e.value)},options:H,styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black",textTransform:"lowercase"})}}),(0,m.jsx)(n.To,{invalid:!0,children:"Please provide Activity"})]}),(0,m.jsx)(n.A6,{htmlFor:"validationCustom05",style:{color:"black",fontSize:"0.9rem"},children:"Destination Project"}),(0,m.jsx)(o.A,{isClearable:!0,onChange:(e,t)=>{const i={id:e.value,labourName:e.label};C(i.id)},options:Y,placeholder:p?null===p||void 0===p?void 0:p.name:"Select a Project",styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})}})]}),(0,m.jsxs)("div",{style:{fontSize:"0.75rem",fontWeight:"bold"},children:[(0,m.jsx)(n.A6,{htmlFor:"validationCustom05",style:{color:"black",fontSize:"0.9rem"},children:"Select destination category"}),(0,m.jsx)(o.A,{isClearable:!0,placeholder:"Search category",onChange:(e,t)=>{const i={id:e.value,labelName:e.label};k(i)},options:J,styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black",textTransform:"lowercase"})}}),(0,m.jsx)(n.To,{invalid:!0,children:"Please provide Activity"})]})]}),(0,m.jsx)(n.UF,{xs:12,children:(0,m.jsx)(n.Q_,{style:{backgroundColor:"#01579b",color:"#fff",fontWeight:500,fontSize:"12px"},color:g?"secondary":"primary",type:"submit",children:g?"Processing...":"Duplicate Activity"})})]}),t&&(0,m.jsxs)(n.qI,{className:"row g-3 needs-validation",noValidate:!0,onSubmit:e=>{if(e.preventDefault(),!i)return v("Please select an activity");P((0,s.ai)(i)).then(e=>{P((0,s.jI)())})},children:[(0,m.jsxs)(n.UF,{md:12,children:[(0,m.jsx)(n.A6,{htmlFor:"validationCustom05",style:{color:"black"},children:"Select Activity"}),(0,m.jsx)(o.A,{isClearable:!0,placeholder:"Search activities",onChange:e=>{u(e.value)},options:Q,styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black",textTransform:"lowercase"})}}),(0,m.jsx)(n.To,{invalid:!0,children:"Please provide Activity"})]}),(0,m.jsx)(n.UF,{xs:12,children:(0,m.jsx)(n.Q_,{style:{backgroundColor:"#01579b",color:"#fff",fontWeight:500,fontSize:"12px"},color:q?"secondary":"primary",type:"submit",children:q?"Processing...":"Duplicate Activity"})})]}),j&&(0,m.jsx)(n.Yq,{children:(0,m.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,m.jsxs)("div",{className:"d-flex",children:[(0,m.jsx)(n.Bw,{children:j}),(0,m.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),b&&(0,m.jsx)(n.Yq,{children:(0,m.jsx)(n.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,m.jsxs)("div",{className:"d-flex",children:[(0,m.jsx)(n.Bw,{children:b}),(0,m.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),h&&(0,m.jsx)(n.Yq,{children:(0,m.jsx)(n.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,m.jsxs)("div",{className:"d-flex",children:[(0,m.jsx)(n.Bw,{children:h}),(0,m.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})})}},30091:(e,t,i)=>{i.d(t,{A:()=>s,v:()=>r});i(9950);var a=i(73878),l=i(83990),o=i(42891),n=i(44414);const r=()=>{const{token:e}=(0,a.d4)(l.dt),{payload:{name:t}}=(0,o.A)(e),i=(new Date).getHours(),r=(new Date).getTime(),s=new Date(r).toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});return(0,n.jsxs)("div",{className:"jumbotron",style:{height:"100%",padding:"1.3rem",backgroundColor:"#fff",fontWeight:"bold"},children:[(0,n.jsx)("p",{className:"p-2",children:(0,n.jsx)("b",{children:s})}),i<12&&(0,n.jsxs)("h5",{className:"display-4",children:["Good morning, ",t,"!"]}),i>=12&&i<18&&(0,n.jsxs)("h5",{className:"display-4",children:["Good afternoon, ",t,"!"]}),i>=18&&(0,n.jsxs)("h5",{className:"display-4",children:["Good evening, ",t,"!"]})]})},s=()=>{const{token:e}=(0,a.d4)(l.dt),{payload:{name:t,role:i}}=(0,o.A)(e);return(0,n.jsx)("div",{className:"jumbotron",children:"owner"===i?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("h1",{className:"display-4",children:["Hello, ",t,"!"]}),(0,n.jsx)("p",{className:"lead",children:"There is no Template yet. Please create a new."}),(0,n.jsx)("a",{className:"btn btn-primary btn-md",href:"#/project/create",role:"button",children:"Create Template"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("h1",{className:"display-4",children:["Hello, ",t,"!"]}),(0,n.jsx)("p",{className:"lead",children:"You don't have any projects yet. Please create a new project."}),(0,n.jsx)("a",{className:"btn btn-primary btn-md",href:"#/project/list",role:"button",style:{backgroundColor:"#3399ff",borderColor:"#3399ff",fontWeight:550},children:"Go to Project pannel"})]})})}},41711:(e,t,i)=>{i.d(t,{Hk:()=>c,Y1:()=>s,an:()=>d,jZ:()=>m,pp:()=>u,uB:()=>h,vR:()=>r});var a=i(89379),l=(i(9950),i(26080)),o=i(49911),n=i(44414);const r=e=>{let{data:t,handleChange:i,handleSubmit:a,validated:l,isLoading:r}=e;return(0,n.jsxs)(o.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:l,onSubmit:a,children:[(0,n.jsxs)(o.UF,{md:12,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom03",children:"Symbol"}),(0,n.jsx)(o.OG,{type:"text",id:"validationCustom03",required:!0,placeholder:"Enter Unit Symbol",name:"symbol",value:null===t||void 0===t?void 0:t.symbol,onChange:i}),(0,n.jsx)(o.To,{invalid:!0,children:"Please provide unit symbol."})]}),(0,n.jsxs)(o.UF,{md:12,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom03",children:"Meaning"}),(0,n.jsx)(o.OG,{type:"text",id:"validationCustom03",required:!0,placeholder:"Enter Unit In full",name:"meaning",value:null===t||void 0===t?void 0:t.meaning,onChange:i}),(0,n.jsx)(o.To,{invalid:!0,children:"Please provide unit meaning."})]}),(0,n.jsx)(o.UF,{xs:12,children:(0,n.jsx)(o.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)"},children:r?"Processing...":"Create Unit"})})]})},s=e=>{let{data:t,handleChange:i,handleSubmit:a,validated:l,status:r}=e;return(0,n.jsxs)(o.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:l,onSubmit:a,children:[(0,n.jsxs)(o.UF,{md:12,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom01",children:"Name"}),(0,n.jsx)(o.OG,{type:"text",id:"validationCustom01",required:!0,placeholder:"Enter First Name",name:"name",value:null===t||void 0===t?void 0:t.name,onChange:i}),(0,n.jsx)(o.To,{invalid:!0,children:"Please provide a Name."})]}),(0,n.jsxs)(o.UF,{md:12,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom03",children:"Email"}),(0,n.jsx)(o.OG,{type:"email",id:"validationCustom03",required:!0,placeholder:"Enter Email",name:"email",value:null===t||void 0===t?void 0:t.email,onChange:i}),(0,n.jsx)(o.To,{invalid:!0,children:"Please provide a Email."})]}),(0,n.jsxs)(o.UF,{md:12,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom04",children:"Temporary Password"}),(0,n.jsx)(o.OG,{type:"password",id:"validationCustom04",required:!0,placeholder:"Enter Temporary Password",name:"password",value:null===t||void 0===t?void 0:t.password,onChange:i}),(0,n.jsx)(o.To,{invalid:!0,children:"Please provide a Temporary Password."})]}),(0,n.jsx)(o.UF,{xs:12,children:(0,n.jsx)(o.Q_,{color:"primary",type:"submit",children:"loading"===r?"Sending...":"Send Invitation"})})]})},d=e=>{let{data:t,handleChange:i,handleSubmit:a,validated:l,isLoading:r}=e;return(0,n.jsxs)(o.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:l,onSubmit:a,children:[(0,n.jsxs)(o.UF,{md:12,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom01",children:"Supplier Name"}),(0,n.jsx)(o.OG,{type:"text",id:"validationCustom01",required:!0,placeholder:"Enter Supplier Name",name:"name",value:null===t||void 0===t?void 0:t.name,onChange:i}),(0,n.jsx)(o.To,{invalid:!0,children:"Please provide a Supplier Name."})]}),(0,n.jsxs)(o.UF,{md:12,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom02",children:"Supplier Address"}),(0,n.jsx)(o.OG,{type:"text",id:"validationCustom02",placeholder:"Enter Supplier Adress",name:"address",value:null===t||void 0===t?void 0:t.address,onChange:i})]}),(0,n.jsxs)(o.UF,{md:12,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom03",children:"Price"}),(0,n.jsx)(o.OG,{type:"number",id:"validationCustom03",placeholder:"Enter Price",name:"price",value:null===t||void 0===t?void 0:t.price,onChange:i,step:"any"})]}),(0,n.jsx)(o.UF,{xs:12,children:(0,n.jsx)(o.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)"},children:r?"Processing...":"Add Supplier"})})]})},c=e=>{let{data:t,handleChange:i,handleSubmit:r,validated:s,isLoading:d,handleSupplierInputChange:c,onCreateOptionSupplier:m,suppliers:u,handleUnitChange:h,units:v,onCreateOptionUnit:x}=e;return(0,n.jsxs)(o.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:s,onSubmit:r,children:[(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom01",children:"Material Name"}),(0,n.jsx)(o.OG,{type:"text",id:"validationCustom01",required:!0,placeholder:"Enter Material Name",name:"name",value:null===t||void 0===t?void 0:t.name,onChange:i}),(0,n.jsx)(o.To,{invalid:!0,children:"Please provide a Material Name."})]}),(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom03",children:"Unit"}),(0,n.jsx)(l.A,{style:{color:"red"},isClearable:!0,placeholder:"Search unit",onChange:h,options:v,styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})},onCreateOption:x})]}),(0,n.jsxs)(o.UF,{md:12,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom04",children:"Material Price"}),(0,n.jsx)(o.OG,{type:"number",id:"validationCustom04",required:!0,placeholder:"Enter Material Price",name:"price",value:null===t||void 0===t?void 0:t.price,onChange:i,step:"any"}),(0,n.jsx)(o.To,{invalid:!0,children:"Please provide a Material Price."})]}),(0,n.jsxs)(o.UF,{md:12,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom05",children:"Currency default(RWF)"}),(0,n.jsx)(l.A,{style:{color:"red"},isClearable:!0,placeholder:"Search currency",onChange:c,options:u,styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})},onCreateOption:m})]}),(0,n.jsx)(o.UF,{xs:12,children:(0,n.jsx)(o.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)"},children:d?"Processing...":"Add Material"})})]})},m=e=>{let{data:t,handleChange:i,handleSubmit:r,validated:s,isLoading:d,handleUnitInputChange:c,handleSelectChange:m,units:u,onCreateOptionUnit:h,handleSupplierInputChange:v,onCreateOptionSupplier:x,suppliers:p}=e;return(0,n.jsxs)(o.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:s,onSubmit:r,children:[(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom01",children:"Labour Name"}),(0,n.jsx)(o.OG,{type:"text",id:"validationCustom01",required:!0,placeholder:"Enter Labour Name",name:"name",value:null===t||void 0===t?void 0:t.name,onChange:i}),(0,n.jsx)(o.To,{invalid:!0,children:"Please provide a Labour Name."})]}),(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom03",children:"Labour Unit"}),(0,n.jsx)(l.A,{style:{color:"red"},isClearable:!0,placeholder:"Search unit",onChange:m,onInputChange:c,options:u,styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})},onCreateOption:h})]}),(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom02",children:"Labour Number"}),(0,n.jsx)(o.OG,{type:"number",id:"validationCustom02",placeholder:"Enter Labour Number",name:"number",value:null===t||void 0===t?void 0:t.number,onChange:i,step:"any"})]}),(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom05",children:"Labour Wage"}),(0,n.jsx)(o.OG,{type:"number",id:"validationCustom05",required:!0,placeholder:"Enter Labour Wage",name:"wages",value:null===t||void 0===t?void 0:t.wages,onChange:i,step:"any"}),(0,n.jsx)(o.To,{invalid:!0,children:"Please provide a Labour Wage."})]}),(0,n.jsxs)(o.UF,{md:12,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom05",children:"Currency default(RWF)"}),(0,n.jsx)(l.A,{style:{color:"red"},isClearable:!0,placeholder:"Search currency",onChange:v,options:p,styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})},onCreateOption:x})]}),(0,n.jsx)(o.UF,{xs:12,children:(0,n.jsx)(o.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)"},children:d?"Processing...":"Add Labour"})})]})},u=e=>{let{data:t,handleChange:i,handleSubmit:r,validated:s,handleUnitInputChange:d,onCreateOptionUnit:c,onInputUnitSelect:m,units:u,isLoading:h,handleSupplierInputChange:v,suppliers:x}=e;return(0,n.jsxs)(o.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:s,onSubmit:r,children:[(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom01",children:"Sub Contractor Name"}),(0,n.jsx)(o.OG,{type:"text",id:"validationCustom01",required:!0,placeholder:"Enter Sub Contractor Name",name:"name",value:null===t||void 0===t?void 0:t.name,onChange:i}),(0,n.jsx)(o.To,{invalid:!0,children:"Please provide a Sub Contractor Name."})]}),(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom02",children:"Sub Contractor Unit"}),(0,n.jsx)(l.A,{style:{color:"red"},isClearable:!0,placeholder:"Search unit",onChange:m,onInputChange:d,options:u,styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})},onCreateOption:c})]}),(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom04",children:"Sub Contractor Price"}),(0,n.jsx)(o.OG,{type:"number",id:"validationCustom04",required:!0,placeholder:"Enter Sub Contractor Price",name:"price",value:null===t||void 0===t?void 0:t.price,onChange:i,step:"any"}),(0,n.jsx)(o.To,{invalid:!0,children:"Please provide a Sub Contractor Price."})]}),(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom05",children:"Currency default(RWF)"}),(0,n.jsx)(l.A,{style:{color:"red"},isClearable:!0,placeholder:"Search currency",onChange:v,options:x,styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})}})]}),(0,n.jsx)(o.UF,{xs:12,children:(0,n.jsx)(o.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)"},children:h?"Processing...":"Add Sub Contractor"})})]})},h=e=>{let{data:t,handleChange:i,handleSubmit:r,validated:s,handleSupplierChange:d,isLoading:c,suppliers:m,onCreateOptionSupplier:u,handleUnitChange:h,units:v,onCreateOptionUnit:x}=e;return(0,n.jsxs)(o.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:s,onSubmit:r,children:[(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom01",children:"Equipment Name"}),(0,n.jsx)(o.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write equipment name here",name:"name",value:null===t||void 0===t?void 0:t.name,onChange:i,required:!0}),(0,n.jsx)(o.To,{invalid:!0,children:"Please provide Equipment name"})]}),(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom03",children:"Unit"}),(0,n.jsx)(l.A,{style:{color:"red"},isClearable:!0,placeholder:"Search unit",onChange:h,options:v,styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})},onCreateOption:x})]}),(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom04",children:"Hire Rate Price"}),(0,n.jsx)(o.OG,{type:"number","aria-label":"name",id:"validationCustom04",placeholder:"Write hire rate price here",name:"hireRatePrice",value:null===t||void 0===t?void 0:t.hireRatePrice,onChange:i,required:!0,step:"any"}),(0,n.jsx)(o.To,{invalid:!0,children:"Hire Rate Price"})]}),(0,n.jsxs)(o.UF,{md:6,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom05",children:"Number"}),(0,n.jsx)(o.OG,{type:"number","aria-label":"name",id:"validationCustom05",placeholder:"Write number here",name:"number",value:null===t||void 0===t?void 0:t.number,onChange:i,step:"any"})]}),(0,n.jsxs)(o.UF,{md:12,children:[(0,n.jsx)(o.A6,{htmlFor:"validationCustom05",style:{color:"black"},children:"Currency default(RWF)"}),(0,n.jsx)(l.A,{style:{color:"red"},isClearable:!0,placeholder:"Search currency",onChange:d,options:m,styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black",textTransform:"lowercase"})},onCreateOption:u})]}),(0,n.jsx)(o.UF,{xs:12,children:(0,n.jsx)(o.Q_,{style:{backgroundColor:"#01579b",color:"#fff",fontWeight:500},color:"loading"===c?"secondary":"primary",type:"submit",children:c?"Processing...":"Add Equipment"})})]})}},87872:(e,t,i)=>{i.d(t,{A:()=>b});var a=i(89379),l=i(9950),o=i(26080),n=i(67580),r=i(46639),s=i(49911),d=i(73878),c=i(51342),m=i(36770),u=i(98854),h=i(92686),v=i(16484),x=i(97705),p=i(44414);function b(e){var t;let{isGeneral:i}=e;const[b,j]=(0,l.useState)({name:"",estimationQuantity:1,subCategory:null,code:null}),[g,y]=(0,l.useState)(""),[C,f]=(0,l.useState)(""),[S,A]=(0,l.useState)(""),{projects:F,singleProject:w}=(0,d.d4)(h.Br),N=null===w||void 0===w?void 0:w.name,[U,k]=(0,l.useState)(!1),{units:P}=(0,d.d4)(m.GV),{systemEstCategories:E}=(0,d.d4)(u.ri),T=(0,d.wA)(),{isLoading:I,createSuccessMessage:q,createActivityError:O}=(0,d.d4)(c.$z),[B,G]=(0,l.useState)(!1),[W,Q]=(0,l.useState)(""),{categories:_,categoriesError:L,categoriesSuccess:Y}=(0,d.d4)(v.k5);(0,l.useEffect)(()=>{T((0,m.YU)())},[T]),(0,l.useEffect)(()=>{T((0,u.Wt)())},[T]);const z=e=>{const{name:t,value:i}=e.target;j((0,a.A)((0,a.A)({},b),{},{[t]:i}))},V=[...null===E||void 0===E?void 0:E.map(e=>({value:e.id,label:e.name})),...null===_||void 0===_?void 0:_.map(e=>({value:e.id,label:e.name}))].filter((e,t,i)=>t===i.findIndex(t=>t.value===e.value)),D=V.map(e=>e.label),M=null===V||void 0===V||null===(t=V.map(e=>({value:e.value,label:null===e||void 0===e?void 0:e.label})))||void 0===t?void 0:t.filter((e,t)=>{if(D.indexOf(e.label)===t)return e});(0,l.useEffect)(()=>{const e=setTimeout(()=>{T((0,c.kd)())},5e3);return()=>clearTimeout(e)},[T,q,O]);const R=null===P||void 0===P?void 0:P.map(e=>({value:e.id,label:e.symbol})),J=null===F||void 0===F?void 0:F.map(e=>({value:e.id,label:e.name}));(0,l.useEffect)(()=>{T((0,v.sr)())},[T]),(0,l.useEffect)(()=>{const e=setTimeout(()=>{T((0,v.Qk)())},3e3);return()=>clearTimeout(e)},[T,Y,L]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:{backgroundColor:"#fff",padding:"2rem"},children:(0,p.jsxs)(s.qI,{className:"row g-3 needs-validation",noValidate:!0,validated:B,onSubmit:e=>{e.preventDefault();const t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),!0===t.checkValidity()&&(W.length>0&&"string"===typeof W&&T((0,v.Sp)({name:W})).then(e=>(201===e.payload.status&&(f(e.payload.data.id),Q(""),T((0,c.E1)({name:b.name,estimationUnit:g||S,estimationQuantity:b.estimationQuantity,categoryId:e.payload.data.id})).then(e=>{201===e.payload.status&&T((0,c.p_)({id:w.id,estimationName:e.payload.data.name})).then(()=>{var t,i;null!==b.subCategory&&T((0,c.zt)({name:null===b||void 0===b?void 0:b.subCategory,code:null===b||void 0===b?void 0:b.code,mainCategoryId:null===(t=e.payload.data)||void 0===t||null===(i=t.category)||void 0===i?void 0:i.id}));T((0,c.Ew)()),T((0,c.jI)())})})),!0)),!C||"number"!==typeof C||"number"!==typeof W&&""!==W||T((0,c.E1)({name:b.name,estimationUnit:g||S,estimationQuantity:b.estimationQuantity,categoryId:C})).then(e=>{201===e.payload.status&&(console.log("frst",b),T((0,c.p_)({id:w.id,estimationName:e.payload.data.name})).then(t=>{var i,a;(console.log("scnd",b.subCategory),null!==b.subCategory)&&(console.log("thrd",t),T((0,c.zt)({name:null===b||void 0===b?void 0:b.subCategory,code:null===b||void 0===b?void 0:b.code,mainCategoryId:null===(i=e.payload.data)||void 0===i||null===(a=i.category)||void 0===a?void 0:a.id})))}),T((0,c.Ew)()),T((0,c.jI)()))})),G(!0)},children:[(0,p.jsx)("div",{style:{width:"100%",fontWeight:"bold"},children:!i&&(0,p.jsx)(o.A,{isClearable:!0,onChange:(e,t)=>{const i={id:e.value,labourName:e.label};T((0,h.EQ)(i.id))},options:J,placeholder:N||"Select a Project",styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})}})}),(0,p.jsxs)(s.UF,{md:12,children:[(0,p.jsx)(s.A6,{htmlFor:"validationCustom01",style:{color:"black"},children:"Description (Estimation name)"}),(0,p.jsx)(s.OG,{type:"text","aria-label":"name",id:"validationCustom01",placeholder:"Write description here",name:"name",value:null===b||void 0===b?void 0:b.name,onChange:z,required:!0}),(0,p.jsx)(s.To,{invalid:!0,children:"Write description"})]}),(0,p.jsxs)(s.UF,{md:12,children:[(0,p.jsx)(s.A6,{htmlFor:"validationCustom05",style:{color:"black"},children:"Category"}),(0,p.jsx)(o.A,{style:{color:"red"},isClearable:!0,placeholder:"Search Category",onChange:e=>{f(e.value),Q(null===e||void 0===e?void 0:e.value)},options:M,styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black",textTransform:"lowercase"})}}),(0,p.jsx)(s.To,{invalid:!0,children:"Please provide Category"})]}),(0,p.jsxs)(s.UF,{md:12,children:[(0,p.jsx)(s.A6,{htmlFor:"validationCustom01",style:{color:"black"},children:"SubCategory name (optional)"}),(0,p.jsx)(s.OG,{type:"text","aria-label":"subCategory",id:"validationCustom01",placeholder:"Create SubCategory name",name:"subCategory",value:null===b||void 0===b?void 0:b.subCategory,onChange:z})]}),(0,p.jsxs)(s.UF,{md:12,children:[(0,p.jsx)(s.A6,{htmlFor:"validationCustom01",style:{color:"black"},children:"SubCategory code (optional)"}),(0,p.jsx)(s.OG,{type:"text","aria-label":"code",id:"validationCustom01",placeholder:"Create SubCategory code",name:"code",value:null===b||void 0===b?void 0:b.code,onChange:z})]}),(0,p.jsxs)(s.UF,{md:12,children:[(0,p.jsx)(s.A6,{htmlFor:"validationCustom03",style:{color:"black"},children:"Estimation Unit"}),(0,p.jsx)(o.A,{style:{color:"red"},isClearable:!0,placeholder:"Search unit",onChange:e=>{y(e.label)},options:R,styles:{option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{borderBottom:"1px dotted #01579b",color:t.isSelected?"white":"black"})},onCreateOption:e=>{A(e),k(!U)}}),(0,p.jsx)(s.To,{invalid:!0,children:"Please provide estimationUnit"})]}),(0,p.jsxs)(s.UF,{md:12,children:[(0,p.jsx)(s.A6,{htmlFor:"validationCustom04",style:{color:"black"},children:"Estimation Quantity"}),(0,p.jsx)(s.OG,{type:"number","aria-label":"Estimation Quantity",id:"validationCustom04",placeholder:"Write estimationQuantity here",name:"estimationQuantity",value:null===b||void 0===b?void 0:b.estimationQuantity,onChange:z,required:!0}),(0,p.jsx)(s.To,{invalid:!0,children:"Please provide estimationQuantity name"})]}),(0,p.jsxs)(s.UF,{xs:12,children:[(0,p.jsx)(s.Q_,{style:{backgroundColor:"#01579b",color:"#fff",fontWeight:500},color:I?"secondary":"primary",type:"submit",children:I?"Processing...":"Create Activity"}),q&&(0,p.jsx)(s.Yq,{children:(0,p.jsx)(s.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(s.Bw,{children:q}),(0,p.jsx)(s.vo,{className:"me-2 m-auto"})]})})}),O&&(0,p.jsx)(s.Yq,{children:(0,p.jsx)(s.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(s.Bw,{children:O}),(0,p.jsx)(s.vo,{className:"me-2 m-auto"})]})})}),Y&&(0,p.jsx)(s.Yq,{children:(0,p.jsx)(s.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(s.Bw,{children:Y}),(0,p.jsx)(s.vo,{className:"me-2 m-auto"})]})})}),L&&(0,p.jsx)(s.Yq,{children:(0,p.jsx)(s.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(s.Bw,{children:L}),(0,p.jsx)(s.vo,{className:"me-2 m-auto"})]})})})]}),(0,p.jsxs)(s.zS,{size:"lg",alignment:"top",visible:U,onClose:()=>k(!1),className:"modal-bg-color",children:[(0,p.jsx)(s.E4,{children:(0,p.jsxs)(s.lb,{children:[" ","Create ",(0,p.jsx)("span",{style:{color:"red"},children:S})," as unit"]})}),(0,p.jsx)(s.Tc,{children:(0,p.jsx)(x.A,{})})]})]})}),(0,p.jsx)("div",{children:(0,p.jsx)(n.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:I,children:(0,p.jsx)(r.A,{color:"inherit"})})})]})}},97705:(e,t,i)=>{i.d(t,{A:()=>c});var a=i(89379),l=i(9950),o=i(73878),n=i(49911),r=i(41711),s=i(36770),d=i(44414);const c=()=>{const[e,t]=(0,l.useState)(!1),[i,c]=(0,l.useState)({symbol:"",meaning:""}),m=(0,o.wA)(),{unitsError:u,unitsSuccess:h,unitsLoading:v}=(0,o.d4)(s.GV);return(0,l.useEffect)(()=>{const e=setTimeout(()=>{m((0,s.PF)())},5e3);return()=>clearTimeout(e)},[m]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.vR,{handleChange:e=>{const{name:t,value:l}=e.target;c((0,a.A)((0,a.A)({},i),{},{[t]:l}))},handleSubmit:e=>{const a=e.currentTarget;e.preventDefault(),!1===a.checkValidity()&&(e.preventDefault(),e.stopPropagation()),console.log(i),!0===a.checkValidity()&&(m((0,s._W)({symbol:i.symbol,meaning:i.meaning})),t(!0))},data:i,validated:e,isLoading:v}),h&&(0,d.jsx)(n.Yq,{children:(0,d.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,d.jsxs)("div",{className:"d-flex",children:[(0,d.jsx)(n.Bw,{children:h}),(0,d.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),u&&(0,d.jsx)(n.Yq,{children:(0,d.jsx)(n.JY,{visible:!0,color:"danger",header:"Error",icon:"cil-ban",className:"text-white align-items-center",children:(0,d.jsxs)("div",{className:"d-flex",children:[(0,d.jsx)(n.Bw,{children:u}),(0,d.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})}}}]);