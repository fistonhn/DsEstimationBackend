"use strict";(self.webpackChunk_ds_estimation_construction_web_app=self.webpackChunk_ds_estimation_construction_web_app||[]).push([[9845],{19845:(e,i,t)=>{t.r(i),t.d(i,{default:()=>I});var o=t(89379),l=t(9950),n=t(60899),r=t(249),s=t(48089),d=t(50704),a=t(45180),c=t(64446),v=t(68863),x=t(10226),h=t(74745),u=t(84910),m=t(46986),p=t(45546),j=t(82053),f=t(18726),g=t(87872),A=t(17981),y=t(26080),b=t(73878),w=t(67580),k=t(46639),S=t(39324),C=t(74959),z=t(49911),W=t(92686),_=t(51342),E=t(30091),N=t(79114),B=t(44414);function I(){var e,i;const[t,I]=(0,l.useState)(!1),[T,O]=(0,l.useState)(!1),Q=(0,b.wA)(),[L,P]=(0,l.useState)([]),[Y,F]=(0,l.useState)([]),{projects:q,singleProject:D}=(0,b.d4)(W.Br),{role:J}=(0,N.Q)(),R=null===D||void 0===D?void 0:D.activities,[$,G]=(0,l.useState)(null===D||void 0===D?void 0:D.id),{activities:H,defaultActivities:K,activityToProjectError:M,activityToProjectSuccess:U,isLoading:V}=(0,b.d4)(_.$z);(0,l.useEffect)(()=>{Q((0,W.cf)())},[Q]),(0,l.useEffect)(()=>{Q((0,_.Ew)())},[Q]),(0,l.useEffect)(()=>{Q((0,_.jI)())},[Q]),(0,l.useEffect)(()=>{Q((0,W.EQ)($))},[Q,$,U]),(0,l.useEffect)(()=>{const e=setTimeout(()=>{Q((0,_.kd)())},3e3);return()=>clearTimeout(e)},[Q,U,M]);const X=null===H||void 0===H?void 0:H.map(e=>{var i;return null===e||void 0===e||null===(i=e.category)||void 0===i?void 0:i.name}),Z=null===H||void 0===H||null===(e=H.map(e=>{var i;return null===(i=e.category)||void 0===i?void 0:i.name}))||void 0===e?void 0:e.filter((e,i)=>{if(X.indexOf(e)===i)return e}),ee=null===R||void 0===R?void 0:R.map(e=>{var i;return null===e||void 0===e||null===(i=e.category)||void 0===i?void 0:i.name}),ie=null===R||void 0===R||null===(i=R.map(e=>{var i;return null===(i=e.category)||void 0===i?void 0:i.name}))||void 0===i?void 0:i.filter((e,i)=>{if(ee.indexOf(e)===i)return e}),te=null===K||void 0===K?void 0:K.map(e=>{var i;return null===(i=e.category)||void 0===i?void 0:i.name}),oe=[...new Set(te)],le=[...Z],[ne]=(0,l.useState)(oe),[re,se]=(0,l.useState)(le),de=null===q||void 0===q?void 0:q.map(e=>({value:e.id,label:e.name})),ae=e=>{"owner"===J?(I(!1),O(!1),se(le)):(Q((0,_.Ew)()).then(e=>{var i,t,o;const l=null===(i=e.payload.data)||void 0===i?void 0:i.map(e=>{var i;return null===e||void 0===e||null===(i=e.category)||void 0===i?void 0:i.name}),n=null===(t=e.payload.data)||void 0===t||null===(o=t.map(e=>{var i;return null===(i=e.category)||void 0===i?void 0:i.name}))||void 0===o?void 0:o.filter((e,i)=>{if(l.indexOf(e)===i)return e});ne(n)}),O(!1))},ce=e=>{const i=e.target.value,t=e.target.checked;P(t?[...L,i]:L.filter(e=>e!==i))},ve=e=>{const i=e.target.value,t=e.target.checked;F(t?[...Y,i]:Y.filter(e=>e!==i))};return(0,B.jsxs)(B.Fragment,{children:["owner"===J&&(null===q||void 0===q?void 0:q.length)>0&&(0,B.jsx)(s.A,{sx:{minWidth:275},style:{backgroundColor:"#cccccc",margin:"-40px",padding:"40px"},children:(0,B.jsxs)(d.A,{children:[(0,B.jsx)("div",{style:{marginBottom:"20px",width:"40%",fontWeight:"bold",fontSize:"0.7rem"},children:(0,B.jsx)(y.A,{isClearable:!0,onChange:(e,i)=>{const t={id:e.value,labourName:e.label};G(t.id)},options:de,placeholder:D?null===D||void 0===D?void 0:D.name:"Select a Project",styles:{option:(e,i)=>(0,o.A)((0,o.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,B.jsxs)(s.A,{sx:{minWidth:275},style:{backgroundColor:"#f7f7f7"},children:[" ",(0,B.jsxs)(j.A,{gutterBottom:!0,variant:"h5",component:"div",style:{paddingRight:"50px",paddingTop:"20px",fontWeight:"bold",float:"right"},children:[(0,B.jsx)(z.Q_,{style:{fontWeight:600,color:"white",fontSize:"12px"},onClick:()=>O(!0),color:"info",size:"sm",children:"Duplicate Activity"})," ",(0,B.jsxs)(z.zS,{visible:T,onClose:ae,children:[(0,B.jsx)(z.E4,{onClose:ae,children:(0,B.jsx)(z.lb,{children:"Duplicate activity"})}),(0,B.jsx)(z.Tc,{children:(0,B.jsx)(A.A,{})})]}),(0,B.jsx)(z.Q_,{style:{fontWeight:600,color:"white",fontSize:"12px"},onClick:()=>I(!0),color:"info",size:"sm",children:"Create New Activity"})," "]}),(0,B.jsx)("div",{style:{padding:"10px"},children:(0,B.jsxs)(z.zS,{visible:t,onClose:ae,children:[(0,B.jsx)(z.E4,{onClose:ae,children:(0,B.jsx)(z.lb,{children:"Create new estimation"})}),(0,B.jsx)(z.Tc,{children:(0,B.jsx)(g.A,{})})]})}),(0,B.jsx)(d.A,{children:(0,B.jsxs)(n.Ay,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:[(0,B.jsx)(n.Ay,{item:!0,children:(0,B.jsxs)(s.A,{style:{backgroundColor:"#01579b",overflow:"auto",color:"white",fontWeight:"bold",fontSize:"12px",width:"100%",float:"left"},children:[(0,B.jsx)(a.A,{sx:{px:2,py:1},title:"System Activities"}),(0,B.jsx)(h.A,{}),(0,B.jsxs)(r.A,{sx:{width:400,height:400,bgcolor:"background.paper",overflow:"auto"},dense:!0,component:"div",role:"list",children:[null===re||void 0===re?void 0:re.map((e,i)=>{var t;return(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(u.A,{children:[(0,B.jsx)(m.A,{expandIcon:(0,B.jsx)(f.A,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,B.jsxs)(j.A,{children:[" ",(0,B.jsxs)("span",{style:{color:"black",fontWeight:"bold",fontSize:"11px"},children:[i+1,".",e]})]})}),(0,B.jsx)(p.A,{children:null===H||void 0===H||null===(t=H.filter(i=>{var t;return(null===(t=i.category)||void 0===t?void 0:t.name)===e}))||void 0===t?void 0:t.map((e,t)=>(0,B.jsxs)("div",{value:e.id,style:{cursor:"pointer",fontWeight:600,fontSize:"0.75rem",borderBottom:"1px solid #ccc"},children:[(0,B.jsx)(v.A,{size:"small",value:e.name,onClick:ce}),i+1,".",t+1,"."," ",e.name]},t))})]},i)})}),(0,B.jsx)(c.Ay,{})]})]})}),(0,B.jsx)(n.Ay,{item:!0,children:(0,B.jsxs)(n.Ay,{container:!0,direction:"column",alignItems:"center",children:[(0,B.jsx)(x.A,{sx:{my:.5},variant:"contained",size:"small",onClick:()=>{if(L.length>0){for(let e of L)Q((0,_.p_)({id:$,estimationName:e}));Q((0,W.Os)({projectId:$}))}se(oe),se(le)},"aria-label":"move selected right",style:{padding:"10px",color:"white"},children:(0,B.jsx)(C.g,{icon:S.QLR})}),(0,B.jsx)(x.A,{style:{backgroundColor:"red",padding:"10px",color:"white"},sx:{my:.5},variant:"contained",size:"small",onClick:()=>{if(Y.length>0)for(let e of Y)Q((0,_.O3)({id:$,estimationName:e}))},"aria-label":"move selected left",children:(0,B.jsx)(C.g,{icon:S.yLS})})]})}),(0,B.jsx)(n.Ay,{item:!0,children:(0,B.jsxs)(s.A,{style:{backgroundColor:"#01579b",overflow:"auto",color:"white",fontWeight:"bold",fontSize:"11px",width:"100%",float:"right"},children:[(0,B.jsx)(a.A,{sx:{px:2,py:1}}),(0,B.jsx)("div",{style:{fontWeight:500,fontSize:"1rem",paddingLeft:"15px",paddingBottom:"10px",maxWidth:"400px"},children:"".concat(null===D||void 0===D?void 0:D.name," Activities")}),(0,B.jsx)(h.A,{}),(0,B.jsxs)(r.A,{sx:{width:400,height:400,bgcolor:"background.paper",overflow:"auto"},dense:!0,component:"div",role:"list",children:[null===ie||void 0===ie?void 0:ie.map((e,i)=>{var t,o;return(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(u.A,{children:[(0,B.jsx)(m.A,{expandIcon:(0,B.jsx)(f.A,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,B.jsxs)(j.A,{children:[" ",(0,B.jsxs)("span",{style:{color:"black",fontWeight:"bold",fontSize:"11px"},children:[i+1,".",e]})]})}),(0,B.jsx)(p.A,{children:null===D||void 0===D||null===(t=D.activities)||void 0===t||null===(o=t.filter(i=>{var t;return(null===(t=i.category)||void 0===t?void 0:t.name)===e}))||void 0===o?void 0:o.map((e,t)=>(0,B.jsxs)("div",{value:e.id,style:{cursor:"pointer",fontWeight:600,fontSize:"0.75rem",borderBottom:"1px solid #ccc"},children:[(0,B.jsx)(v.A,{size:"small",value:e.name,onClick:ve}),i+1,".",t+1,"."," ",e.name]},t+74))})]},i)})}),(0,B.jsx)(c.Ay,{})]})]})})]})})]})]})}),U&&(0,B.jsx)(z.Yq,{placement:"top-end",children:(0,B.jsx)(z.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,B.jsxs)("div",{className:"d-flex",children:[(0,B.jsx)(z.Bw,{children:U}),(0,B.jsx)(z.vo,{className:"me-2 m-auto"})]})})}),M&&(0,B.jsx)(z.Yq,{placement:"top-end",children:(0,B.jsx)(z.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,B.jsxs)("div",{className:"d-flex",children:[(0,B.jsx)(z.Bw,{children:M}),(0,B.jsx)(z.vo,{className:"me-2 m-auto"})]})})}),0===(null===q||void 0===q?void 0:q.length)&&(0,B.jsx)(E.A,{}),(0,B.jsx)("div",{children:(0,B.jsx)(w.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:V,children:(0,B.jsx)(k.A,{color:"inherit"})})})]})}}}]);