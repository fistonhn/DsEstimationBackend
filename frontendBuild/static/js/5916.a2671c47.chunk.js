"use strict";(self.webpackChunk_ds_estimation_construction_web_app=self.webpackChunk_ds_estimation_construction_web_app||[]).push([[5916],{30091:(e,o,t)=>{t.d(o,{A:()=>c,v:()=>a});t(9950);var l=t(73878),i=t(83990),n=t(42891),r=t(44414);const a=()=>{const{token:e}=(0,l.d4)(i.dt),{payload:{name:o}}=(0,n.A)(e),t=(new Date).getHours(),a=(new Date).getTime(),c=new Date(a).toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});return(0,r.jsxs)("div",{className:"jumbotron",style:{height:"100%",padding:"1.3rem",backgroundColor:"#fff",fontWeight:"bold"},children:[(0,r.jsx)("p",{className:"p-2",children:(0,r.jsx)("b",{children:c})}),t<12&&(0,r.jsxs)("h5",{className:"display-4",children:["Good morning, ",o,"!"]}),t>=12&&t<18&&(0,r.jsxs)("h5",{className:"display-4",children:["Good afternoon, ",o,"!"]}),t>=18&&(0,r.jsxs)("h5",{className:"display-4",children:["Good evening, ",o,"!"]})]})},c=()=>{const{token:e}=(0,l.d4)(i.dt),{payload:{name:o,role:t}}=(0,n.A)(e);return(0,r.jsx)("div",{className:"jumbotron",children:"owner"===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h1",{className:"display-4",children:["Hello, ",o,"!"]}),(0,r.jsx)("p",{className:"lead",children:"There is no Template yet. Please create a new."}),(0,r.jsx)("a",{className:"btn btn-primary btn-md",href:"#/project/create",role:"button",children:"Create Template"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h1",{className:"display-4",children:["Hello, ",o,"!"]}),(0,r.jsx)("p",{className:"lead",children:"You don't have any projects yet. Please create a new project."}),(0,r.jsx)("a",{className:"btn btn-primary btn-md",href:"#/project/list",role:"button",style:{backgroundColor:"#3399ff",borderColor:"#3399ff",fontWeight:550},children:"Go to Project pannel"})]})})}},85916:(e,o,t)=>{t.r(o),t.d(o,{default:()=>D});var l=t(89379),i=t(9950),n=t(59051),r=t.n(n),a=t(60899),c=t(67580),d=t(46639),s=t(26080),u=t(73878),m=t(51342),h=t(92686),v=t(49911),f=t(59019),x=(t(60764),t(92560)),p=t(5386),b=t(44414);const y=()=>{var e,o,t,n,a;const[c,d]=(0,i.useState)(!1),{singleProject:s}=(0,u.d4)(h.Br),m=null===s||void 0===s||null===(e=s.activities)||void 0===e?void 0:e.map(e=>{var o;return null===(o=e.category)||void 0===o?void 0:o.name}),y=null===s||void 0===s||null===(o=s.activities)||void 0===o||null===(t=o.map((e,o)=>{var t;return{id:o+1,name:null===(t=e.category)||void 0===t?void 0:t.name}}))||void 0===t?void 0:t.filter((e,o)=>{if(m.indexOf(e.name)===o)return e}),g=null===y||void 0===y?void 0:y.map((e,o)=>{var t,l,i,n,r;return{id:o+1,name:e.name,unit:" ",quantity:" ",rate:" ",calculateAmount:null===s||void 0===s||null===(t=s.activities)||void 0===t||null===(l=t.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===l?void 0:l.map(e=>parseFloat(e.materialCostPerWorkItem||0)).reduce((e,o)=>e+o,0),amount:null===(i=Number(null===s||void 0===s||null===(n=s.activities)||void 0===n||null===(r=n.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===r?void 0:r.map(e=>parseFloat(e.materialCostPerWorkItem||0)).reduce((e,o)=>e+o,0)))||void 0===i?void 0:i.toLocaleString(),_props:{bgColor:"#e2e5de"}}});let j=[];null===s||void 0===s||null===(n=s.activities)||void 0===n||n.map(e=>j=j.concat(e.materials));const S=[...new Map(null===(a=j)||void 0===a?void 0:a.map(e=>[e.name,e])).values()].map(e=>{var o,t,i,n;return(0,l.A)((0,l.A)({},e),{},{sumQuantities:null===(o=j)||void 0===o||null===(t=o.filter(o=>o.name===e.name))||void 0===t?void 0:t.map(e=>parseFloat(e.UserEstimationLibrary.materialFactorQuantity)).reduce((e,o)=>e+o,0),sumAmount:(null===(i=j)||void 0===i||null===(n=i.filter(o=>o.name===e.name))||void 0===n?void 0:n.map(e=>parseFloat(e.UserEstimationLibrary.materialFactorQuantity)).reduce((e,o)=>e+o,0))*e.price})}),C=null===g||void 0===g?void 0:g.map(e=>e.calculateAmount).reduce((e,o)=>e+o,0);return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{style:{backgroundColor:"#e2e5de",padding:"20px",margin:"-10px"},children:[(0,b.jsxs)("div",{style:{display:"flex",marginBottom:"10px"},children:[(0,b.jsx)(v.Q_,{onClick:()=>{const e=new f.default;e.setFontSize(15);let o={startY:70,head:[["ID","Materials","Material Unit","Material Quantity","Material Amount"]],body:null===S||void 0===S?void 0:S.map((e,o)=>["M".concat(o+1),e.name,e.unit,e.sumQuantities,!0===c?" ":e.sumAmount])};e.autoTable({theme:"plain",headStyles:{fontSize:13},bodyStyles:{fontSize:13,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["SUMMARIZED MATERIAL REPORT"]]}),e.autoTable({theme:"plain",styles:{fontSize:12,fillColor:"#01579b",textColor:"#ffffff"},body:[["Project Name:   ".concat(null===s||void 0===s?void 0:s.name)],["Client:    ".concat(null===s||void 0===s?void 0:s.client)],["Contractor:    ".concat(null===s||void 0===s?void 0:s.contractor)],["DATE:   ".concat(r()(null===s||void 0===s?void 0:s.createdAt).format("DD-MM-YYYY h:mm"))]]}),e.autoTable(o),e.autoTable({theme:"plain",headStyles:{fontSize:12},bodyStyles:{fontSize:12,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["GRAND TOTAL: ".concat(!0===c?" ":Number(C).toLocaleString()," ").concat(null===s||void 0===s?void 0:s.currencyCode)]]}),e.save("material.pdf")},color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",marginLeft:"2px"},children:"Download"}),(0,b.jsx)(v.Q_,{onClick:()=>d(!c),color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",whiteSpace:"nowrap",marginLeft:"3px"},children:!1===c?"Hide rate":"UnHide rate"})]}),(0,b.jsxs)(v.UF,{xs:12,style:{backgroundColor:"#fbfbf8"},children:[(0,b.jsx)(v.V0,{style:{backgroundColor:"#01579b",color:"white",textAlign:"center",fontSize:"0.80rem"},children:(0,b.jsx)("strong",{children:"Materials Summary "})}),(0,b.jsxs)(v._v,{hover:!0,bordered:!0,borderColor:"info",style:{fontSize:"0.80rem"},children:[(0,b.jsx)(v.wV,{children:(0,b.jsxs)(v.YI,{style:{backgroundColor:"#01579b",color:"white"},children:[(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"ID"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"Materials"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"Material Unit"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"Material Quantity"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"Material Price"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"Amount"})]})}),(0,b.jsx)(v.jS,{children:null===S||void 0===S?void 0:S.map((e,o)=>{var t,l,i;return(0,b.jsxs)(v.YI,{children:[(0,b.jsx)(v.cC,{children:"M".concat(o+1)}),(0,b.jsx)(v.cC,{children:e.name}),(0,b.jsx)(v.cC,{children:e.unit}),(0,b.jsx)(v.cC,{children:null===(t=Number(e.sumQuantities))||void 0===t?void 0:t.toLocaleString()}),(0,b.jsx)(v.cC,{children:!0===c?" ":null===(l=Number(e.price))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)(v.cC,{children:!0===c?" ":null===(i=Number(e.sumAmount))||void 0===i?void 0:i.toLocaleString()})]},e.id)})})]})]}),(0,b.jsx)("div",{style:{backgroundColor:"#01579b",width:"100%"},children:(0,b.jsxs)(x.A,{children:[(0,b.jsx)(p.A,{style:{paddingLeft:"21px",fontSize:"0.85rem",color:"white",fontWeight:"bold"},colSpan:3,children:"TOTAL MATERIALS:"}),(0,b.jsx)(p.A,{style:{fontSize:"0.85rem",color:"white",fontWeight:"bold",float:"right"},colSpan:4,children:"".concat(!0===c?" ":Number(C).toLocaleString()," ").concat(null===s||void 0===s?void 0:s.currencyCode)})]})})]})})};var g=t(39324),j=t(74959),S=t(37017);const C=()=>{var e,o;const[t,l]=(0,i.useState)(!1),[n,a]=(0,i.useState)([]),c=(0,u.wA)(),{singleProject:d}=(0,u.d4)(h.Br),[s,y]=(0,i.useState)((0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Expand"}),(0,b.jsx)(j.g,{icon:g.tdl})]}));(0,i.useEffect)(()=>{c((0,m.jI)())},[c]),(0,i.useEffect)(()=>{c((0,h.cf)())},[c]);const C=null===d||void 0===d||null===(e=d.activities)||void 0===e||null===(o=e.map((e,o)=>{var t;return{id:o+1,name:null===(t=e.category)||void 0===t?void 0:t.name,materialExist:e.materials.length}}))||void 0===o?void 0:o.filter((e,o)=>{if(e.materialExist>0)return e}),w=[...new Map(null===C||void 0===C?void 0:C.map(e=>[e.name,e])).values()],A=null===w||void 0===w?void 0:w.map((e,o)=>{var t,l,i,n,r;return{allIndex:o,id:o+1,name:e.name,unit:" ",quantity:" ",rate:" ",hidden:" ",calculateAmount:null===d||void 0===d||null===(t=d.activities)||void 0===t||null===(l=t.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===l?void 0:l.map(e=>parseFloat(e.materialCostPerWorkItem||0)).reduce((e,o)=>e+o,0),amount:null===(i=Number(null===d||void 0===d||null===(n=d.activities)||void 0===n||null===(r=n.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===r?void 0:r.map(e=>parseFloat(e.materialCostPerWorkItem||0)).reduce((e,o)=>e+o,0)))||void 0===i?void 0:i.toLocaleString(),_props:{bgColor:"#e2e5de"}}}),k=null===A||void 0===A?void 0:A.map(e=>e.allIndex),z=null===A||void 0===A?void 0:A.map(e=>e.calculateAmount).reduce((e,o)=>e+o,0);const L=[{key:"id",filter:!1,sorter:!1,_props:{className:"fw-semibold"},_style:{width:"8%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"name",label:"Items",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"35%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"unit",label:"Material Unit",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"20%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"quantity",label:"Material Quantity",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"20%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"rate",label:"Material Price",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"20%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:!0===t?"hidden":"amount",label:"amount",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"5%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"show_details",label:"",_style:{width:"3%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"},filter:!1,sorter:!1,_props:{color:"primary",className:"fw-semibold"}}];return(0,b.jsxs)("div",{style:{backgroundColor:"#e2e5de",padding:"20px",margin:"-10px",fontSize:"0.75rem"},children:[(0,b.jsxs)("div",{style:{display:"flex",marginBottom:"4px"},children:[(0,b.jsx)(v.Q_,{onClick:function(){var e=new f.default;e.autoTable({theme:"plain",headStyles:{fontSize:15},bodyStyles:{fontSize:15,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["ITEMISED MATERIAL REPORT"]]}),e.autoTable({theme:"plain",styles:{fontSize:12,fillColor:"#01579b",textColor:"#ffffff"},body:[["Project Name:   ".concat(null===d||void 0===d?void 0:d.name)],["Client:    ".concat(null===d||void 0===d?void 0:d.client)],["Contractor:    ".concat(null===d||void 0===d?void 0:d.contractor)],["DATE:   ".concat(r()(null===d||void 0===d?void 0:d.createdAt).format("DD-MM-YYYY h:mm"))]]}),e.autoTable({theme:"grid",html:"#material-table",didParseCell(e){"main"===e.cell.raw.id&&(e.cell.styles.textColor="black",e.cell.styles.fillColor="#01579b",e.cell.styles.textColor="#ffffff",e.cell.styles.fontSize=10),"activities"===e.cell.raw.id&&(e.cell.styles.textColor="black",e.cell.styles.fillColor="#e2e5de",e.cell.styles.textColor="black",e.cell.styles.fontSize=10)}}),e.autoTable({theme:"plain",styles:{fontSize:13,fontStyle:"italic"},body:[["GRAND TOTAL: ".concat(!0===t?" ":Number(z).toLocaleString()," ").concat(null===d||void 0===d?void 0:d.currencyCode)]]}),e.save("Material-General-Report.pdf")},color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",marginLeft:"2px"},children:"Download"}),(0,b.jsx)(v.Q_,{onClick:()=>{const e=n.indexOf(1);let o=n.slice();-1!==e?(y((0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Expand "}),(0,b.jsx)(j.g,{icon:g.tdl})]})),o.splice(o)):(y((0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Collapse "}),(0,b.jsx)(j.g,{icon:g.GF6})]})),o=[...k,1]),a(o)},color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",marginLeft:"3px"},children:s}),(0,b.jsx)(v.Q_,{onClick:()=>l(!t),color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",whiteSpace:"nowrap",marginLeft:"3px"},children:!1===t?"Hide rate":"UnHide rate"})]}),(0,b.jsx)("div",{style:{backgroundColor:"#fbfbf8",fontWeight:"bold",fontSize:"0.70rem"},children:(0,b.jsx)(S.Pd,{columns:L,items:A,scopedColumns:{show_details:e=>(0,b.jsx)("td",{className:"py-2",children:(0,b.jsx)("div",{onClick:()=>{(e=>{const o=n.indexOf(e);let t=n.slice();-1!==o?t.splice(o,1):t=[...n,e],a(t)})(e._id)},children:n.includes(e._id)?(0,b.jsx)(j.g,{icon:g.GF6}):(0,b.jsx)(j.g,{icon:g.tdl})})}),details:e=>{var o,l;return(0,b.jsx)(v.x8,{visible:n.includes(e._id),children:null===d||void 0===d||null===(o=d.activities)||void 0===o||null===(l=o.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name&&0!==o.materials.length}))||void 0===l?void 0:l.map((o,l)=>{var i,n,r,a;return(0,b.jsxs)(v._v,{small:!0,children:[(0,b.jsx)(v.wV,{style:{backgroundColor:"#3c73a8",color:"white",borderBottom:"2px solid #cccccc",fontSize:"0.85rem"},children:(0,b.jsxs)(v.YI,{children:[(0,b.jsxs)(v.$s,{scope:"col",style:{color:"white"},children:[e.id," ","."," ",l+1]}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:o.name}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:null===(i=Number(o.estimationQuantity))||void 0===i?void 0:i.toLocaleString()}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:o.estimationUnit}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:null===(n=Number(o.estimationRate))||void 0===n?void 0:n.toLocaleString()}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:!0===t?" ":null===(r=Number(o.materialCostPerWorkItem))||void 0===r?void 0:r.toLocaleString()})]})}),(0,b.jsx)(v.jS,{children:null===(a=o.materials)||void 0===a?void 0:a.map((e,o)=>{var l,i;return(0,b.jsxs)(v.YI,{style:{fontSize:"0.70rem",fontWeight:550},children:[(0,b.jsxs)(v.cC,{style:{width:"5%"},children:["M"," ",o+1]},o+445),(0,b.jsx)(v.cC,{style:{width:"20%",textAlign:"left"},children:e.name}),(0,b.jsx)(v.cC,{style:{width:"10%"},children:e.unit}),(0,b.jsx)(v.cC,{style:{width:"10%",textAlign:"left"},children:e.UserEstimationLibrary.materialFactorQuantity}),(0,b.jsx)(v.cC,{style:{width:"8%",textAlign:"left"},children:!0===t?" ":null===(l=Number(e.price))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)(v.cC,{style:{width:"5%",textAlign:"left"},children:!0===t?" ":null===(i=Number(e.UserEstimationLibrary.materialTotalAmount))||void 0===i?void 0:i.toLocaleString()})]},o+334)})})]},l+184)})})}},tableProps:{responsive:!0}})}),(0,b.jsx)("div",{style:{backgroundColor:"#01579b",width:"100%"},children:(0,b.jsxs)(x.A,{children:[(0,b.jsx)(p.A,{style:{paddingLeft:"21px",fontSize:"0.95rem",color:"white",fontWeight:"bold"},colSpan:3,children:"Grand Total:"}),(0,b.jsx)(p.A,{style:{fontSize:"0.95rem",color:"white",fontWeight:"bold",float:"right"},colSpan:4,children:"".concat(!0===t?" ":Number(z).toLocaleString()," ").concat(null===d||void 0===d?void 0:d.currencyCode)})]})}),(0,b.jsxs)("table",{id:"material-table",style:{display:"none"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{backgroundColor:"red",color:"white"},children:[(0,b.jsx)("th",{children:"Id"}),(0,b.jsx)("th",{children:"Items Description"}),(0,b.jsx)("th",{children:"Material Unit"}),(0,b.jsx)("th",{children:"Material Quantity"}),(0,b.jsx)("th",{children:"Material Price"}),(0,b.jsx)("th",{children:"Material Amount"})]})}),null===A||void 0===A?void 0:A.map((e,o)=>{var l,i;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{id:"main",children:o+1}),(0,b.jsx)("td",{id:"main",children:e.name}),(0,b.jsx)("td",{id:"main",children:""}),(0,b.jsx)("td",{id:"main",children:""}),(0,b.jsx)("td",{id:"main",children:""}),(0,b.jsx)("td",{id:"main",children:!0===t?" ":e.amount})]},e.id),null===d||void 0===d||null===(l=d.activities)||void 0===l||null===(i=l.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name&&0!==o.materials.length}))||void 0===i?void 0:i.map((e,l)=>{var i,n,r,a;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{id:"activities",children:"".concat(o+1,".").concat(l+1)}),(0,b.jsx)("td",{id:"activities",children:e.name}),(0,b.jsx)("td",{id:"activities",scope:"col",style:{color:"white"},children:null===(i=Number(e.estimationQuantity))||void 0===i?void 0:i.toLocaleString()}),(0,b.jsx)("td",{id:"activities",scope:"col",style:{color:"white"},children:e.estimationUnit}),(0,b.jsx)("td",{id:"activities",scope:"col",style:{color:"white"},children:null===(n=Number(e.estimationRate))||void 0===n?void 0:n.toLocaleString()}),(0,b.jsx)("td",{id:"activities",children:!0===t?" ":null===(r=Number(e.estimationTotalAmount))||void 0===r?void 0:r.toLocaleString()})]},e.id),null===(a=e.materials)||void 0===a?void 0:a.map((e,o)=>{var l,i,n;return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"M".concat(o+1)}),(0,b.jsx)("td",{children:e.name}),(0,b.jsx)("td",{children:e.unit}),(0,b.jsx)("td",{children:null===(l=Number(e.UserEstimationLibrary.materialFactorQuantity))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)("td",{children:!0===t?" ":null===(i=Number(e.price))||void 0===i?void 0:i.toLocaleString()}),(0,b.jsx)("td",{children:!0===t?" ":null===(n=Number(e.UserEstimationLibrary.materialTotalAmount))||void 0===n?void 0:n.toLocaleString()})]},e.id)})]})})]})})]})]})},w=()=>{const[e,o]=(0,i.useState)(1);return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{style:{backgroundColor:"#e2e5de",padding:"20px",margin:"-10px",border:"2px solid white"},children:[(0,b.jsxs)(v.by,{style:{marginBottom:"20px",backgroundColor:"white",fontWeight:"bold",cursor:"pointer",width:"fit-content"},variant:"pills",role:"tablist",children:[(0,b.jsx)(v.g9,{children:(0,b.jsx)(v.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:1===e?"rgb(1, 87, 155)":"",color:1===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:1===e,onClick:()=>o(1),children:"GENERAL REPORT"})}),(0,b.jsx)(v.g9,{children:(0,b.jsx)(v.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:2===e?"rgb(1, 87, 155)":"",color:2===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:2===e,onClick:()=>o(2),children:"SUMMARY REPORT"})})]}),(0,b.jsxs)(v.eL,{children:[(0,b.jsx)(v.x1,{role:"tabpanel","aria-labelledby":"home-tab",visible:1===e,children:(0,b.jsx)(C,{})}),(0,b.jsx)(v.x1,{role:"tabpanel","aria-labelledby":"profile-tab",visible:2===e,children:(0,b.jsx)(y,{})})]})]})})},A=()=>{var e,o,t,n,a;const[c,d]=(0,i.useState)(!1),{singleProject:s}=(0,u.d4)(h.Br),m=null===s||void 0===s||null===(e=s.activities)||void 0===e?void 0:e.map(e=>{var o;return null===(o=e.category)||void 0===o?void 0:o.name}),y=null===s||void 0===s||null===(o=s.activities)||void 0===o||null===(t=o.map((e,o)=>{var t;return{id:o+1,name:null===(t=e.category)||void 0===t?void 0:t.name}}))||void 0===t?void 0:t.filter((e,o)=>{if(m.indexOf(e.name)===o)return e}),g=null===y||void 0===y?void 0:y.map((e,o)=>{var t,l,i,n,r;return{id:o+1,name:e.name,unit:" ",quantity:" ",rate:" ",calculateAmount:null===s||void 0===s||null===(t=s.activities)||void 0===t||null===(l=t.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===l?void 0:l.map(e=>parseFloat(e.equipmentCostPerWorkItem||0)).reduce((e,o)=>e+o,0),amount:null===(i=Number(null===s||void 0===s||null===(n=s.activities)||void 0===n||null===(r=n.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===r?void 0:r.map(e=>parseFloat(e.equipmentCostPerWorkItem||0)).reduce((e,o)=>e+o,0)))||void 0===i?void 0:i.toLocaleString(),_props:{bgColor:"#e2e5de"}}});let j=[];null===s||void 0===s||null===(n=s.activities)||void 0===n||n.map(e=>j=j.concat(e.equipments));const S=[...new Map(null===(a=j)||void 0===a?void 0:a.map(e=>[e.name,e])).values()].map(e=>{var o,t,i,n;return(0,l.A)((0,l.A)({},e),{},{sumQuantities:null===(o=j)||void 0===o||null===(t=o.filter(o=>o.name===e.name))||void 0===t?void 0:t.map(e=>parseFloat(e.UserEstimationLibrary.equipmentPerformance)).reduce((e,o)=>e+o,0),sumAmount:(null===(i=j)||void 0===i||null===(n=i.filter(o=>o.name===e.name))||void 0===n?void 0:n.map(e=>parseFloat(e.UserEstimationLibrary.equipmentPerformance)).reduce((e,o)=>e+o,0))*e.hireRatePrice})}),C=null===g||void 0===g?void 0:g.map(e=>e.calculateAmount).reduce((e,o)=>e+o,0);return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{style:{backgroundColor:"#e2e5de",padding:"20px",margin:"-10px"},children:[(0,b.jsxs)("div",{style:{display:"flex",marginBottom:"10px"},children:[(0,b.jsx)(v.Q_,{onClick:()=>{const e=new f.default;e.setFontSize(15);let o={startY:70,head:[["ID","Equipments","Equipment Unit","Equipment Quantity","Equipment Amount"]],body:null===S||void 0===S?void 0:S.map((e,o)=>["E".concat(o+1),e.name,e.unit,e.sumQuantities,!0===c?" ":e.sumAmount])};e.autoTable({theme:"plain",headStyles:{fontSize:13},bodyStyles:{fontSize:13,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["SUMMARIZED EQUIPMENT REPORT"]]}),e.autoTable({theme:"plain",styles:{fontSize:12,fillColor:"#01579b",textColor:"#ffffff"},body:[["Project Name:   ".concat(null===s||void 0===s?void 0:s.name)],["Client:    ".concat(null===s||void 0===s?void 0:s.client)],["Contractor:    ".concat(null===s||void 0===s?void 0:s.contractor)],["DATE:   ".concat(r()(null===s||void 0===s?void 0:s.createdAt).format("DD-MM-YYYY h:mm"))]]}),e.autoTable(o),e.autoTable({theme:"plain",headStyles:{fontSize:12},bodyStyles:{fontSize:12,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["GRAND TOTAL: ".concat(!0===c?" ":Number(C).toLocaleString()," ").concat(null===s||void 0===s?void 0:s.currencyCode)]]}),e.save("Equipment-Summary-Report.pdf")},color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",marginLeft:"2px"},children:"Download"}),(0,b.jsx)(v.Q_,{onClick:()=>d(!c),color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",whiteSpace:"nowrap",marginLeft:"3px"},children:!1===c?"Hide rate":"UnHide rate"})]}),(0,b.jsxs)(v.UF,{xs:12,style:{backgroundColor:"#fbfbf8"},children:[(0,b.jsx)(v.V0,{style:{backgroundColor:"#01579b",color:"white",textAlign:"center",fontSize:"0.95rem"},children:(0,b.jsx)("strong",{children:"Equipments Summary "})}),(0,b.jsxs)(v._v,{hover:!0,bordered:!0,borderColor:"info",style:{fontSize:"0.80rem"},children:[(0,b.jsx)(v.wV,{children:(0,b.jsxs)(v.YI,{style:{backgroundColor:"#01579b",color:"white"},children:[(0,b.jsx)(v.$s,{style:{color:"white",fontSize:"0.85rem"},scope:"col",children:"ID"}),(0,b.jsx)(v.$s,{style:{color:"white",fontSize:"0.85rem"},scope:"col",children:"Equipments"}),(0,b.jsx)(v.$s,{style:{color:"white",fontSize:"0.85rem"},scope:"col",children:"Equipment Unit"}),(0,b.jsx)(v.$s,{style:{color:"white",fontSize:"0.85rem"},scope:"col",children:"Equipment Quantity"}),(0,b.jsx)(v.$s,{style:{color:"white",fontSize:"0.85rem"},scope:"col",children:"Equipment Price"}),(0,b.jsx)(v.$s,{style:{color:"white",fontSize:"0.85rem"},scope:"col",children:"Amount"})]})}),(0,b.jsx)(v.jS,{children:null===S||void 0===S?void 0:S.map((e,o)=>{var t,l,i;return(0,b.jsxs)(v.YI,{children:[(0,b.jsx)(v.cC,{children:"E".concat(o+1)}),(0,b.jsx)(v.cC,{children:e.name}),(0,b.jsx)(v.cC,{children:e.unit}),(0,b.jsx)(v.cC,{children:null===(t=Number(e.sumQuantities))||void 0===t?void 0:t.toLocaleString()}),(0,b.jsx)(v.cC,{children:!0===c?" ":null===(l=Number(e.hireRatePrice))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)(v.cC,{children:!0===c?" ":null===(i=Number(null===e||void 0===e?void 0:e.sumAmount))||void 0===i?void 0:i.toLocaleString()})]},e.id+987)})})]})]}),(0,b.jsx)("div",{style:{backgroundColor:"#01579b",width:"100%"},children:(0,b.jsxs)(x.A,{children:[(0,b.jsx)(p.A,{style:{paddingLeft:"21px",fontSize:"0.85rem",color:"white",fontWeight:"bold"},colSpan:3,children:"TOTAL EQUIPMENTS:"}),(0,b.jsx)(p.A,{style:{fontSize:"0.85rem",color:"white",fontWeight:"bold",float:"right"},colSpan:4,children:"".concat(!0===c?" ":Number(C).toLocaleString()," ").concat(null===s||void 0===s?void 0:s.currencyCode)})]})})]})})};var k=t(55271),z=t(69596),L=t(82053),E=t(84494);const N=e=>{const o=e=>{const o=new ArrayBuffer(e.length),t=new Uint8Array(o);for(let l=0;l!==e.length;++l)t[l]=e.charCodeAt(l);return o},t=()=>{let t=[{A:"Enrolment No.",B:"Student Name",C:"Parent Name",D:"Class",E:"Subject",F:"Division",G:"Result Status"}];t=[{A:"Student Details"}].concat(t).concat([""]).concat([{A:"Marks"}]).concat([{A:"Enrolment No.",B:"Student Name",C:"Mathematics",D:"Physics",E:"Chemistry",F:"English",G:"Computer Science",H:"Total"}]);const i=[{A:"Students and Marks details"},{},...t],n=k.Wp.book_new();k.Wp.book_append_sheet(n,e.excelSheet,"student_report");const r=(e=>{const t=k.M9(e,{bookType:"xlsx",bookSST:!1,type:"binary"});return new Blob([o(t)],{type:"application/octet-stream"})})(n);var a=[];i.forEach((e,o)=>"Enrolment No."===e.A?a.push(o):null);const c={titleCell:"A2",titleRange:"A1:H2",tbodyRange:"A3:H".concat(i.length),theadRange:(null===a||void 0===a?void 0:a.length)>=1?"A".concat(a[0]+1,":G").concat(a[0]+1):null,theadRange1:(null===a||void 0===a?void 0:a.length)>=2?"A".concat(a[1]+1,":H").concat(a[1]+1):null,tFirstColumnRange:(null===a||void 0===a?void 0:a.length)>=1?"A".concat(a[0]+1,":A").concat(a[0]+1):null,tLastColumnRange:(null===a||void 0===a?void 0:a.length)>=1?"G".concat(a[0]+1,":G").concat(a[0]+1):null,tFirstColumnRange1:(null===a||void 0===a?void 0:a.length)>=1?"A".concat(a[1]+1,":A").concat(a[1]+1):null,tLastColumnRange1:(null===a||void 0===a?void 0:a.length)>=1?"H".concat(a[0]+1,":H").concat(a[1]+1):null};return l(r,c)},l=(e,o)=>E.fromDataAsync(e).then(e=>(e.sheets().forEach(e=>{var o;e.usedRange().style({fontFamily:"Arial",verticalAlignment:"center"}),e.column("A").width(10).style({horizontalAlignment:"left"}),e.column("B").width(55),e.column("C").width(20).style({horizontalAlignment:"center"}),e.column("D").width(20).style({horizontalAlignment:"center"}),e.column("E").width(20).style({horizontalAlignment:"center"}),e.column("F").width(20).style({horizontalAlignment:"center"}),e.range("A1:F1").style({bold:!0,italic:!0,fill:"01579b",fontColor:"ffffff"}),void 0===(null===(o=e.row()._cells[5])||void 0===o?void 0:o._value)&&e.row().style({bold:!0,italic:!0}),console.log("hhh",null===e||void 0===e?void 0:e._rows.map(e=>null===e||void 0===e?void 0:e._cells.map(e=>e)[3]))}),e.outputAsync().then(e=>URL.createObjectURL(e))));return(0,b.jsx)(v.Q_,{style:{fontWeight:500,margin:"-10px",color:"white",fontSize:"12px"},onClick:()=>{t().then(e=>{const o=document.createElement("a");o.setAttribute("href",e),o.setAttribute("download","boq.xlsx"),o.click(),o.remove()})},color:"info",size:"sm",children:"Export as CSV"})},_=()=>{var e,o;const[t,l]=(0,i.useState)(),[n,a]=(0,i.useState)([]),c=(0,u.wA)(),{singleProject:d}=(0,u.d4)(h.Br),[s,y]=(0,i.useState)((0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Expand "}),(0,b.jsx)(j.g,{icon:g.tdl})]})),[C,w]=i.useState(null),[A,E]=(0,i.useState)(!1),_=Boolean(C),T=_?"simple-popover":void 0;(0,i.useEffect)(()=>{c((0,m.jI)())},[c]),(0,i.useEffect)(()=>{c((0,h.cf)())},[c]);const R=null===d||void 0===d||null===(e=d.activities)||void 0===e||null===(o=e.map((e,o)=>{var t;return{id:o+1,name:null===(t=e.category)||void 0===t?void 0:t.name,equipmentExist:e.equipments.length}}))||void 0===o?void 0:o.filter((e,o)=>{if(e.equipmentExist>0)return e}),P=[...new Map(null===R||void 0===R?void 0:R.map(e=>[e.name,e])).values()],I=null===P||void 0===P?void 0:P.map((e,o)=>{var t;return{allIndex:o,id:o+1,name:e.name,unit:" ",quantity:" ",rate:" ",hidden:" ",calculateAmount:null===d||void 0===d?void 0:d.activities.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}).map(e=>parseFloat(e.equipmentCostPerWorkItem||0)).reduce((e,o)=>e+o,0),amount:null===(t=Number(null===d||void 0===d?void 0:d.activities.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}).map(e=>parseFloat(e.equipmentCostPerWorkItem||0)).reduce((e,o)=>e+o,0)))||void 0===t?void 0:t.toLocaleString(),_props:{bgColor:"#e2e5de"}}}),W=null===I||void 0===I?void 0:I.map(e=>e.calculateAmount).reduce((e,o)=>e+o,0);const Q=[{key:"id",filter:!1,sorter:!1,_props:{className:"fw-semibold"},_style:{width:"8%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"name",label:"Items",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"35%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"unit",label:"Equipment Unit",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"20%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"quantity",label:"Equipment Quantity",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"20%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"rate",label:"Equipment Price",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"20%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:!0===A?"hidden":"amount",label:"Amount",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"5%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"show_details",label:"",_style:{width:"3%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"},filter:!1,sorter:!1,_props:{color:"primary",className:"fw-semibold"}}],U=null===I||void 0===I?void 0:I.map(e=>e.allIndex);return console.log("singleProject?.activities",null===d||void 0===d?void 0:d.activities),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{style:{display:"flex"},children:[(0,b.jsx)(v.Q_,{onClick:e=>{w(e.currentTarget);const o=document.getElementById("my-table"),t=k.Wp.table_to_book(o);l(t.Sheets.Sheet1)},color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",marginLeft:"2px"},children:"Download"}),(0,b.jsx)(z.Ay,{id:T,open:_,anchorEl:C,onClose:()=>{w(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,b.jsxs)(L.A,{sx:{p:2},children:[(0,b.jsx)(v.Q_,{style:{fontWeight:500,color:"white",fontSize:"12px",marginRight:"15px"},onClick:function(){var e=new f.default;e.autoTable({theme:"plain",headStyles:{fontSize:15},bodyStyles:{fontSize:15,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["ITEMISED EQUIPMENT REPORT"]]}),e.autoTable({theme:"plain",styles:{fontSize:12,fillColor:"#01579b",textColor:"#ffffff"},body:[["Project Name:   ".concat(null===d||void 0===d?void 0:d.name)],["Client:    ".concat(null===d||void 0===d?void 0:d.client)],["Contractor:    ".concat(null===d||void 0===d?void 0:d.contractor)],["DATE:   ".concat(r()(null===d||void 0===d?void 0:d.createdAt).format("DD-MM-YYYY h:mm"))]]}),e.autoTable({theme:"grid",html:"#my-table",didParseCell(e){"main"===e.cell.raw.id&&(e.cell.styles.textColor="black",e.cell.styles.fillColor="#01579b",e.cell.styles.textColor="#ffffff",e.cell.styles.fontSize=10),"activities"===e.cell.raw.id&&(e.cell.styles.textColor="black",e.cell.styles.fillColor="#e2e5de",e.cell.styles.textColor="black",e.cell.styles.fontSize=10)}}),e.autoTable({theme:"plain",styles:{fontSize:13,fontStyle:"italic"},body:[["GRAND TOTAL: ".concat(!0===A?" ":Number(W).toLocaleString()," ").concat(null===d||void 0===d?void 0:d.currencyCode)]]}),e.save("General-Equipment-Report.pdf")},color:"info",size:"sm",children:"Export as PDF"})," "," "," "," ",(0,b.jsx)(N,{excelSheet:t})]})}),(0,b.jsx)(v.Q_,{onClick:()=>{const e=n.indexOf(1);let o=n.slice();-1!==e?(y((0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Expand "}),(0,b.jsx)(j.g,{icon:g.tdl})]})),o.splice(o)):(y((0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Collapse "}),(0,b.jsx)(j.g,{icon:g.GF6})]})),o=[...U,1]),a(o)},color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",marginLeft:"3px"},children:s}),(0,b.jsx)(v.Q_,{onClick:()=>E(!A),color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",whiteSpace:"nowrap",marginLeft:"3px"},children:!1===A?"Hide rate":"UnHide rate"})]}),(0,b.jsxs)("div",{style:{backgroundColor:"#e2e5de",padding:"20px",margin:"-10px",fontSize:"0.75rem"},children:[(0,b.jsx)("div",{style:{backgroundColor:"#fbfbf8",fontWeight:"bold",fontSize:"0.70rem"},children:(0,b.jsx)(S.Pd,{columns:Q,items:I,scopedColumns:{show_details:e=>(0,b.jsx)("td",{className:"py-2",children:(0,b.jsx)("div",{onClick:()=>{(e=>{const o=n.indexOf(e);let t=n.slice();-1!==o?t.splice(o,1):t=[...n,e],a(t)})(e._id)},children:n.includes(e._id)?(0,b.jsx)(j.g,{icon:g.GF6}):(0,b.jsx)(j.g,{icon:g.tdl})})}),details:e=>{var o,t;return(0,b.jsx)(v.x8,{visible:n.includes(e._id),children:null===d||void 0===d||null===(o=d.activities)||void 0===o||null===(t=o.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name&&0!==o.equipments.length}))||void 0===t?void 0:t.map((o,t)=>{var l,i,n,r;return(0,b.jsxs)(v._v,{small:!0,children:[(0,b.jsx)(v.wV,{style:{backgroundColor:"#3c73a8",color:"white",borderBottom:"2px solid #cccccc",fontSize:"0.85rem"},children:(0,b.jsxs)(v.YI,{children:[(0,b.jsxs)(v.$s,{scope:"col",style:{color:"white"},children:[e.id," ","."," ",t+1]}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:o.name}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:null===(l=Number(o.estimationQuantity))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:o.estimationUnit}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:null===(i=Number(o.estimationRate))||void 0===i?void 0:i.toLocaleString()}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:!0===A?" ":null===(n=Number(o.equipmentCostPerWorkItem))||void 0===n?void 0:n.toLocaleString()})]})}),(0,b.jsx)(v.jS,{children:null===(r=o.equipments)||void 0===r?void 0:r.map((e,o)=>{var t,l;return(0,b.jsxs)(v.YI,{style:{fontSize:"0.70rem",fontWeight:550},children:[(0,b.jsxs)(v.cC,{style:{width:"5%"},children:["E"," ",o+1]},o+790),(0,b.jsx)(v.cC,{style:{width:"20%",textAlign:"left"},children:e.name}),(0,b.jsx)(v.cC,{style:{width:"10%"},children:e.unit}),(0,b.jsx)(v.cC,{style:{width:"10%",textAlign:"left"},children:e.UserEstimationLibrary.equipmentPerformance}),(0,b.jsx)(v.cC,{style:{width:"8%",textAlign:"left"},children:!0===A?" ":null===(t=Number(e.hireRatePrice))||void 0===t?void 0:t.toLocaleString()}),(0,b.jsx)(v.cC,{style:{width:"5%",textAlign:"left"},children:!0===A?" ":null===(l=Number(e.UserEstimationLibrary.equipmentTotalAmount))||void 0===l?void 0:l.toLocaleString()})]},o+659)})})]},t)})})}},tableProps:{responsive:!0}})}),(0,b.jsx)("div",{style:{backgroundColor:"#01579b",width:"100%"},children:(0,b.jsxs)(x.A,{children:[(0,b.jsx)(p.A,{style:{paddingLeft:"21px",fontSize:"0.95rem",color:"white",fontWeight:"bold"},colSpan:3,children:"TOTAL EQUIPMENTS:"}),(0,b.jsx)(p.A,{style:{fontSize:"0.95rem",color:"white",fontWeight:"bold",float:"right"},colSpan:4,children:"".concat(!0===A?" ":Number(W).toLocaleString()," ").concat(null===d||void 0===d?void 0:d.currencyCode)})]})}),(0,b.jsxs)("table",{id:"my-table",style:{display:"none"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{backgroundColor:"red",color:"white"},children:[(0,b.jsx)("th",{children:"Id"}),(0,b.jsx)("th",{children:"Items Description"}),(0,b.jsx)("th",{children:"Equipment Unit"}),(0,b.jsx)("th",{children:"Equipment Quantity"}),(0,b.jsx)("th",{children:"Equipment Rate"}),(0,b.jsx)("th",{children:"Equipment Amount"})]})}),null===I||void 0===I?void 0:I.map((e,o)=>{var t,l;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{id:"main",children:o+1}),(0,b.jsx)("td",{id:"main",children:e.name}),(0,b.jsx)("td",{id:"main",children:""}),(0,b.jsx)("td",{id:"main",children:""}),(0,b.jsx)("td",{id:"main",children:""}),(0,b.jsx)("td",{id:"main",children:!0===A?" ":e.amount})]},e.id),null===d||void 0===d||null===(t=d.activities)||void 0===t||null===(l=t.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name&&0!==o.equipments.length}))||void 0===l?void 0:l.map((e,t)=>{var l,i,n,r;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{id:"activities",children:"".concat(o+1,".").concat(t+1)}),(0,b.jsx)("td",{id:"activities",children:e.name}),(0,b.jsx)("td",{id:"activities",scope:"col",style:{color:"white"},children:null===(l=Number(e.estimationQuantity))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)("td",{id:"activities",scope:"col",style:{color:"white"},children:e.estimationUnit}),(0,b.jsx)("td",{id:"activities",scope:"col",style:{color:"white"},children:null===(i=Number(e.estimationRate))||void 0===i?void 0:i.toLocaleString()}),(0,b.jsx)("td",{id:"activities",children:!0===A?" ":null===(n=Number(e.estimationTotalAmount))||void 0===n?void 0:n.toLocaleString()})]},e.id),null===(r=e.equipments)||void 0===r?void 0:r.map((e,o)=>{var t,l,i;return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"E_".concat(o+1)}),(0,b.jsx)("td",{children:e.name}),(0,b.jsx)("td",{children:e.unit}),(0,b.jsx)("td",{children:null===(t=Number(e.UserEstimationLibrary.equipmentPerformance))||void 0===t?void 0:t.toLocaleString()}),(0,b.jsx)("td",{children:!0===A?" ":null===(l=Number(e.hireRatePrice))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)("td",{children:!0===A?" ":null===(i=Number(e.UserEstimationLibrary.equipmentTotalAmount))||void 0===i?void 0:i.toLocaleString()})]},e.id)})]})})]})})]})]})]})},T=()=>{const[e,o]=(0,i.useState)(1);return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{style:{backgroundColor:"#e2e5de",padding:"20px",margin:"-10px",border:"2px solid white"},children:[(0,b.jsxs)(v.by,{style:{marginBottom:"20px",backgroundColor:"white",fontSize:"0.80rem",fontWeight:500,cursor:"pointer",width:"fit-content"},variant:"pills",role:"tablist",children:[(0,b.jsx)(v.g9,{children:(0,b.jsx)(v.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:1===e?"rgb(1, 87, 155)":"",color:1===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:1===e,onClick:()=>o(1),children:"GENERAL REPORT"})}),(0,b.jsx)(v.g9,{children:(0,b.jsx)(v.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:2===e?"rgb(1, 87, 155)":"",color:2===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:2===e,onClick:()=>o(2),children:"SUMMARY REPORT"})})]}),(0,b.jsxs)(v.eL,{children:[(0,b.jsx)(v.x1,{role:"tabpanel","aria-labelledby":"home-tab",visible:1===e,children:(0,b.jsx)(_,{})}),(0,b.jsx)(v.x1,{role:"tabpanel","aria-labelledby":"profile-tab",visible:2===e,children:(0,b.jsx)(A,{})})]})]})})},R=()=>{var e,o,t,n,a;const[c,d]=(0,i.useState)(!1),{singleProject:s}=(0,u.d4)(h.Br),m=null===s||void 0===s||null===(e=s.activities)||void 0===e?void 0:e.map(e=>{var o;return null===(o=e.category)||void 0===o?void 0:o.name}),y=null===s||void 0===s||null===(o=s.activities)||void 0===o||null===(t=o.map((e,o)=>{var t;return{id:o+1,name:null===(t=e.category)||void 0===t?void 0:t.name}}))||void 0===t?void 0:t.filter((e,o)=>{if(m.indexOf(e.name)===o)return e}),g=null===y||void 0===y?void 0:y.map((e,o)=>{var t,l,i,n,r;return{id:o+1,name:e.name,unit:" ",quantity:" ",rate:" ",calculateAmount:null===s||void 0===s||null===(t=s.activities)||void 0===t||null===(l=t.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===l?void 0:l.map(e=>parseFloat(e.labourCostperWorkItem||0)).reduce((e,o)=>e+o,0),amount:null===(i=Number(null===s||void 0===s||null===(n=s.activities)||void 0===n||null===(r=n.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===r?void 0:r.map(e=>parseFloat(e.labourCostperWorkItem||0)).reduce((e,o)=>e+o,0)))||void 0===i?void 0:i.toLocaleString(),_props:{bgColor:"#e2e5de"}}});let j=[];null===s||void 0===s||null===(n=s.activities)||void 0===n||n.map(e=>j=j.concat(e.labours));const S=[...new Map(null===(a=j)||void 0===a?void 0:a.map(e=>[e.name,e])).values()].map(e=>{var o,t,i,n;return(0,l.A)((0,l.A)({},e),{},{sumQuantities:null===(o=j)||void 0===o||null===(t=o.filter(o=>o.name===e.name))||void 0===t?void 0:t.map(e=>parseFloat(e.UserEstimationLibrary.labourFactorQuantity)).reduce((e,o)=>e+o,0),sumAmount:(null===(i=j)||void 0===i||null===(n=i.filter(o=>o.name===e.name))||void 0===n?void 0:n.map(e=>parseFloat(e.UserEstimationLibrary.labourFactorQuantity)).reduce((e,o)=>e+o,0))*e.wages})}),C=null===g||void 0===g?void 0:g.map(e=>e.calculateAmount).reduce((e,o)=>e+o,0);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{style:{display:"flex",marginBottom:"10px"},children:[(0,b.jsx)(v.Q_,{onClick:()=>{const e=new f.default;e.setFontSize(15);let o={startY:70,head:[["ID","Labours","Labour Unit","Labour Quantity","Labour Amount"]],body:null===S||void 0===S?void 0:S.map((e,o)=>["L".concat(o+1),e.name,e.unit,e.sumQuantities,!0===c?" ":e.sumAmount])};e.autoTable({theme:"plain",headStyles:{fontSize:13},bodyStyles:{fontSize:13,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["SUMMARIZED LABOUR REPORT"]]}),e.autoTable({theme:"plain",styles:{fontSize:12,fillColor:"#01579b",textColor:"#ffffff"},body:[["Project Name:   ".concat(null===s||void 0===s?void 0:s.name)],["Client:    ".concat(null===s||void 0===s?void 0:s.client)],["Contractor:    ".concat(null===s||void 0===s?void 0:s.contractor)],["DATE:   ".concat(r()(null===s||void 0===s?void 0:s.createdAt).format("DD-MM-YYYY h:mm"))]]}),e.autoTable(o),e.autoTable({theme:"plain",headStyles:{fontSize:12},bodyStyles:{fontSize:12,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["GRAND TOTAL: ".concat(!0===c?" ":Number(C).toLocaleString()," ").concat(null===s||void 0===s?void 0:s.currencyCode)]]}),e.save("report.pdf")},color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",marginLeft:"2px"},children:"Download"}),(0,b.jsx)(v.Q_,{onClick:()=>d(!c),color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",whiteSpace:"nowrap",marginLeft:"3px"},children:!1===c?"Hide rate":"UnHide rate"})]}),(0,b.jsxs)(v.UF,{xs:12,style:{backgroundColor:"#fbfbf8"},children:[(0,b.jsx)(v.V0,{style:{backgroundColor:"#01579b",color:"white",textAlign:"center",fontSize:"0.80rem"},children:(0,b.jsx)("strong",{children:"Labours Summary "})}),(0,b.jsxs)(v._v,{hover:!0,bordered:!0,borderColor:"info",style:{fontSize:"0.80rem"},children:[(0,b.jsx)(v.wV,{children:(0,b.jsxs)(v.YI,{style:{backgroundColor:"#01579b",color:"white"},children:[(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"ID"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"Labours"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"Labour Unit"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"Labour Quantity"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"Labour Price"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"Amount"})]})}),(0,b.jsx)(v.jS,{children:null===S||void 0===S?void 0:S.map((e,o)=>{var t,l,i;return(0,b.jsxs)(v.YI,{children:[(0,b.jsx)(v.cC,{children:"L".concat(o+1)}),(0,b.jsx)(v.cC,{children:e.name}),(0,b.jsx)(v.cC,{children:e.unit}),(0,b.jsx)(v.cC,{children:null===(t=Number(e.sumQuantities))||void 0===t?void 0:t.toLocaleString()}),(0,b.jsx)(v.cC,{children:!0===c?" ":null===(l=Number(e.wages))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)(v.cC,{children:!0===c?" ":null===(i=Number(e.sumAmount))||void 0===i?void 0:i.toLocaleString()})]},e.id)})})]})]}),(0,b.jsx)("div",{style:{backgroundColor:"#01579b",width:"100%"},children:(0,b.jsxs)(x.A,{children:[(0,b.jsx)(p.A,{style:{paddingLeft:"21px",fontSize:"0.85rem",color:"white",fontWeight:"bold"},colSpan:3,children:"TOTAL LABOURS:"}),(0,b.jsx)(p.A,{style:{fontSize:"0.85rem",color:"white",fontWeight:"bold",float:"right"},colSpan:4,children:"".concat(!0===c?" ":Number(C).toLocaleString()," ").concat(null===s||void 0===s?void 0:s.currencyCode)})]})})]})},P=()=>{var e,o;const[t,l]=(0,i.useState)([]),[n,a]=(0,i.useState)(!1),[c,d]=(0,i.useState)((0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Expand "}),(0,b.jsx)(j.g,{icon:g.tdl})]})),s=(0,u.wA)(),{singleProject:y}=(0,u.d4)(h.Br);(0,i.useEffect)(()=>{s((0,m.jI)())},[s]),(0,i.useEffect)(()=>{s((0,h.cf)())},[s]);const C=null===y||void 0===y||null===(e=y.activities)||void 0===e||null===(o=e.map((e,o)=>{var t;return{id:o+1,name:null===(t=e.category)||void 0===t?void 0:t.name,labourExist:e.labours.length}}))||void 0===o?void 0:o.filter((e,o)=>{if(e.labourExist>0)return e}),w=[...new Map(null===C||void 0===C?void 0:C.map(e=>[e.name,e])).values()],A=null===w||void 0===w?void 0:w.map((e,o)=>{var t,l,i,n,r;return{allIndex:o,id:o+1,name:e.name,unit:" ",quantity:" ",rate:" ",hidden:" ",calculateAmount:null===y||void 0===y||null===(t=y.activities)||void 0===t||null===(l=t.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===l?void 0:l.map(e=>parseFloat(e.labourCostperWorkItem||0)).reduce((e,o)=>e+o,0),amount:null===(i=Number(null===y||void 0===y||null===(n=y.activities)||void 0===n||null===(r=n.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===r?void 0:r.map(e=>parseFloat(e.labourCostperWorkItem||0)).reduce((e,o)=>e+o,0)))||void 0===i?void 0:i.toLocaleString(),_props:{bgColor:"#e2e5de"}}}),k=null===A||void 0===A?void 0:A.map(e=>e.allIndex),z=null===A||void 0===A?void 0:A.map(e=>e.calculateAmount).reduce((e,o)=>e+o,0);const L=[{key:"id",filter:!1,sorter:!1,_props:{className:"fw-semibold"},_style:{width:"8%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"name",label:"Items",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"35%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"unit",label:"Labour Unit",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"20%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"quantity",label:"Labour Quantity",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"20%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"rate",label:"Labour Price",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"20%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:!0===n?"hidden":"amount",label:"amount",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"5%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"show_details",label:"",_style:{width:"3%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"},filter:!1,sorter:!1,_props:{color:"primary",className:"fw-semibold"}}];return(0,b.jsxs)("div",{style:{backgroundColor:"#e2e5de",padding:"20px",margin:"-10px",fontSize:"0.75rem"},children:[(0,b.jsxs)("div",{style:{display:"flex",marginBottom:"4px"},children:[(0,b.jsx)(v.Q_,{onClick:function(){var e=new f.default;e.autoTable({theme:"plain",headStyles:{fontSize:13},bodyStyles:{fontSize:13,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["ITEMISED LABOUR REPORT"]]}),e.autoTable({theme:"plain",styles:{fontSize:12,fillColor:"#01579b",textColor:"#ffffff"},body:[["Project Name:   ".concat(null===y||void 0===y?void 0:y.name)],["Client:    ".concat(null===y||void 0===y?void 0:y.client)],["Contractor:    ".concat(null===y||void 0===y?void 0:y.contractor)],["DATE:   ".concat(r()(null===y||void 0===y?void 0:y.createdAt).format("DD-MM-YYYY h:mm"))]]}),e.autoTable({theme:"grid",html:"#labour-table",didParseCell(e){"main"===e.cell.raw.id&&(e.cell.styles.textColor="black",e.cell.styles.fillColor="#01579b",e.cell.styles.textColor="#ffffff",e.cell.styles.fontSize=10),"activities"===e.cell.raw.id&&(e.cell.styles.textColor="black",e.cell.styles.fillColor="#e2e5de",e.cell.styles.textColor="black",e.cell.styles.fontSize=10)}}),e.autoTable({theme:"plain",styles:{fontSize:15,fontStyle:"italic"},body:[["GRAND TOTAL: ".concat(!0===n?" ":Number(z).toLocaleString()," ").concat(null===y||void 0===y?void 0:y.currencyCode)]]}),e.save("Labour-General-Report.pdf")},color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",marginLeft:"2px"},children:"Download"}),(0,b.jsx)(v.Q_,{onClick:()=>{const e=t.indexOf(1);let o=t.slice();-1!==e?(d((0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Expand "}),(0,b.jsx)(j.g,{icon:g.tdl})]})),o.splice(o)):(d((0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Collapse"}),(0,b.jsx)(j.g,{icon:g.GF6})]})),o=[...k,1],console.log(o)),l(o)},color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",marginLeft:"3px"},children:c}),(0,b.jsx)(v.Q_,{onClick:()=>a(!n),color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",whiteSpace:"nowrap",marginLeft:"3px"},children:!1===n?"Hide rate":"UnHide rate"})]}),(0,b.jsx)("div",{style:{backgroundColor:"#fbfbf8",fontWeight:"bold"},children:(0,b.jsx)(S.Pd,{columns:L,items:A,scopedColumns:{show_details:e=>(0,b.jsx)("td",{className:"py-2",children:(0,b.jsx)("div",{onClick:()=>{(e=>{const o=t.indexOf(e);let i=t.slice();-1!==o?i.splice(o,1):i=[...t,e],l(i)})(e._id)},children:t.includes(e._id)?(0,b.jsx)(j.g,{icon:g.GF6}):(0,b.jsx)(j.g,{icon:g.tdl})})}),details:e=>{var o,l;return(0,b.jsx)(v.x8,{visible:t.includes(e._id),children:null===y||void 0===y||null===(o=y.activities)||void 0===o||null===(l=o.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name&&0!==o.labours.length}))||void 0===l?void 0:l.map((o,t)=>{var l,i,r,a;return(0,b.jsxs)(v._v,{small:!0,children:[(0,b.jsx)(v.wV,{style:{backgroundColor:"#3c73a8",color:"white",borderBottom:"2px solid #cccccc"},children:(0,b.jsxs)(v.YI,{children:[(0,b.jsxs)(v.$s,{scope:"col",style:{color:"white"},children:[e.id," ","."," ",t+1]}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:o.name}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:null===(l=Number(o.estimationQuantity))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:o.estimationUnit}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:null===(i=Number(o.estimationRate))||void 0===i?void 0:i.toLocaleString()}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:!0===n?" ":null===(r=Number(o.labourCostperWorkItem))||void 0===r?void 0:r.toLocaleString()})]})}),(0,b.jsx)(v.jS,{children:null===(a=o.labours)||void 0===a?void 0:a.map((e,o)=>{var t,l;return(0,b.jsxs)(v.YI,{children:[(0,b.jsxs)(v.cC,{style:{width:"5%"},children:["L"," ",o+1]},o+778),(0,b.jsx)(v.cC,{style:{width:"20%",textAlign:"left"},children:e.name}),(0,b.jsx)(v.cC,{style:{width:"10%"},children:e.unit}),(0,b.jsx)(v.cC,{style:{width:"10%",textAlign:"left"},children:e.UserEstimationLibrary.labourFactorQuantity}),(0,b.jsx)(v.cC,{style:{width:"8%",textAlign:"left"},children:!0===n?" ":null===(t=Number(e.wages))||void 0===t?void 0:t.toLocaleString()}),(0,b.jsx)(v.cC,{style:{width:"5%",textAlign:"left"},children:!0===n?" ":null===(l=Number(e.UserEstimationLibrary.labourTotalAmount))||void 0===l?void 0:l.toLocaleString()})]},o+622)})})]},t+687)})})}},tableProps:{responsive:!0}})}),(0,b.jsx)("div",{style:{backgroundColor:"#01579b",width:"100%"},children:(0,b.jsxs)(x.A,{children:[(0,b.jsx)(p.A,{style:{paddingLeft:"21px",fontSize:"0.95rem",color:"white",fontWeight:"bold"},colSpan:3,children:"Grand Total:"}),(0,b.jsx)(p.A,{style:{fontSize:"0.95rem",color:"white",fontWeight:"bold",float:"right"},colSpan:4,children:"".concat(!0===n?" ":Number(z).toLocaleString()," ").concat(null===y||void 0===y?void 0:y.currencyCode)})]})}),(0,b.jsxs)("table",{id:"labour-table",style:{display:"none"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{backgroundColor:"red",color:"white"},children:[(0,b.jsx)("th",{children:"Id"}),(0,b.jsx)("th",{children:"Items Description"}),(0,b.jsx)("th",{children:"labour Unit"}),(0,b.jsx)("th",{children:"labour Quantity"}),(0,b.jsx)("th",{children:"labour Price"}),(0,b.jsx)("th",{children:"labour Amount"})]})}),null===A||void 0===A?void 0:A.map((e,o)=>{var t,l;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{id:"main",children:e.id}),(0,b.jsx)("td",{id:"main",children:e.name}),(0,b.jsx)("td",{id:"main",children:""}),(0,b.jsx)("td",{id:"main",children:""}),(0,b.jsx)("td",{id:"main",children:""}),(0,b.jsx)("td",{id:"main",children:!0===n?" ":e.amount})]},e.id),null===y||void 0===y||null===(t=y.activities)||void 0===t||null===(l=t.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name&&0!==o.labours.length}))||void 0===l?void 0:l.map((e,t)=>{var l,i,r,a;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{id:"activities",children:"".concat(o+1,".").concat(t+1)}),(0,b.jsx)("td",{id:"activities",children:e.name}),(0,b.jsx)("td",{id:"activities",scope:"col",style:{color:"white"},children:null===(l=Number(e.estimationQuantity))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)("td",{id:"activities",scope:"col",style:{color:"white"},children:e.estimationUnit}),(0,b.jsx)("td",{id:"activities",scope:"col",style:{color:"white"},children:null===(i=Number(e.estimationRate))||void 0===i?void 0:i.toLocaleString()}),(0,b.jsx)("td",{id:"activities",children:!0===n?" ":null===(r=Number(e.estimationTotalAmount))||void 0===r?void 0:r.toLocaleString()})]},e.id),null===(a=e.labours)||void 0===a?void 0:a.map((e,o)=>{var t,l,i;return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"L".concat(o+1)}),(0,b.jsx)("td",{children:e.name}),(0,b.jsx)("td",{children:e.unit}),(0,b.jsx)("td",{children:null===(t=Number(e.UserEstimationLibrary.labourFactorQuantity))||void 0===t?void 0:t.toLocaleString()}),(0,b.jsx)("td",{children:!0===n?" ":null===(l=Number(e.wages))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)("td",{children:!0===n?" ":null===(i=Number(e.UserEstimationLibrary.labourTotalAmount))||void 0===i?void 0:i.toLocaleString()})]},e.id)})]})})]})})]})]})},I=()=>{const[e,o]=(0,i.useState)(1);return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{style:{backgroundColor:"#e2e5de",padding:"20px",margin:"-10px",border:"2px solid white"},children:[(0,b.jsxs)(v.by,{style:{marginBottom:"20px",backgroundColor:"white",fontWeight:"bold",cursor:"pointer",width:"fit-content"},variant:"pills",role:"tablist",children:[(0,b.jsx)(v.g9,{children:(0,b.jsx)(v.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:1===e?"rgb(1, 87, 155)":"",color:1===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:1===e,onClick:()=>o(1),children:"GENERAL REPORT"})}),(0,b.jsx)(v.g9,{children:(0,b.jsx)(v.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:2===e?"rgb(1, 87, 155)":"",color:2===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:2===e,onClick:()=>o(2),children:"SUMMARY REPORT"})})]}),(0,b.jsxs)(v.eL,{children:[(0,b.jsx)(v.x1,{role:"tabpanel","aria-labelledby":"home-tab",visible:1===e,children:(0,b.jsx)(P,{})}),(0,b.jsx)(v.x1,{role:"tabpanel","aria-labelledby":"profile-tab",visible:2===e,children:(0,b.jsx)(R,{})})]})]})})},W=()=>{var e,o,t,n,a;const[c,d]=(0,i.useState)(!1),{singleProject:s}=(0,u.d4)(h.Br),m=null===s||void 0===s||null===(e=s.activities)||void 0===e?void 0:e.map(e=>{var o;return null===(o=e.category)||void 0===o?void 0:o.name}),y=null===s||void 0===s||null===(o=s.activities)||void 0===o||null===(t=o.map((e,o)=>{var t;return{id:o+1,name:null===(t=e.category)||void 0===t?void 0:t.name}}))||void 0===t?void 0:t.filter((e,o)=>{if(m.indexOf(e.name)===o)return e}),g=null===y||void 0===y?void 0:y.map((e,o)=>{var t,l,i,n,r;return{id:o+1,name:e.name,unit:" ",quantity:" ",rate:" ",calculateAmount:null===s||void 0===s||null===(t=s.activities)||void 0===t||null===(l=t.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===l?void 0:l.map(e=>parseFloat(e.subcontractorCostPerWorkItem||0)).reduce((e,o)=>e+o,0),amount:null===(i=Number(null===s||void 0===s||null===(n=s.activities)||void 0===n||null===(r=n.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===r?void 0:r.map(e=>parseFloat(e.subcontractorCostPerWorkItem||0)).reduce((e,o)=>e+o,0)))||void 0===i?void 0:i.toLocaleString(),_props:{bgColor:"#e2e5de"}}});let j=[];null===s||void 0===s||null===(n=s.activities)||void 0===n||n.map(e=>j=j.concat(e.subContractors));const S=[...new Map(null===(a=j)||void 0===a?void 0:a.map(e=>[e.name,e])).values()].map(e=>{var o,t,i,n;return(0,l.A)((0,l.A)({},e),{},{sumQuantities:null===(o=j)||void 0===o||null===(t=o.filter(o=>o.name===e.name))||void 0===t?void 0:t.map(e=>parseFloat(e.quantity)).reduce((e,o)=>e+o,0),sumAmount:(null===(i=j)||void 0===i||null===(n=i.filter(o=>o.name===e.name))||void 0===n?void 0:n.map(e=>parseFloat(e.quantity)).reduce((e,o)=>e+o,0))*e.price})}),C=null===g||void 0===g?void 0:g.map(e=>e.calculateAmount).reduce((e,o)=>e+o,0);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{style:{display:"flex",marginBottom:"10px"},children:[(0,b.jsx)(v.Q_,{onClick:()=>{const e=new f.default;e.setFontSize(15);let o={startY:70,head:[["ID","SubContractors","SubContractor Unit","SubContractor Quantity","SubContractor Amount"]],body:null===S||void 0===S?void 0:S.map((e,o)=>["S".concat(o+1),e.name,e.unit,e.sumQuantities,!0===c?" ":e.sumAmount])};e.autoTable({theme:"plain",headStyles:{fontSize:13},bodyStyles:{fontSize:13,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["SUMMARIZED SUBCONTRACTOR REPORT"]]}),e.autoTable({theme:"plain",styles:{fontSize:12,fillColor:"#01579b",textColor:"#ffffff"},body:[["Project Name:   ".concat(null===s||void 0===s?void 0:s.name)],["Client:    ".concat(null===s||void 0===s?void 0:s.client)],["Contractor:    ".concat(null===s||void 0===s?void 0:s.contractor)],["DATE:   ".concat(r()(null===s||void 0===s?void 0:s.createdAt).format("DD-MM-YYYY h:mm"))]]}),e.autoTable(o),e.autoTable({theme:"plain",headStyles:{fontSize:12},bodyStyles:{fontSize:12,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["GRAND TOTAL: ".concat(!0===c?" ":Number(C).toLocaleString()," ").concat(null===s||void 0===s?void 0:s.currencyCode)]]}),e.save("subContractor.pdf")},color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",marginLeft:"2px"},children:"Download"}),(0,b.jsx)(v.Q_,{onClick:()=>d(!c),color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",whiteSpace:"nowrap",marginLeft:"3px"},children:!1===c?"Hide rate":"UnHide rate"})]}),(0,b.jsxs)(v.UF,{xs:12,style:{backgroundColor:"#fbfbf8"},children:[(0,b.jsx)(v.V0,{style:{backgroundColor:"#01579b",color:"white",textAlign:"center",fontSize:"0.80rem"},children:(0,b.jsx)("strong",{children:"SubContractors Summary "})}),(0,b.jsxs)(v._v,{hover:!0,bordered:!0,borderColor:"info",style:{fontSize:"0.80rem"},children:[(0,b.jsx)(v.wV,{children:(0,b.jsxs)(v.YI,{style:{backgroundColor:"#01579b",color:"white"},children:[(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"ID"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"SubContractor"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"SubContractor Unit"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"SubContractor Quantity"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"SubContractor Price"}),(0,b.jsx)(v.$s,{style:{color:"white"},scope:"col",children:"Amount"})]})}),(0,b.jsx)(v.jS,{children:null===S||void 0===S?void 0:S.map((e,o)=>{var t,l,i;return(0,b.jsxs)(v.YI,{children:[(0,b.jsx)(v.cC,{children:"S".concat(o+1)}),(0,b.jsx)(v.cC,{children:e.name}),(0,b.jsx)(v.cC,{children:e.unit}),(0,b.jsx)(v.cC,{children:null===(t=Number(e.sumQuantities))||void 0===t?void 0:t.toLocaleString()}),(0,b.jsx)(v.cC,{children:!0===c?" ":null===(l=Number(e.price))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)(v.cC,{children:!0===c?" ":null===(i=Number(e.sumAmount))||void 0===i?void 0:i.toLocaleString()})]},e.id+87887)})})]})]}),(0,b.jsx)("div",{style:{backgroundColor:"#01579b",width:"100%"},children:(0,b.jsxs)(x.A,{children:[(0,b.jsx)(p.A,{style:{paddingLeft:"21px",fontSize:"0.95rem",color:"white",fontWeight:"bold"},colSpan:3,children:"TOTAL SUBCONTRACTOR:"}),(0,b.jsx)(p.A,{style:{fontSize:"0.95rem",color:"white",fontWeight:"bold",float:"right"},colSpan:4,children:"".concat(!0===c?" ":Number(C).toLocaleString()," ").concat(null===s||void 0===s?void 0:s.currencyCode)})]})})]})},Q=()=>{var e,o;const[t,l]=(0,i.useState)([]),[n,a]=(0,i.useState)(!1),[c,d]=(0,i.useState)((0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Expand "}),(0,b.jsx)(j.g,{icon:g.tdl})]})),s=(0,u.wA)(),{singleProject:y}=(0,u.d4)(h.Br);(0,i.useEffect)(()=>{s((0,m.jI)())},[s]),(0,i.useEffect)(()=>{s((0,h.cf)())},[s]);const C=null===y||void 0===y||null===(e=y.activities)||void 0===e||null===(o=e.map((e,o)=>{var t;return{id:o+1,name:null===(t=e.category)||void 0===t?void 0:t.name,subContractorExist:e.subContractors.length}}))||void 0===o?void 0:o.filter((e,o)=>{if(e.subContractorExist>0)return e}),w=[...new Map(null===C||void 0===C?void 0:C.map(e=>[e.name,e])).values()],A=null===w||void 0===w?void 0:w.map((e,o)=>{var t,l,i,n,r;return{allIndex:o,id:o+1,name:e.name,unit:" ",quantity:" ",rate:" ",hidden:" ",calculateAmount:null===y||void 0===y||null===(t=y.activities)||void 0===t||null===(l=t.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===l?void 0:l.map(e=>parseFloat(e.subcontractorCostPerWorkItem||0)).reduce((e,o)=>e+o,0),amount:null===(i=Number(null===y||void 0===y||null===(n=y.activities)||void 0===n||null===(r=n.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name}))||void 0===r?void 0:r.map(e=>parseFloat(e.subcontractorCostPerWorkItem||0)).reduce((e,o)=>e+o,0)))||void 0===i?void 0:i.toLocaleString(),_props:{bgColor:"#e2e5de"}}}),k=null===A||void 0===A?void 0:A.map(e=>e.allIndex),z=null===A||void 0===A?void 0:A.map(e=>e.calculateAmount).reduce((e,o)=>e+o,0);const L=[{key:"id",filter:!1,sorter:!1,_props:{className:"fw-semibold"},_style:{width:"8%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"name",label:"Items",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"35%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"unit",label:"Subcontractor Unit",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"20%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"quantity",label:"Subcontractor Quantity",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"20%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"rate",label:"Subcontractor Price",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"20%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:!0===n?"hidden":"amount",label:"amount",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"5%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"show_details",label:"",_style:{width:"3%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"},filter:!1,sorter:!1,_props:{color:"primary",className:"fw-semibold"}}];return(0,b.jsxs)("div",{style:{backgroundColor:"#e2e5de",padding:"20px",margin:"-10px",fontSize:"0.75rem"},children:[(0,b.jsxs)("div",{style:{display:"flex",marginBottom:"4px"},children:[(0,b.jsx)(v.Q_,{onClick:function(){var e=new f.default;e.autoTable({theme:"plain",headStyles:{fontSize:15},bodyStyles:{fontSize:15,fontStyle:"italic",backgroundColor:"#01579b",color:"#ffffff"},body:[["ITEMISED SUBCONTRACTOR REPORT"]]}),e.autoTable({theme:"plain",styles:{fontSize:12,fillColor:"#01579b",textColor:"#ffffff"},body:[["Project Name:   ".concat(null===y||void 0===y?void 0:y.name)],["Client:    ".concat(null===y||void 0===y?void 0:y.client)],["Contractor:    ".concat(null===y||void 0===y?void 0:y.contractor)],["DATE:   ".concat(r()(null===y||void 0===y?void 0:y.createdAt).format("DD-MM-YYYY h:mm"))]]}),e.autoTable({theme:"grid",html:"#subContractor-table",didParseCell(e){"main"===e.cell.raw.id&&(e.cell.styles.textColor="black",e.cell.styles.fillColor="#01579b",e.cell.styles.textColor="#ffffff",e.cell.styles.fontSize=10),"activities"===e.cell.raw.id&&(e.cell.styles.textColor="black",e.cell.styles.fillColor="#e2e5de",e.cell.styles.textColor="black",e.cell.styles.fontSize=10)}}),e.autoTable({theme:"plain",styles:{fontSize:14,fontStyle:"italic"},body:[["GRAND TOTAL: ".concat(!0===n?" ":Number(z).toLocaleString()," ").concat(null===y||void 0===y?void 0:y.currencyCode)]]}),e.save("SubContractor-General-Report.pdf")},color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",marginLeft:"2px"},children:"Download"}),(0,b.jsx)(v.Q_,{onClick:()=>{const e=t.indexOf(1);let o=t.slice();-1!==e?(d((0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Expand"}),(0,b.jsx)(j.g,{icon:g.tdl})]})),o.splice(o)):(d((0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Collapse"}),(0,b.jsx)(j.g,{icon:g.GF6})]})),o=[...k,1]),l(o)},color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",marginLeft:"3px"},children:c}),(0,b.jsx)(v.Q_,{onClick:()=>a(!n),color:"info",size:"sm",style:{fontWeight:600,color:"white",fontSize:"12px",whiteSpace:"nowrap",marginLeft:"3px"},children:!1===n?"Hide rate":"UnHide rate"})]}),(0,b.jsx)("div",{style:{backgroundColor:"#fbfbf8",fontWeight:"bold"},children:(0,b.jsx)(S.Pd,{columns:L,items:A,scopedColumns:{show_details:e=>(0,b.jsx)("td",{className:"py-2",children:(0,b.jsx)("div",{onClick:()=>{(e=>{const o=t.indexOf(e);let i=t.slice();-1!==o?i.splice(o,1):i=[...t,e],l(i)})(e._id)},children:t.includes(e._id)?(0,b.jsx)(j.g,{icon:g.GF6}):(0,b.jsx)(j.g,{icon:g.tdl})})}),details:e=>{var o;return(0,b.jsx)(v.x8,{visible:t.includes(e._id),children:null===y||void 0===y||null===(o=y.activities)||void 0===o?void 0:o.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name&&0!==o.subContractors.length}).map((o,t)=>{var l,i,r,a;return(0,b.jsxs)(v._v,{small:!0,children:[(0,b.jsx)(v.wV,{style:{backgroundColor:"#3c73a8",color:"white",borderBottom:"2px solid #cccccc"},children:(0,b.jsxs)(v.YI,{children:[(0,b.jsxs)(v.$s,{scope:"col",style:{color:"white"},children:[e.id," ","."," ",t+1]}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:o.name}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:null===(l=Number(o.estimationQuantity))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:o.estimationUnit}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:null===(i=Number(o.estimationRate))||void 0===i?void 0:i.toLocaleString()}),(0,b.jsx)(v.$s,{scope:"col",style:{color:"white"},children:!0===n?" ":null===(r=Number(o.subcontractorCostPerWorkItem))||void 0===r?void 0:r.toLocaleString()})]})}),(0,b.jsx)(v.jS,{children:null===(a=o.subContractors)||void 0===a?void 0:a.map((e,o)=>{var t,l;return(0,b.jsxs)(v.YI,{children:[(0,b.jsxs)(v.cC,{style:{width:"5%"},children:["S"," ",o+1]},o+86),(0,b.jsx)(v.cC,{style:{width:"20%",textAlign:"left"},children:e.name}),(0,b.jsx)(v.cC,{style:{width:"10%"},children:e.unit}),(0,b.jsx)(v.cC,{style:{width:"10%",textAlign:"left"},children:e.quantity}),(0,b.jsx)(v.cC,{style:{width:"8%",textAlign:"left"},children:!0===n?" ":null===(t=Number(e.price))||void 0===t?void 0:t.toLocaleString()}),(0,b.jsx)(v.cC,{style:{width:"5%",textAlign:"left"},children:!0===n?" ":null===(l=Number(e.UserEstimationLibrary.subContractorTotalAmount))||void 0===l?void 0:l.toLocaleString()})]},o+557)})})]},t+5)})})}},tableProps:{responsive:!0}})}),(0,b.jsx)("div",{style:{backgroundColor:"#01579b",width:"100%"},children:(0,b.jsxs)(x.A,{children:[(0,b.jsx)(p.A,{style:{paddingLeft:"21px",fontSize:"0.95rem",color:"white",fontWeight:"bold"},colSpan:3,children:"Grand Total:"}),(0,b.jsx)(p.A,{style:{fontSize:"0.95rem",color:"white",fontWeight:"bold",float:"right"},colSpan:4,children:"".concat(!0===n?" ":Number(z).toLocaleString()," ").concat(null===y||void 0===y?void 0:y.currencyCode)})]})}),(0,b.jsxs)("table",{id:"subContractor-table",style:{display:"none"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{backgroundColor:"red",color:"white"},children:[(0,b.jsx)("th",{children:"Id"}),(0,b.jsx)("th",{children:"Items Description"}),(0,b.jsx)("th",{children:"SubContractor Unit"}),(0,b.jsx)("th",{children:"SubContractor Quantity"}),(0,b.jsx)("th",{children:"SubContractor Price"}),(0,b.jsx)("th",{children:"SubContractor Amount"})]})}),null===A||void 0===A?void 0:A.map((e,o)=>{var t,l;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{id:"main",children:e.id}),(0,b.jsx)("td",{id:"main",children:e.name}),(0,b.jsx)("td",{id:"main",children:""}),(0,b.jsx)("td",{id:"main",children:""}),(0,b.jsx)("td",{id:"main",children:""}),(0,b.jsx)("td",{id:"main",children:!0===n?" ":e.amount})]},e.id),null===y||void 0===y||null===(t=y.activities)||void 0===t||null===(l=t.filter(o=>{var t;return(null===(t=o.category)||void 0===t?void 0:t.name)===e.name&&0!==o.subContractors.length}))||void 0===l?void 0:l.map((e,t)=>{var l,i,r,a;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{id:"activities",children:"".concat(o+1,".").concat(t+1)}),(0,b.jsx)("td",{id:"activities",children:e.name}),(0,b.jsx)("td",{id:"activities",scope:"col",style:{color:"white"},children:null===(l=Number(e.estimationQuantity))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)("td",{id:"activities",scope:"col",style:{color:"white"},children:e.estimationUnit}),(0,b.jsx)("td",{id:"activities",scope:"col",style:{color:"white"},children:null===(i=Number(e.estimationRate))||void 0===i?void 0:i.toLocaleString()}),(0,b.jsx)("td",{id:"activities",children:!0===n?" ":null===(r=Number(e.estimationTotalAmount))||void 0===r?void 0:r.toLocaleString()})]},e.id),null===(a=e.subContractors)||void 0===a?void 0:a.map((e,o)=>{var t,l,i;return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"S".concat(o+1)}),(0,b.jsx)("td",{children:e.name}),(0,b.jsx)("td",{children:e.unit}),(0,b.jsx)("td",{children:null===(t=Number(e.quantity))||void 0===t?void 0:t.toLocaleString()}),(0,b.jsx)("td",{children:!0===n?" ":null===(l=Number(e.price))||void 0===l?void 0:l.toLocaleString()}),(0,b.jsx)("td",{children:!0===n?" ":null===(i=Number(e.UserEstimationLibrary.subContractorTotalAmount))||void 0===i?void 0:i.toLocaleString()})]},e.id)})]})})]})})]})]})},U=()=>{const[e,o]=(0,i.useState)(1);return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{style:{backgroundColor:"#e2e5de",padding:"20px",margin:"-10px",border:"2px solid white"},children:[(0,b.jsxs)(v.by,{style:{marginBottom:"20px",backgroundColor:"white",fontWeight:"bold",cursor:"pointer",width:"fit-content"},variant:"pills",role:"tablist",children:[(0,b.jsx)(v.g9,{children:(0,b.jsx)(v.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:1===e?"rgb(1, 87, 155)":"",color:1===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:1===e,onClick:()=>o(1),children:"GENERAL REPORT"})}),(0,b.jsx)(v.g9,{children:(0,b.jsx)(v.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:2===e?"rgb(1, 87, 155)":"",color:2===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:2===e,onClick:()=>o(2),children:"SUMMARY REPORT"})})]}),(0,b.jsxs)(v.eL,{children:[(0,b.jsx)(v.x1,{role:"tabpanel","aria-labelledby":"home-tab",visible:1===e,children:(0,b.jsx)(Q,{})}),(0,b.jsx)(v.x1,{role:"tabpanel","aria-labelledby":"profile-tab",visible:2===e,children:(0,b.jsx)(W,{})})]})]})})},M=()=>{const[e,o]=(0,i.useState)(1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(v.by,{style:{marginBottom:"20px",backgroundColor:"white",fontWeight:"bold",cursor:"pointer",width:"fit-content"},variant:"pills",role:"tablist",children:[(0,b.jsx)(v.g9,{style:{fontSize:"0.85rem"},children:(0,b.jsx)(v.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:1===e?"rgb(1, 87, 155)":"",color:1===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:1===e,onClick:()=>o(1),children:"EQUIPMENT REPORT"})}),(0,b.jsx)(v.g9,{children:(0,b.jsx)(v.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:2===e?"rgb(1, 87, 155)":"",color:2===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:2===e,onClick:()=>o(2),children:"MATERIAL REPORT"})}),(0,b.jsx)(v.g9,{children:(0,b.jsx)(v.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:3===e?"rgb(1, 87, 155)":"",color:3===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:3===e,onClick:()=>o(3),children:"LABOUR REPORT"})}),(0,b.jsx)(v.g9,{children:(0,b.jsx)(v.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:4===e?"rgb(1, 87, 155)":"",color:4===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:4===e,onClick:()=>o(4),children:"SUBCONTRACTOR REPORT"})})]}),(0,b.jsxs)(v.eL,{children:[(0,b.jsx)(v.x1,{role:"tabpanel","aria-labelledby":"home-tab",visible:1===e,children:(0,b.jsx)(T,{})}),(0,b.jsx)(v.x1,{role:"tabpanel","aria-labelledby":"profile-tab",visible:2===e,children:(0,b.jsx)(w,{})}),(0,b.jsx)(v.x1,{role:"tabpanel","aria-labelledby":"contact-tab",visible:3===e,children:(0,b.jsx)(I,{})}),(0,b.jsx)(v.x1,{role:"tabpanel","aria-labelledby":"contact-tab",visible:4===e,children:(0,b.jsx)(U,{})})]})]})};var F=t(30091);function D(){var e;const o=(0,u.wA)(),{projects:t,singleProject:n,singleProjectGrouping:v,projectsGrouping:f}=(0,u.d4)(h.Br),[y,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{o((0,h.cf)())},[o]),(0,i.useEffect)(()=>{o((0,m.jI)())},[o]),(0,i.useEffect)(()=>{o((0,h.EQ)(null===n||void 0===n?void 0:n.id))},[o,null===n||void 0===n?void 0:n.id]),(0,i.useEffect)(()=>{o((0,h.a2)())},[o]);const j=null===t||void 0===t?void 0:t.filter(e=>null===e.groupId),S=null===v||void 0===v?void 0:v.projects;let C;C=void 0!==S?null===S||void 0===S?void 0:S.concat(j):j;const w=null===(e=C)||void 0===e?void 0:e.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name})),A=null===f||void 0===f?void 0:f.map(e=>({value:e.id,label:e.name}));return(0,b.jsxs)(b.Fragment,{children:[(null===t||void 0===t?void 0:t.length)>0&&(0,b.jsxs)("div",{style:{backgroundColor:"#cccccc",padding:"40px",margin:"-40px"},children:[(0,b.jsx)("div",{style:{width:"45%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,b.jsx)(s.A,{isClearable:!0,onChange:e=>{const t={id:e.value,labourName:e.label};o((0,h.Le)({id:t.id}))},options:A,placeholder:v?"PROJECT: ".concat(null===v||void 0===v?void 0:v.name):"Select a project",styles:{option:(e,o)=>(0,l.A)((0,l.A)({},e),{},{borderBottom:"1px dotted #01579b",color:o.isSelected?"white":"black"})}})}),f&&(0,b.jsx)("div",{style:{marginBottom:"20px",width:"40%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,b.jsx)(s.A,{isClearable:!0,onChange:(e,t)=>{const l={id:e.value,labourName:e.label};g(!0),o((0,h.EQ)(l.id)).then(e=>{g(!1)})},options:w,placeholder:n?"SUB-PROJECT: ".concat(null===n||void 0===n?void 0:n.name):"Select a sub-project",styles:{option:(e,o)=>(0,l.A)((0,l.A)({},e),{},{borderBottom:"1px dotted #01579b",color:o.isSelected?"white":"black"})}})}),(0,b.jsx)("div",{style:{backgroundColor:"#3c73a8",width:"100%",borderBottom:"2px solid white"},children:(0,b.jsx)("div",{children:(0,b.jsxs)(x.A,{children:[(0,b.jsx)(p.A,{style:{paddingLeft:"21px",fontSize:"1rem",color:"white",fontWeight:"bold"},colSpan:3,children:"Project Name :"}),(0,b.jsx)(p.A,{style:{fontSize:"1rem",color:"white",fontWeight:"bold",paddingLeft:"5%",whiteSpace:"nowrap"},colSpan:4,children:null===n||void 0===n?void 0:n.name}),(0,b.jsxs)(x.A,{children:[(0,b.jsx)(p.A,{style:{float:"left",paddingLeft:"21px",fontSize:"1rem",color:"white",fontWeight:"bold",whiteSpace:"nowrap",border:"none"},colSpan:3,children:"DATE :"}),(0,b.jsx)(p.A,{style:{fontSize:"1rem",color:"white",fontWeight:"bold",paddingLeft:"5%",whiteSpace:"nowrap",border:"none"},colSpan:4,children:r()(null===n||void 0===n?void 0:n.createdAt).format("DD-MM-YYYY h:mm")})]})]})})}),(0,b.jsx)(a.Ay,{container:!0,spacing:1,style:{marginRight:"-3%",width:"103%"},children:(0,b.jsx)(a.Ay,{item:!0,xs:12,children:(0,b.jsx)(M,{})})})]}),(0,b.jsx)("div",{children:(0,b.jsx)(c.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:y,children:(0,b.jsx)(d.A,{color:"inherit"})})}),0===(null===t||void 0===t?void 0:t.length)&&(0,b.jsx)(F.A,{})]})}}}]);