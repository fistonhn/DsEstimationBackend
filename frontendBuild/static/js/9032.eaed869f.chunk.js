"use strict";(self.webpackChunk_ds_estimation_construction_web_app=self.webpackChunk_ds_estimation_construction_web_app||[]).push([[9032],{19032:(e,i,l)=>{l.r(i),l.d(i,{default:()=>O});var o=l(9950),n=l(49911),t=l(89379),s=l(80045),d=l(50242),r=l(14857),c=l(88060),a=l(72236),u=l(84142),h=l(82053),x=l(4036),v=l(73878),j=l(68863),m=l(26080),p=l(92686),b=l(55638),g=l(44414);const f=()=>{var e,i;const{materials:l,loadingResource:s,message:d,error:r}=(0,v.d4)(b.H9),{projects:c,singleProject:a,singleProjectGrouping:u,projectsGrouping:h}=(0,v.d4)(p.Br),[x,f]=(0,o.useState)(!1),[C,y]=(0,o.useState)(null===a||void 0===a?void 0:a.id),[S,w]=(0,o.useState)([]),[A,z]=(0,o.useState)([]),k=(0,v.wA)();(0,o.useEffect)(()=>{k((0,b.me)())},[]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{k((0,b.iY)())},3e3);return()=>clearTimeout(e)},[k,d,r,d,s]),(0,o.useEffect)(()=>{k((0,p.a2)())},[k]),(0,o.useEffect)(()=>{k((0,p.cf)())},[k]),(0,o.useEffect)(()=>{k((0,p.EQ)(C))},[k,C]);const N=null===h||void 0===h?void 0:h.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name})),E=null===c||void 0===c?void 0:c.filter(e=>null===(null===e||void 0===e?void 0:e.groupId)),q=null===u||void 0===u?void 0:u.projects;let U;U=void 0!==q?null===q||void 0===q?void 0:q.concat(E):E;const I=null===(e=U)||void 0===e?void 0:e.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name})),F=e=>{f(!1),k((0,b.pB)(null===a||void 0===a?void 0:a.id))},B=e=>{const i=e.target.value,l=e.target.name;e.target.checked?(z([...A,parseInt(i)]),w([...S,l])):z(A.filter(e=>e!==i))},Y=[...l];return null===Y||void 0===Y||Y.sort((e,i)=>(null===e||void 0===e?void 0:e.id)-(null===i||void 0===i?void 0:i.id)),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n.Q_,{onClick:()=>{f(!0)},color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)",marginBottom:"10px"},size:"sm",children:"Add Material"}),(0,g.jsxs)(n.zS,{visible:x,onClose:F,children:[(0,g.jsx)(n.E4,{onClose:F,children:(0,g.jsx)(n.lb,{children:"Select Project to Add Equipments"})}),(0,g.jsxs)(n.Tc,{children:[A.length>0&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("h6",{children:["Add all below selected Equipments to ",(0,g.jsx)("span",{style:{color:"rgb(1, 87, 155)",fontWeight:700,fontSize:"17px"},children:null===a||void 0===a||null===(i=a.name)||void 0===i?void 0:i.toUpperCase()})," "]}),(0,g.jsx)("div",{style:{fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,g.jsx)(m.A,{isClearable:!0,onChange:e=>{const i={id:e.value,labourName:e.label};k((0,p.Le)({id:i.id}))},options:N,placeholder:u?"PROJECT: ".concat(null===u||void 0===u?void 0:u.name):"Select a project",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,g.jsx)("div",{style:{marginTop:"10px",width:"80%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,g.jsx)(m.A,{isClearable:!0,onChange:(e,i)=>{const l={id:null===e||void 0===e?void 0:e.value,labourName:null===e||void 0===e?void 0:e.label};y(l.id)},options:I,placeholder:a?"SUB-PROJECT: ".concat(null===a||void 0===a?void 0:a.name):"Select a sub-project",value:"hh",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,g.jsx)("div",{children:S.map(e=>(0,g.jsx)("li",{children:e},e))}),(0,g.jsx)(n.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)",marginTop:"10px"},size:"sm",onClick:()=>{A.length>0&&k((0,b.LR)({resourceIds:A,id:C}))},children:s?"Adding...":"Add Material"})]}),0===A.length&&(0,g.jsx)("h6",{children:"No Material selected! please select Material first!"})]})]}),(0,g.jsxs)(n.UF,{xs:12,children:[(0,g.jsx)(n.V0,{style:{backgroundColor:"#01579b",color:"white",fontSize:"0.9rem"},children:(0,g.jsx)("strong",{children:"Material Library "})}),(0,g.jsxs)(n._v,{striped:!0,hover:!0,bordered:!0,borderColor:"dark",style:{fontSize:"0.75rem"},children:[(0,g.jsx)(n.wV,{children:(0,g.jsxs)(n.YI,{style:{backgroundColor:"#01579b"},children:[(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"ID"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Materials"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Quantity"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Unit"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Price"})]})}),(0,g.jsx)(n.jS,{children:null===Y||void 0===Y?void 0:Y.map(e=>(0,g.jsxs)(n.YI,{children:[(0,g.jsxs)(n.cC,{children:[(0,g.jsx)(j.A,{size:"small",value:e.id,name:e.name,onClick:B}),"M".concat(e.id)]}),(0,g.jsx)(n.cC,{children:e.name}),(0,g.jsx)(n.cC,{children:null===e||void 0===e?void 0:e.quantity}),(0,g.jsx)(n.cC,{children:e.unit}),(0,g.jsx)(n.cC,{children:Number(e.price).toLocaleString()})]},e.id))})]})]}),d&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:d}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),r&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:r}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})};var C=l(90222);const y=()=>{var e,i;const l=(0,v.wA)(),{equipments:s,message:d,error:r,loading:c}=(0,v.d4)(C.GN),{projects:a,singleProject:u,singleProjectGrouping:h,projectsGrouping:x}=(0,v.d4)(p.Br),[b,f]=(0,o.useState)(null===u||void 0===u?void 0:u.id),[y,S]=(0,o.useState)(!1),[w,A]=(0,o.useState)([]),[z,k]=(0,o.useState)([]);(0,o.useEffect)(()=>(0,C.cS)(),[]),(0,o.useEffect)(()=>{l((0,C.cS)())},[l]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{l((0,C.$9)())},3e3);return()=>clearTimeout(e)},[l,d,r,d,c]),(0,o.useEffect)(()=>{l((0,p.a2)())},[l]),(0,o.useEffect)(()=>{l((0,p.cf)())},[l]),(0,o.useEffect)(()=>{l((0,p.EQ)(b))},[l,b]);const N=null===x||void 0===x?void 0:x.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name})),E=null===a||void 0===a?void 0:a.filter(e=>null===(null===e||void 0===e?void 0:e.groupId)),q=null===h||void 0===h?void 0:h.projects;let U;U=void 0!==q?null===q||void 0===q?void 0:q.concat(E):E;const I=null===(e=U)||void 0===e?void 0:e.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name})),F=e=>{S(!1),l((0,C.KN)(null===u||void 0===u?void 0:u.id))},B=e=>{const i=e.target.value,l=e.target.name;e.target.checked?(k([...z,parseInt(i)]),A([...w,l])):k(z.filter(e=>e!==i))},Y=[...s];return null===Y||void 0===Y||Y.sort((e,i)=>(null===e||void 0===e?void 0:e.id)-(null===i||void 0===i?void 0:i.id)),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n.Q_,{onClick:()=>{S(!0)},color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)",marginBottom:"10px"},size:"sm",children:"Add Equipment"}),(0,g.jsxs)(n.zS,{visible:y,onClose:F,children:[(0,g.jsx)(n.E4,{onClose:F,children:(0,g.jsx)(n.lb,{children:"Select Project to Add Equipments"})}),(0,g.jsxs)(n.Tc,{children:[z.length>0&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("h6",{children:["Add all below selected Equipments to ",(0,g.jsx)("span",{style:{color:"rgb(1, 87, 155)",fontWeight:700,fontSize:"17px"},children:null===u||void 0===u||null===(i=u.name)||void 0===i?void 0:i.toUpperCase()})," "]}),(0,g.jsx)("div",{style:{fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,g.jsx)(m.A,{isClearable:!0,onChange:e=>{const i={id:e.value,labourName:e.label};l((0,p.Le)({id:i.id}))},options:N,placeholder:h?"PROJECT: ".concat(null===h||void 0===h?void 0:h.name):"Select a project",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,g.jsx)("div",{style:{marginTop:"10px",width:"80%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,g.jsx)(m.A,{isClearable:!0,onChange:(e,i)=>{const l={id:null===e||void 0===e?void 0:e.value,labourName:null===e||void 0===e?void 0:e.label};f(l.id)},options:I,placeholder:u?"SUB-PROJECT: ".concat(null===u||void 0===u?void 0:u.name):"Select a sub-project",value:"hh",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,g.jsx)("div",{children:w.map(e=>(0,g.jsx)("li",{children:e},e))}),(0,g.jsx)(n.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)",marginTop:"10px"},size:"sm",onClick:()=>{z.length>0&&l((0,C.am)({resourceIds:z,id:b}))},children:c?"Adding...":"Add Equipments"})]}),0===z.length&&(0,g.jsx)("h6",{children:"No Equipments selected! please select equipments first!"})]})]}),(0,g.jsxs)(n.UF,{xs:12,children:[(0,g.jsx)(n.V0,{style:{backgroundColor:"#01579b",color:"white"},children:(0,g.jsx)("strong",{children:"Equipment Library "})}),(0,g.jsxs)(n._v,{striped:!0,hover:!0,bordered:!0,borderColor:"dark",style:{fontSize:"0.75rem"},children:[(0,g.jsx)(n.wV,{children:(0,g.jsxs)(n.YI,{style:{backgroundColor:"#01579b"},children:[(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"ID"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Equipments"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Unit"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Number"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Hire Rate"})]})}),null===Y||void 0===Y?void 0:Y.map(e=>(0,g.jsx)(n.jS,{children:(0,g.jsxs)(n.YI,{children:[(0,g.jsxs)(n.cC,{children:[(0,g.jsx)(j.A,{size:"small",value:e.id,name:e.name,onClick:B}),"E".concat(e.id)]}),(0,g.jsx)(n.cC,{children:e.name}),(0,g.jsx)(n.cC,{children:e.unit}),(0,g.jsx)(n.cC,{children:e.number}),(0,g.jsx)(n.cC,{children:e.hireRatePrice})]})},e.id))]})]}),d&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:d}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),r&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:r}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})};var S=l(67066);const w=()=>{var e,i;const l=(0,v.wA)(),{subcontractors:s,message:d,error:r,updateMessage:c,updateError:a,isLoading:u,loading:h}=(0,v.d4)(S.Tu),{projects:x,singleProject:b,singleProjectGrouping:f,projectsGrouping:C}=(0,v.d4)(p.Br),[y,w]=(0,o.useState)(!1),[A,z]=(0,o.useState)(null===b||void 0===b?void 0:b.id),[k,N]=(0,o.useState)([]),[E,q]=(0,o.useState)([]);(0,o.useEffect)(()=>l((0,S.Kg)(b.id)),[l,null===b||void 0===b?void 0:b.id]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{l((0,S.DA)())},3e3);return()=>clearTimeout(e)},[l,d,r,c,a,u]),(0,o.useEffect)(()=>{l((0,p.a2)())},[l]),(0,o.useEffect)(()=>{l((0,p.cf)())},[l]),(0,o.useEffect)(()=>{l((0,p.EQ)(A))},[l,A]);const U=null===C||void 0===C?void 0:C.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name})),I=null===x||void 0===x?void 0:x.filter(e=>null===(null===e||void 0===e?void 0:e.groupId)),F=null===f||void 0===f?void 0:f.projects;let B;B=void 0!==F?null===F||void 0===F?void 0:F.concat(I):I;const Y=null===(e=B)||void 0===e?void 0:e.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name})),$=e=>{w(!1),l((0,S.Kg)(null===b||void 0===b?void 0:b.id))},T=e=>{const i=e.target.value,l=e.target.name;e.target.checked?(q([...E,parseInt(i)]),N([...k,l])):q(E.filter(e=>e!==i))},L=[...s];return null===L||void 0===L||L.sort((e,i)=>(null===e||void 0===e?void 0:e.id)-(null===i||void 0===i?void 0:i.id)),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n.Q_,{onClick:()=>{w(!0)},color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)",marginBottom:"10px"},size:"sm",children:"Add Subcontractor"}),(0,g.jsxs)(n.zS,{visible:y,onClose:$,children:[(0,g.jsx)(n.E4,{onClose:$,children:(0,g.jsx)(n.lb,{children:"Select Project to Add Equipments"})}),(0,g.jsxs)(n.Tc,{children:[E.length>0&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("h6",{children:["Add all below selected Equipments to ",(0,g.jsx)("span",{style:{color:"rgb(1, 87, 155)",fontWeight:700,fontSize:"17px"},children:null===b||void 0===b||null===(i=b.name)||void 0===i?void 0:i.toUpperCase()})," "]}),(0,g.jsx)("div",{style:{fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,g.jsx)(m.A,{isClearable:!0,onChange:e=>{const i={id:e.value,labourName:e.label};l((0,p.Le)({id:i.id}))},options:U,placeholder:f?"PROJECT: ".concat(null===f||void 0===f?void 0:f.name):"Select a project",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,g.jsx)("div",{style:{marginTop:"10px",width:"80%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,g.jsx)(m.A,{isClearable:!0,onChange:(e,i)=>{const l={id:null===e||void 0===e?void 0:e.value,labourName:null===e||void 0===e?void 0:e.label};z(l.id)},options:Y,placeholder:b?"SUB-PROJECT: ".concat(null===b||void 0===b?void 0:b.name):"Select a sub-project",value:"hh",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,g.jsx)("div",{children:k.map(e=>(0,g.jsx)("li",{children:e},e))}),(0,g.jsx)(n.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)",marginTop:"10px"},size:"sm",onClick:()=>{E.length>0&&l((0,S.pk)({resourceIds:E,id:A})).then(()=>l((0,S.Kg)(null===b||void 0===b?void 0:b.id)))},children:h?"Adding...":"Add Subcontractor"})]}),0===E.length&&(0,g.jsx)("h6",{children:"No Subcontractor selected! please select Subcontractor first!"})]})]}),(0,g.jsxs)(n.UF,{xs:12,children:[(0,g.jsx)(n.V0,{style:{backgroundColor:"#01579b",color:"white"},children:(0,g.jsx)("strong",{children:"Subcontractor Library "})}),(0,g.jsxs)(n._v,{striped:!0,hover:!0,bordered:!0,borderColor:"dark",style:{fontSize:"0.75rem"},children:[(0,g.jsx)(n.wV,{children:(0,g.jsxs)(n.YI,{style:{backgroundColor:"#01579b"},children:[(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"ID"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Name"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Quantity"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Unit"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Rate"})]})}),(0,g.jsx)(n.jS,{children:null===L||void 0===L?void 0:L.map(e=>(0,g.jsxs)(n.YI,{children:[(0,g.jsxs)(n.cC,{children:["S".concat(e.id),(0,g.jsx)(j.A,{size:"small",value:e.id,name:e.name,onClick:T})]}),(0,g.jsx)(n.cC,{children:e.name}),(0,g.jsx)(n.cC,{children:e.quantity}),(0,g.jsx)(n.cC,{children:e.unit}),(0,g.jsx)(n.cC,{children:e.price})]},e.id))})]})]}),d&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:d}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),r&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:r}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})};var A=l(34270);const z=()=>{var e,i;const l=(0,v.wA)(),{labours:s,message:d,error:r,loading:c}=(0,v.d4)(A.lt),{projects:a,singleProject:u,singleProjectGrouping:h,projectsGrouping:x}=(0,v.d4)(p.Br),[b,f]=(0,o.useState)(!1),[C,y]=(0,o.useState)(null===u||void 0===u?void 0:u.id),[S,w]=(0,o.useState)([]),[z,k]=(0,o.useState)([]);(0,o.useEffect)(()=>{l((0,A.Wj)())},[l]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{l((0,A.o2)())},3e3);return()=>clearTimeout(e)},[l,d,r,c]),(0,o.useEffect)(()=>{l((0,p.a2)())},[l]),(0,o.useEffect)(()=>{l((0,p.cf)())},[l]),(0,o.useEffect)(()=>{l((0,p.EQ)(C))},[l,C]);const N=null===x||void 0===x?void 0:x.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name})),E=null===a||void 0===a?void 0:a.filter(e=>null===(null===e||void 0===e?void 0:e.groupId)),q=null===h||void 0===h?void 0:h.projects;let U;U=void 0!==q?null===q||void 0===q?void 0:q.concat(E):E;const I=null===(e=U)||void 0===e?void 0:e.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name})),F=e=>{f(!1),l((0,A.Wj)(null===u||void 0===u?void 0:u.id))},B=e=>{const i=e.target.value,l=e.target.name;e.target.checked?(k([...z,parseInt(i)]),w([...S,l])):k(z.filter(e=>e!==i))},Y=[...s];return null===Y||void 0===Y||Y.sort((e,i)=>(null===e||void 0===e?void 0:e.id)-(null===i||void 0===i?void 0:i.id)),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n.Q_,{onClick:()=>{f(!0)},color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)",marginBottom:"10px"},size:"sm",children:"Add Labour"}),(0,g.jsxs)(n.zS,{visible:b,onClose:F,children:[(0,g.jsx)(n.E4,{onClose:F,children:(0,g.jsx)(n.lb,{children:"Select Project to Add Labour"})}),(0,g.jsxs)(n.Tc,{children:[z.length>0&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("h6",{children:["Add all below selected Labour to ",(0,g.jsx)("span",{style:{color:"rgb(1, 87, 155)",fontWeight:700,fontSize:"17px"},children:null===u||void 0===u||null===(i=u.name)||void 0===i?void 0:i.toUpperCase()})," "]}),(0,g.jsx)("div",{style:{fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,g.jsx)(m.A,{isClearable:!0,onChange:e=>{const i={id:e.value,labourName:e.label};l((0,p.Le)({id:i.id}))},options:N,placeholder:h?"PROJECT: ".concat(null===h||void 0===h?void 0:h.name):"Select a project",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,g.jsx)("div",{style:{marginTop:"10px",width:"80%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,g.jsx)(m.A,{isClearable:!0,onChange:(e,i)=>{const l={id:null===e||void 0===e?void 0:e.value,labourName:null===e||void 0===e?void 0:e.label};y(l.id)},options:I,placeholder:u?"SUB-PROJECT: ".concat(null===u||void 0===u?void 0:u.name):"Select a sub-project",value:"hh",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,g.jsx)("div",{children:S.map(e=>(0,g.jsx)("li",{children:e},e))}),(0,g.jsx)(n.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)",marginTop:"10px"},size:"sm",onClick:()=>{z.length>0&&l((0,A.nS)({resourceIds:z,id:C})).then(()=>l((0,A.Wo)(null===u||void 0===u?void 0:u.id)))},children:c?"Adding...":"Add Labour"})]}),0===z.length&&(0,g.jsx)("h6",{children:"No Labour selected! please select Labour first!"})]})]}),(0,g.jsxs)(n.UF,{xs:12,children:[(0,g.jsx)(n.V0,{style:{backgroundColor:"#01579b",color:"white"},children:(0,g.jsx)("strong",{children:"Labour Library"})}),(0,g.jsxs)(n._v,{striped:!0,hover:!0,bordered:!0,borderColor:"dark",style:{fontSize:"0.75rem"},children:[(0,g.jsx)(n.wV,{children:(0,g.jsxs)(n.YI,{style:{backgroundColor:"#01579b"},children:[(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"ID"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Name"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"quantity"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"unit"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"wage"})]})}),(0,g.jsx)(n.jS,{children:null===Y||void 0===Y?void 0:Y.map(e=>(0,g.jsxs)(n.YI,{children:[(0,g.jsxs)(n.cC,{children:["L".concat(e.id),(0,g.jsx)(j.A,{size:"small",value:e.id,name:e.name,onClick:B})]}),(0,g.jsx)(n.cC,{children:e.name}),(0,g.jsx)(n.cC,{children:e.number}),(0,g.jsx)(n.cC,{children:e.unit}),(0,g.jsx)(n.cC,{children:e.wages})]},e.id))})]})]}),d&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:d}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),r&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:r}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})},k=["children","value","index"];function N(e){const{children:i,value:l,index:o}=e,n=(0,s.A)(e,k);return(0,g.jsx)(h.A,(0,t.A)((0,t.A)({component:"div",role:"tabpanel",hidden:l!==o,id:"action-tabpanel-".concat(o),"aria-labelledby":"action-tab-".concat(o)},n),{},{children:l===o&&(0,g.jsx)(x.A,{sx:{p:6},children:i})}))}function E(e){return{id:"action-tab-".concat(e),"aria-controls":"action-tabpanel-".concat(e)}}function q(){const e=(0,r.A)(),[i,l]=o.useState(0);return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(x.A,{sx:{bgcolor:"background.paper",width:"auto",position:"relative",minHeight:200},children:[(0,g.jsx)(c.A,{position:"static",color:"default",children:(0,g.jsxs)(a.A,{value:i,onChange:(e,i)=>{l(i)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"action tabs example",children:[(0,g.jsx)(u.A,(0,t.A)({style:{fontWeight:"bold"},label:"Equipments"},E(0))),(0,g.jsx)(u.A,(0,t.A)({style:{fontWeight:"bold"},label:"Materials"},E(1))),(0,g.jsx)(u.A,(0,t.A)({style:{fontWeight:"bold"},label:"SubContractor"},E(2))),(0,g.jsx)(u.A,(0,t.A)({style:{fontWeight:"bold"},label:"Labour"},E(3)))]})}),(0,g.jsxs)(d.Ay,{axis:"rtl"===e.direction?"x-reverse":"x",index:i,onChangeIndex:e=>{l(e)},children:[(0,g.jsx)(N,{value:i,index:0,dir:e.direction,children:(0,g.jsx)(y,{})}),(0,g.jsx)(N,{value:i,index:1,dir:e.direction,children:(0,g.jsx)(f,{})}),(0,g.jsx)(N,{value:i,index:2,dir:e.direction,children:(0,g.jsx)(w,{})}),(0,g.jsx)(N,{value:i,index:3,dir:e.direction,children:(0,g.jsx)(z,{})})]})]})})}var U=l(67580),I=l(46639),F=l(39324),B=l(74959);const Y=()=>{var e;const{loadingResource:i,message:l,error:s,resourceMaterial:d}=(0,v.d4)(b.H9),{singleProject:r}=(0,v.d4)(p.Br),[c,a]=(0,o.useState)(!1),[u,h]=(0,o.useState)([]),[x,j]=(0,o.useState)(null),m=(0,v.wA)();(0,o.useEffect)(()=>{m((0,b.pB)(null===r||void 0===r?void 0:r.id))},[m,null===r||void 0===r?void 0:r.id]),(0,o.useEffect)(()=>{m((0,p.EQ)(null===r||void 0===r?void 0:r.id))},[m,null===r||void 0===r?void 0:r.id]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{m((0,b.iY)())},3e3);return()=>clearTimeout(e)},[m,l,s,i]);const f=e=>{const{name:i,value:l}=e.target;j((0,t.A)((0,t.A)({},x),{},{[i]:l}))},C=e=>{m((0,b.fW)({resourceIds:[e],id:r.id})).then(()=>m((0,b.pB)(null===r||void 0===r?void 0:r.id)))};return(0,g.jsxs)(g.Fragment,{children:[0===(null===d||void 0===d?void 0:d.length)&&(0,g.jsxs)("h6",{children:["No Material resources yet added to your project"," ",(0,g.jsx)("span",{style:{color:"rgb(1, 87, 155)",fontWeight:700,fontSize:"17px"},children:null===r||void 0===r||null===(e=r.name)||void 0===e?void 0:e.toUpperCase()})," "]}),(null===d||void 0===d?void 0:d.length)>0&&(0,g.jsxs)(n.UF,{xs:12,children:[(0,g.jsx)(n.V0,{style:{backgroundColor:"#01579b",color:"white",fontSize:"0.9rem"},children:(0,g.jsx)("strong",{children:"Material Library "})}),(0,g.jsxs)(n._v,{striped:!0,hover:!0,bordered:!0,borderColor:"dark",style:{fontSize:"0.75rem"},children:[(0,g.jsx)(n.wV,{children:(0,g.jsxs)(n.YI,{style:{backgroundColor:"#01579b"},children:[(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"ID"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Materials"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Quantity"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Unit"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Price"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Action"})]})}),(0,g.jsx)(n.jS,{children:null===d||void 0===d?void 0:d.map(e=>(0,g.jsxs)(n.YI,{children:[(0,g.jsx)(n.cC,{children:"M".concat(null===e||void 0===e?void 0:e.id)}),(0,g.jsx)(n.cC,{children:null===e||void 0===e?void 0:e.name}),(0,g.jsx)(n.cC,{children:null===e||void 0===e?void 0:e.quantity}),(0,g.jsx)(n.cC,{children:null===e||void 0===e?void 0:e.unit}),(0,g.jsx)(n.cC,{children:Number(null===e||void 0===e?void 0:e.price).toLocaleString()}),(0,g.jsxs)(n.cC,{style:{display:"flex"},children:[(0,g.jsx)("div",{style:{cursor:"pointer",color:"blue"},onClick:()=>{return i=null===e||void 0===e?void 0:e.id,h(...d.filter(e=>e.id===i)),void a(!c);var i},children:(0,g.jsx)(B.g,{value:"activity.id",icon:F.ROs})}),(0,g.jsx)("div",{style:{cursor:"pointer",color:"red",marginLeft:"10px"},onClick:()=>C(e.id),children:(0,g.jsx)(B.g,{icon:F.yLS})})]})]},null===e||void 0===e?void 0:e.id))})]})]}),(0,g.jsxs)(n.zS,{size:"md",style:{backgroundColor:"#01579b",color:"white"},visible:c,onClose:()=>{a(!1),m((0,b.me)())},children:[(0,g.jsx)(n.E4,{children:(0,g.jsx)(n.lb,{children:"Update Material"})}),(0,g.jsx)(n.Tc,{children:(0,g.jsxs)(n.qI,{className:"row g-3 needs-validation",onSubmit:e=>{e.preventDefault();const i=(0,t.A)((0,t.A)({},x),{},{estId:u.id});m((0,b.Kq)(i)).then(()=>m((0,b.pB)(null===r||void 0===r?void 0:r.id)))},style:{fontsize:"0.7rem"},children:[(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Name"}),(0,g.jsx)(n.OG,{type:"text",id:"validationCustom03",required:!0,name:"editName",defaultValue:null===u||void 0===u?void 0:u.name,onChange:f})]}),(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Quantity"}),(0,g.jsx)(n.OG,{type:"number",id:"validationCustom03",required:!0,name:"quantity",defaultValue:null===u||void 0===u?void 0:u.quantity,onChange:f})]}),(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Unit"}),(0,g.jsx)(n.OG,{type:"text",id:"validationCustom03",required:!0,name:"editUnit",defaultValue:null===u||void 0===u?void 0:u.unit,onChange:f})]}),(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Price"}),(0,g.jsx)(n.OG,{type:"text",id:"validationCustom03",required:!0,name:"materialPrice",defaultValue:null===u||void 0===u?void 0:u.price,onChange:f})]}),(0,g.jsx)(n.UF,{xs:12,children:(0,g.jsx)(n.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)"},children:i?"Updating...":"Update Material"})})]})})]}),(0,g.jsx)("div",{children:(0,g.jsx)(U.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:i,children:(0,g.jsx)(I.A,{color:"inherit"})})}),l&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:l}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),s&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:s}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})},$=()=>{var e;const i=(0,v.wA)(),{resourceEquipments:l,loadingResource:s,message:d,error:r}=(0,v.d4)(C.GN),{singleProject:c}=(0,v.d4)(p.Br),[a,u]=(0,o.useState)(!1),[h,x]=(0,o.useState)([]),[j,m]=(0,o.useState)(null);(0,o.useEffect)(()=>{i((0,p.EQ)(null===c||void 0===c?void 0:c.id))},[i,null===c||void 0===c?void 0:c.id]),(0,o.useEffect)(()=>{i((0,C.KN)(null===c||void 0===c?void 0:c.id))},[i,null===c||void 0===c?void 0:c.id]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{i((0,C.$9)())},3e3);return()=>clearTimeout(e)},[i,d,r,d,r,s]);const b=e=>{i((0,C.o0)({resourceIds:[e],id:c.id})).then(()=>i((0,C.KN)(null===c||void 0===c?void 0:c.id)))},f=e=>{const{name:i,value:l}=e.target;m((0,t.A)((0,t.A)({},j),{},{[i]:l}))};return(0,g.jsxs)(g.Fragment,{children:[(null===l||void 0===l?void 0:l.length)>0&&(0,g.jsxs)(n.UF,{xs:12,children:[(0,g.jsx)(n.V0,{style:{backgroundColor:"#01579b",color:"white"},children:(0,g.jsx)("strong",{children:"Equipment Library "})}),(0,g.jsxs)(n._v,{striped:!0,hover:!0,bordered:!0,borderColor:"dark",style:{fontSize:"0.75rem"},children:[(0,g.jsx)(n.wV,{children:(0,g.jsxs)(n.YI,{style:{backgroundColor:"#01579b"},children:[(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"ID"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Equipments"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Unit"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Number"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Hire Rate"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Action"})]})}),null===l||void 0===l?void 0:l.map(e=>(0,g.jsx)(n.jS,{children:(0,g.jsxs)(n.YI,{children:[(0,g.jsx)(n.cC,{children:"E".concat(null===e||void 0===e?void 0:e.id)}),(0,g.jsx)(n.cC,{children:null===e||void 0===e?void 0:e.name}),(0,g.jsx)(n.cC,{children:null===e||void 0===e?void 0:e.unit}),(0,g.jsx)(n.cC,{children:null===e||void 0===e?void 0:e.number}),(0,g.jsx)(n.cC,{children:null===e||void 0===e?void 0:e.hireRatePrice}),(0,g.jsxs)(n.cC,{style:{display:"flex"},children:[(0,g.jsx)("div",{style:{cursor:"pointer",color:"blue"},onClick:()=>{return i=e.id,x(...l.filter(e=>e.id===i)),void u(!a);var i},children:(0,g.jsx)(B.g,{icon:F.ROs})}),(0,g.jsx)("div",{style:{cursor:"pointer",color:"red",marginLeft:"10px"},onClick:()=>b(e.id),children:(0,g.jsx)(B.g,{icon:F.yLS})})]})]})},null===e||void 0===e?void 0:e.id))]})]}),0===(null===l||void 0===l?void 0:l.length)&&(0,g.jsxs)("h6",{children:["No Equipment resources yet added to your project"," ",(0,g.jsx)("span",{style:{color:"rgb(1, 87, 155)",fontWeight:700,fontSize:"17px"},children:null===c||void 0===c||null===(e=c.name)||void 0===e?void 0:e.toUpperCase()})," "]}),(0,g.jsxs)(n.zS,{size:"md",style:{backgroundColor:"#01579b",color:"white"},visible:a,onClose:()=>{u(!1)},children:[(0,g.jsx)(n.E4,{children:(0,g.jsx)(n.lb,{children:"Update Equipment"})}),(0,g.jsx)(n.Tc,{children:(0,g.jsxs)(n.qI,{className:"row g-3 needs-validation",onSubmit:e=>{e.preventDefault();const l=(0,t.A)((0,t.A)({},j),{},{estId:h.id});i((0,C.lz)(l)).then(()=>i((0,C.KN)(null===c||void 0===c?void 0:c.id)))},style:{fontsize:"0.7rem"},children:[(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Name"}),(0,g.jsx)(n.OG,{type:"text",id:"validationCustom03",required:!0,name:"editName",defaultValue:null===h||void 0===h?void 0:h.name,onChange:f})]}),(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Number"}),(0,g.jsx)(n.OG,{type:"number",id:"validationCustom03",required:!0,name:"number",defaultValue:null===h||void 0===h?void 0:h.number,onChange:f})]}),(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Unit"}),(0,g.jsx)(n.OG,{type:"text",id:"validationCustom03",required:!0,name:"editUnit",defaultValue:null===h||void 0===h?void 0:h.unit,onChange:f})]}),(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Price"}),(0,g.jsx)(n.OG,{type:"text",id:"validationCustom03",required:!0,name:"equipmentPrice",defaultValue:null===h||void 0===h?void 0:h.hireRatePrice,onChange:f})]}),(0,g.jsx)(n.UF,{xs:12,children:(0,g.jsx)(n.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)"},size:"sm",children:s?"Updating...":"Update Equipment"})})]})})]}),(0,g.jsx)("div",{children:(0,g.jsx)(U.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:s,children:(0,g.jsx)(I.A,{color:"inherit"})})}),d&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:d}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),r&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:r}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})},T=()=>{var e;const[i,l]=(0,o.useState)(!1),[s,d]=(0,o.useState)([]),[r,c]=(0,o.useState)(null),a=(0,v.wA)(),{message:u,error:h,updateMessage:x,updateError:j,isLoading:m,loadingResource:b,subcontractorResources:f}=(0,v.d4)(S.Tu),{singleProject:C}=(0,v.d4)(p.Br);(0,o.useEffect)(()=>{a((0,p.EQ)(null===C||void 0===C?void 0:C.id))},[a,null===C||void 0===C?void 0:C.id]),(0,o.useEffect)(()=>{a((0,S.Kg)(null===C||void 0===C?void 0:C.id))},[a,null===C||void 0===C?void 0:C.id]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{a((0,S.DA)())},3e3);return()=>clearTimeout(e)},[a,u,h,x,j,m]);const y=e=>{const{name:i,value:l}=e.target;c((0,t.A)((0,t.A)({},r),{},{[i]:l}))},w=e=>{a((0,S.DO)({resourceIds:[e],id:C.id})).then(()=>a((0,S.Kg)(null===C||void 0===C?void 0:C.id)))};return(0,g.jsxs)(g.Fragment,{children:[0===(null===f||void 0===f?void 0:f.length)&&(0,g.jsxs)("h6",{children:["No Subcontractor resources yet added to your project"," ",(0,g.jsx)("span",{style:{color:"rgb(1, 87, 155)",fontWeight:700,fontSize:"17px"},children:null===C||void 0===C||null===(e=C.name)||void 0===e?void 0:e.toUpperCase()})," "]}),(null===f||void 0===f?void 0:f.length)>0&&(0,g.jsxs)(n.UF,{xs:12,children:[(0,g.jsx)(n.V0,{style:{backgroundColor:"#01579b",color:"white"},children:(0,g.jsx)("strong",{children:"Subcontractor Library "})}),(0,g.jsxs)(n._v,{striped:!0,hover:!0,bordered:!0,borderColor:"dark",style:{fontSize:"0.75rem"},children:[(0,g.jsx)(n.wV,{children:(0,g.jsxs)(n.YI,{style:{backgroundColor:"#01579b"},children:[(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"ID"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Name"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Quantity"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Unit"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Rate"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Action"})]})}),(0,g.jsx)(n.jS,{children:null===f||void 0===f?void 0:f.map(e=>(0,g.jsxs)(n.YI,{children:[(0,g.jsx)(n.cC,{children:"S".concat(null===e||void 0===e?void 0:e.id)}),(0,g.jsx)(n.cC,{children:null===e||void 0===e?void 0:e.name}),(0,g.jsx)(n.cC,{children:null===e||void 0===e?void 0:e.quantity}),(0,g.jsx)(n.cC,{children:null===e||void 0===e?void 0:e.unit}),(0,g.jsx)(n.cC,{children:null===e||void 0===e?void 0:e.price}),(0,g.jsxs)(n.cC,{style:{display:"flex"},children:[(0,g.jsx)("div",{style:{cursor:"pointer",color:"blue"},onClick:()=>{return o=null===e||void 0===e?void 0:e.id,d(...f.filter(e=>e.id===o)),void l(!i);var o},children:(0,g.jsx)(B.g,{value:"activity.id",icon:F.ROs})}),(0,g.jsx)("div",{style:{cursor:"pointer",color:"red",marginLeft:"10px"},onClick:()=>w(null===e||void 0===e?void 0:e.id),children:(0,g.jsx)(B.g,{icon:F.yLS})})]})]},null===e||void 0===e?void 0:e.id))})]})]}),(0,g.jsxs)(n.zS,{size:"md",style:{backgroundColor:"#01579b",color:"white"},visible:i,onClose:()=>{l(!1)},children:[(0,g.jsx)(n.E4,{children:(0,g.jsx)(n.lb,{children:"Update SubContractor"})}),(0,g.jsx)(n.Tc,{children:(0,g.jsxs)(n.qI,{className:"row g-3 needs-validation",onSubmit:e=>{e.preventDefault();const i=(0,t.A)((0,t.A)({},r),{},{estId:s.id});a((0,S.U2)(i)).then(()=>a((0,S.Kg)(null===C||void 0===C?void 0:C.id)))},style:{fontsize:"0.7rem"},children:[(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Name"}),(0,g.jsx)(n.OG,{type:"text",id:"validationCustom03",required:!0,name:"editName",defaultValue:null===s||void 0===s?void 0:s.name,onChange:y})]}),(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Quantity"}),(0,g.jsx)(n.OG,{type:"number",id:"validationCustom03",required:!0,name:"quantity",defaultValue:null===s||void 0===s?void 0:s.quantity,onChange:y})]}),(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Unit"}),(0,g.jsx)(n.OG,{type:"text",id:"validationCustom03",required:!0,name:"editUnit",defaultValue:null===s||void 0===s?void 0:s.unit,onChange:y})]}),(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Rate"}),(0,g.jsx)(n.OG,{type:"text",id:"validationCustom03",required:!0,name:"price",defaultValue:null===s||void 0===s?void 0:s.price,onChange:y})]}),(0,g.jsx)(n.UF,{xs:12,children:(0,g.jsx)(n.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)"},children:m?"Updating...":"Update SubContractor"})})]})})]}),(0,g.jsx)("div",{children:(0,g.jsx)(U.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:b,children:(0,g.jsx)(I.A,{color:"inherit"})})}),u&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:u}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),h&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:h}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})},L=()=>{var e;const[i,l]=(0,o.useState)(!1),[s,d]=(0,o.useState)([]),[r,c]=(0,o.useState)(null),a=(0,v.wA)(),{message:u,error:h,loadingResource:x,resourceLabours:j}=(0,v.d4)(A.lt),{singleProject:m}=(0,v.d4)(p.Br);(0,o.useEffect)(()=>{a((0,A.Wo)(null===m||void 0===m?void 0:m.id))},[a,null===m||void 0===m?void 0:m.id]),(0,o.useEffect)(()=>{a((0,p.EQ)(null===m||void 0===m?void 0:m.id))},[a,null===m||void 0===m?void 0:m.id]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{a((0,A.o2)())},3e3);return()=>clearTimeout(e)},[a,u,h,u,h,x]);const b=e=>{const{name:i,value:l}=e.target;c((0,t.A)((0,t.A)({},r),{},{[i]:l}))};return(0,g.jsxs)(g.Fragment,{children:[(null===j||void 0===j?void 0:j.length)>0&&(0,g.jsxs)(n.UF,{xs:12,children:[(0,g.jsx)(n.V0,{style:{backgroundColor:"#01579b",color:"white"},children:(0,g.jsx)("strong",{children:"Labour Library"})}),(0,g.jsxs)(n._v,{striped:!0,hover:!0,bordered:!0,borderColor:"dark",style:{fontSize:"0.75rem"},children:[(0,g.jsx)(n.wV,{children:(0,g.jsxs)(n.YI,{style:{backgroundColor:"#01579b"},children:[(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"ID"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Name"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"quantity"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"unit"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"wage"}),(0,g.jsx)(n.$s,{style:{color:"white",fontSize:"0.9rem"},scope:"col",children:"Action"})]})}),(0,g.jsx)(n.jS,{children:null===j||void 0===j?void 0:j.map(e=>(0,g.jsxs)(n.YI,{children:[(0,g.jsx)(n.cC,{children:"L".concat(e.id)}),(0,g.jsx)(n.cC,{children:e.name}),(0,g.jsx)(n.cC,{children:e.number}),(0,g.jsx)(n.cC,{children:e.unit}),(0,g.jsx)(n.cC,{children:e.wages}),(0,g.jsxs)(n.cC,{style:{display:"flex"},children:[(0,g.jsx)("div",{style:{cursor:"pointer",color:"blue"},onClick:()=>{return o=e.id,d(...j.filter(e=>e.id===o)),void l(!i);var o},children:(0,g.jsx)(B.g,{value:"activity.id",icon:F.ROs})}),(0,g.jsx)("div",{style:{cursor:"pointer",color:"red",marginLeft:"10px"},onClick:()=>{return i=e.id,void a((0,A.x8)({resourceIds:[i],id:m.id})).then(()=>a((0,A.Wo)(null===m||void 0===m?void 0:m.id)));var i},children:(0,g.jsx)(B.g,{icon:F.yLS})})]})]},e.id))})]})]}),0===(null===j||void 0===j?void 0:j.length)&&(0,g.jsxs)("h6",{children:["No Labour resources yet added to your project"," ",(0,g.jsx)("span",{style:{color:"rgb(1, 87, 155)",fontWeight:700,fontSize:"17px"},children:null===m||void 0===m||null===(e=m.name)||void 0===e?void 0:e.toUpperCase()})," "]}),(0,g.jsxs)(n.zS,{size:"md",style:{backgroundColor:"#01579b",color:"white"},visible:i,onClose:()=>{l(!1)},children:[(0,g.jsx)(n.E4,{children:(0,g.jsx)(n.lb,{children:"Update Labour"})}),(0,g.jsx)(n.Tc,{children:(0,g.jsxs)(n.qI,{className:"row g-3 needs-validation",onSubmit:e=>{e.preventDefault();const i=(0,t.A)((0,t.A)({},r),{},{estId:s.id});a((0,A.ME)(i)).then(()=>a((0,A.Wo)(null===m||void 0===m?void 0:m.id)))},style:{fontsize:"0.7rem"},children:[(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Name"}),(0,g.jsx)(n.OG,{type:"text",id:"validationCustom03",required:!0,name:"editName",defaultValue:null===s||void 0===s?void 0:s.name,onChange:b})]}),(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Number"}),(0,g.jsx)(n.OG,{type:"number",id:"validationCustom03",required:!0,name:"number",defaultValue:null===s||void 0===s?void 0:s.number,onChange:b})]}),(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Unit"}),(0,g.jsx)(n.OG,{type:"text",id:"validationCustom03",required:!0,name:"editUnit",defaultValue:null===s||void 0===s?void 0:s.unit,onChange:b})]}),(0,g.jsxs)(n.UF,{md:12,children:[(0,g.jsx)(n.A6,{htmlFor:"validationCustom03",children:"Wage"}),(0,g.jsx)(n.OG,{type:"text",id:"validationCustom03",required:!0,name:"wages",defaultValue:null===s||void 0===s?void 0:s.wages,onChange:b})]}),(0,g.jsx)(n.UF,{xs:12,children:(0,g.jsx)(n.Q_,{color:"btn btn-info text-white",type:"submit",style:{backgroundColor:"rgb(1, 87, 155)"},children:x?"Updating...":"Update Labour"})})]})})]}),(0,g.jsx)("div",{children:(0,g.jsx)(U.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:x,children:(0,g.jsx)(I.A,{color:"inherit"})})}),u&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:u}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),h&&(0,g.jsx)(n.Yq,{placement:"top-end",children:(0,g.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(n.Bw,{children:h}),(0,g.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})},W=["children","value","index"];function P(e){const{children:i,value:l,index:o}=e,n=(0,s.A)(e,W);return(0,g.jsx)(h.A,(0,t.A)((0,t.A)({component:"div",role:"tabpanel",hidden:l!==o,id:"action-tabpanel-".concat(o),"aria-labelledby":"action-tab-".concat(o)},n),{},{children:l===o&&(0,g.jsx)(x.A,{sx:{p:6},children:i})}))}function R(e){return{id:"action-tab-".concat(e),"aria-controls":"action-tabpanel-".concat(e)}}function V(){var e;const i=(0,r.A)(),[l,n]=(0,o.useState)(0),[s,h]=(0,o.useState)(!1),{projects:j,singleProject:b,singleProjectGrouping:f,projectsGrouping:y}=(0,v.d4)(p.Br),S=(0,v.wA)();(0,o.useEffect)(()=>{S((0,p.EQ)(null===b||void 0===b?void 0:b.id))},[S,null===b||void 0===b?void 0:b.id]),(0,o.useEffect)(()=>{S((0,p.cf)())},[S]),(0,o.useEffect)(()=>{S((0,p.a2)())},[S]),(0,o.useEffect)(()=>{S((0,C.KN)(null===b||void 0===b?void 0:b.id))},[S,null===b||void 0===b?void 0:b.id]);const w=null===y||void 0===y?void 0:y.map(e=>({value:e.id,label:e.name})),A=null===j||void 0===j?void 0:j.filter(e=>null===e.groupId),z=null===f||void 0===f?void 0:f.projects;let k;k=void 0!==z?null===z||void 0===z?void 0:z.concat(A):A;const N=null===(e=k)||void 0===e?void 0:e.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name}));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{width:"45%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,g.jsx)(m.A,{isClearable:!0,onChange:e=>{h(!0);const i={id:e.value,labourName:e.label};S((0,p.Le)({id:i.id})).then(()=>h(!1))},options:w,placeholder:f?"PROJECT: ".concat(null===f||void 0===f?void 0:f.name):"Select a project",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),y&&(0,g.jsx)("div",{style:{marginBottom:"20px",width:"40%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,g.jsx)(m.A,{isClearable:!0,onChange:(e,i)=>{h(!0);const l={id:e.value,labourName:e.label};S((0,p.EQ)(l.id)).then(()=>h(!1))},options:N,placeholder:b?"SUB-PROJECT: ".concat(null===b||void 0===b?void 0:b.name):"Select a sub-project",styles:{option:(e,i)=>(0,t.A)((0,t.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,g.jsxs)(x.A,{sx:{bgcolor:"background.paper",width:"auto",position:"relative",minHeight:200},children:[(0,g.jsx)(c.A,{position:"static",color:"default",children:(0,g.jsxs)(a.A,{value:l,onChange:(e,i)=>{n(i)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"action tabs example",children:[(0,g.jsx)(u.A,(0,t.A)({style:{fontWeight:"bold"},label:"Equipments"},R(0))),(0,g.jsx)(u.A,(0,t.A)({style:{fontWeight:"bold"},label:"Materials"},R(1))),(0,g.jsx)(u.A,(0,t.A)({style:{fontWeight:"bold"},label:"SubContractor"},R(2))),(0,g.jsx)(u.A,(0,t.A)({style:{fontWeight:"bold"},label:"Labour"},R(3)))]})}),(0,g.jsxs)(d.Ay,{axis:"rtl"===i.direction?"x-reverse":"x",index:l,onChangeIndex:e=>{n(e)},children:[(0,g.jsx)(P,{value:l,index:0,dir:i.direction,children:(0,g.jsx)($,{})}),(0,g.jsx)(P,{value:l,index:1,dir:i.direction,children:(0,g.jsx)(Y,{})}),(0,g.jsx)(P,{value:l,index:2,dir:i.direction,children:(0,g.jsx)(T,{})}),(0,g.jsx)(P,{value:l,index:3,dir:i.direction,children:(0,g.jsx)(L,{})})]})]}),(0,g.jsx)("div",{children:(0,g.jsx)(U.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:s,children:(0,g.jsx)(I.A,{color:"inherit"})})})]})}const O=()=>{const[e,i]=(0,o.useState)(1);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(n.by,{style:{marginBottom:"20px",backgroundColor:"white",fontWeight:"bold",cursor:"pointer",width:"fit-content"},variant:"pills",role:"tablist",children:[(0,g.jsx)(n.g9,{children:(0,g.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:0===e?"rgb(1, 87, 155)":"",color:0===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:0===e,onClick:()=>i(0),children:"Add Resource"})}),(0,g.jsx)(n.g9,{children:(0,g.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:1===e?"rgb(1, 87, 155)":"",color:1===e?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:1===e,onClick:()=>i(1),children:"Existing Resources"})})]}),(0,g.jsxs)(n.eL,{children:[(0,g.jsx)(n.x1,{role:"tabpanel","aria-labelledby":"home-tab",visible:0===e,children:(0,g.jsx)(q,{})}),(0,g.jsx)(n.x1,{role:"tabpanel","aria-labelledby":"profile-tab",visible:1===e,children:(0,g.jsx)(V,{})})]})]})}}}]);