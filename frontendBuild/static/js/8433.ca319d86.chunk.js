"use strict";(self.webpackChunk_ds_estimation_construction_web_app=self.webpackChunk_ds_estimation_construction_web_app||[]).push([[8433],{30091:(e,i,t)=>{t.d(i,{A:()=>a,v:()=>r});t(9950);var l=t(73878),o=t(83990),n=t(42891),d=t(44414);const r=()=>{const{token:e}=(0,l.d4)(o.dt),{payload:{name:i}}=(0,n.A)(e),t=(new Date).getHours(),r=(new Date).getTime(),a=new Date(r).toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});return(0,d.jsxs)("div",{className:"jumbotron",style:{height:"100%",padding:"1.3rem",backgroundColor:"#fff",fontWeight:"bold"},children:[(0,d.jsx)("p",{className:"p-2",children:(0,d.jsx)("b",{children:a})}),t<12&&(0,d.jsxs)("h5",{className:"display-4",children:["Good morning, ",i,"!"]}),t>=12&&t<18&&(0,d.jsxs)("h5",{className:"display-4",children:["Good afternoon, ",i,"!"]}),t>=18&&(0,d.jsxs)("h5",{className:"display-4",children:["Good evening, ",i,"!"]})]})},a=()=>{const{token:e}=(0,l.d4)(o.dt),{payload:{name:i,role:t}}=(0,n.A)(e);return(0,d.jsx)("div",{className:"jumbotron",children:"owner"===t?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("h1",{className:"display-4",children:["Hello, ",i,"!"]}),(0,d.jsx)("p",{className:"lead",children:"There is no Template yet. Please create a new."}),(0,d.jsx)("a",{className:"btn btn-primary btn-md",href:"#/project/create",role:"button",children:"Create Template"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("h1",{className:"display-4",children:["Hello, ",i,"!"]}),(0,d.jsx)("p",{className:"lead",children:"You don't have any projects yet. Please create a new project."}),(0,d.jsx)("a",{className:"btn btn-primary btn-md",href:"#/project/list",role:"button",style:{backgroundColor:"#3399ff",borderColor:"#3399ff",fontWeight:550},children:"Go to Project pannel"})]})})}},33269:(e,i,t)=>{t.d(i,{A:()=>w});var l=t(89379),o=t(9950),n=t(87830),d=t(69015),r=t(8452),a=t(51602),s=t(14517),c=t(94157),u=t(33043),x=t(36386),p=t(77916),m=t(40253),v=t(35901),h=t(48662),f=t(16192),g=t(16714),b=t(37509),y=t(39324),j=t(74959),S=t(44414);const w={ViewEdit:(0,o.forwardRef)((e,i)=>(0,S.jsx)(j.g,{style:{color:"blue",fontSize:"18px"},icon:y.ROs})),Add:(0,o.forwardRef)((e,i)=>(0,S.jsx)(n.A,(0,l.A)((0,l.A)({style:{color:"blue"}},e),{},{ref:i}))),Check:(0,o.forwardRef)((e,i)=>(0,S.jsx)(r.A,(0,l.A)((0,l.A)({style:{color:"blue"}},e),{},{ref:i}))),Clear:(0,o.forwardRef)((e,i)=>(0,S.jsx)(c.A,(0,l.A)((0,l.A)({style:{color:"red"}},e),{},{ref:i}))),Delete:(0,o.forwardRef)((e,i)=>(0,S.jsx)(u.A,(0,l.A)((0,l.A)({style:{color:"red"}},e),{},{ref:i}))),DetailPanel:(0,o.forwardRef)((e,i)=>(0,S.jsx)(s.A,(0,l.A)((0,l.A)({},e),{},{ref:i}))),Edit:(0,o.forwardRef)((e,i)=>(0,S.jsx)(x.A,(0,l.A)((0,l.A)({style:{color:"green"}},e),{},{ref:i}))),Export:(0,o.forwardRef)((e,i)=>(0,S.jsx)(f.A,(0,l.A)((0,l.A)({style:{color:"blue"}},e),{},{ref:i}))),Filter:(0,o.forwardRef)((e,i)=>(0,S.jsx)(p.A,(0,l.A)((0,l.A)({},e),{},{ref:i}))),FirstPage:(0,o.forwardRef)((e,i)=>(0,S.jsx)(m.A,(0,l.A)((0,l.A)({},e),{},{ref:i}))),LastPage:(0,o.forwardRef)((e,i)=>(0,S.jsx)(v.A,(0,l.A)((0,l.A)({},e),{},{ref:i}))),NextPage:(0,o.forwardRef)((e,i)=>(0,S.jsx)(s.A,(0,l.A)((0,l.A)({},e),{},{ref:i}))),PreviousPage:(0,o.forwardRef)((e,i)=>(0,S.jsx)(a.A,(0,l.A)((0,l.A)({},e),{},{ref:i}))),ResetSearch:(0,o.forwardRef)((e,i)=>(0,S.jsx)(c.A,(0,l.A)((0,l.A)({},e),{},{ref:i}))),Search:(0,o.forwardRef)((e,i)=>(0,S.jsx)(g.A,(0,l.A)((0,l.A)({},e),{},{ref:i}))),SortArrow:(0,o.forwardRef)((e,i)=>(0,S.jsx)(d.A,(0,l.A)((0,l.A)({},e),{},{ref:i}))),ThirdStateCheck:(0,o.forwardRef)((e,i)=>(0,S.jsx)(h.A,(0,l.A)((0,l.A)({},e),{},{ref:i}))),ViewColumn:(0,o.forwardRef)((e,i)=>(0,S.jsx)(b.A,(0,l.A)((0,l.A)({},e),{},{ref:i})))}},38433:(e,i,t)=>{t.r(i),t.d(i,{default:()=>D});var l=t(89379),o=t(9950),n=t(49911),d=t(88381),r=t(68863),a=t(39324),s=t(74959),c=t(37017),u=t(73878),x=t(51342),p=t(92686),m=t(92560),v=t(5386),h=t(44414);const f=()=>{var e,i,t;const[l,d]=(0,o.useState)((0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"Expand "}),(0,h.jsx)(s.g,{icon:a.tdl})]})),[f,g]=(0,o.useState)(null),[b,y]=(0,o.useState)(null),[j,S]=(0,o.useState)(!1),[w,C]=(0,o.useState)([]),[A,z]=(0,o.useState)([]),k=(0,u.wA)(),{singleProject:T}=(0,u.d4)(p.Br),{allConsumedActivities:N}=(0,u.d4)(x.$z),Q=null===T||void 0===T?void 0:T.id;(0,o.useEffect)(()=>{k((0,x.jI)())},[k]),(0,o.useEffect)(()=>{k((0,x.Zu)())},[k]),(0,o.useEffect)(()=>{k((0,p.cf)())},[k]);const E=null===T||void 0===T||null===(e=T.activities)||void 0===e?void 0:e.map(e=>{var i;return null===e||void 0===e||null===(i=e.category)||void 0===i?void 0:i.name}),P=null===T||void 0===T||null===(i=T.activities)||void 0===i||null===(t=i.map((e,i)=>{var t;return{id:i+1,name:null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.name}}))||void 0===t?void 0:t.filter((e,i)=>{if(E.indexOf(e.name)===i)return e}),R=null===P||void 0===P?void 0:P.map((e,i)=>{var t,l,o,n,d;return{allIndex:i,id:i+1,name:e.name,unit:" ",quantity:" ",rate:" ",amount:null===(t=Number(null===T||void 0===T||null===(l=T.activities)||void 0===l||null===(o=l.filter(i=>{var t;return(null===(t=i.category)||void 0===t?void 0:t.name)===(null===e||void 0===e?void 0:e.name)}))||void 0===o?void 0:o.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0)))||void 0===t?void 0:t.toLocaleString(),calculateAmount:null===T||void 0===T||null===(n=T.activities)||void 0===n||null===(d=n.filter(i=>{var t;return(null===(t=i.category)||void 0===t?void 0:t.name)===e.name}))||void 0===d?void 0:d.map(e=>parseFloat(e.estimationTotalAmount||0)).reduce((e,i)=>e+i,0),_props:{bgColor:"#e2e5de"}}}),F=null===R||void 0===R?void 0:R.map(e=>e.allIndex),B=null===R||void 0===R?void 0:R.map(e=>e.calculateAmount).reduce((e,i)=>e+i,0),U=e=>{const i=e.target.value,t=e.target.checked;C(t?[...w,i]:null===w||void 0===w?void 0:w.filter(e=>e!==i))};return(0,h.jsxs)("div",{style:{backgroundColor:"#CCCCCC",padding:"10px",fontSize:"0.75rem"},children:[(0,h.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,h.jsx)(n.Q_,{onClick:e=>{if(w.length>0){let e=[];for(let t of w){var i;e.push(...null===T||void 0===T||null===(i=T.activities)||void 0===i?void 0:i.filter(e=>(null===e||void 0===e?void 0:e.id)===parseInt(t)))}k((0,x.GW)([...N,...e])),console.log("setSelectedActivityIde",e),g("Activity added Successfully"),setTimeout(()=>{g(null)},2e3)}else y("Please select activity"),setTimeout(()=>{y(null)},2e3)},style:{fontWeight:500,color:"white",fontSize:"0.70rem",marginTop:"5px"},color:"info",size:"sm",children:"Select Activities"}),(0,h.jsx)(n.Q_,{style:{fontWeight:500,marginLeft:"5px",color:"white",fontSize:"0.70rem",marginTop:"5px"},onClick:()=>{const e=A.indexOf(1);let i=A.slice();-1!==e?(d((0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"Expand "}),(0,h.jsx)(s.g,{icon:a.tdl})]})),i.splice(i)):(d((0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"Collapse "}),(0,h.jsx)(s.g,{icon:a.GF6})]})),i=F),z(i)},color:"info",size:"sm",children:l})]}),(0,h.jsxs)("div",{style:{backgroundColor:"#fbfbf8",fontWeight:"bold"},children:[(0,h.jsx)(c.Pd,{columns:[{key:"id",filter:!1,sorter:!1,_props:{className:"fw-semibold"},_style:{width:"8%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"name",label:"Item Description",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"60%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"unit",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"10%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"quantity",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"10%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"rate",labet:"unit rate",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"10%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"amount",filter:!1,sorter:!1,_props:{color:"primary"},_style:{width:"10%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"}},{key:"show_details",label:"",_style:{width:"3%",backgroundColor:"#01579b",color:"#fff",fontSize:"0.85rem"},filter:!1,sorter:!1,_props:{color:"primary",className:"fw-semibold"}}],items:R,pagination:!0,itemsPerPage:50,scopedColumns:{show_details:e=>(0,h.jsx)("td",{className:"py-2",children:(0,h.jsx)("div",{onClick:()=>{(e=>{const i=A.indexOf(e);let t=A.slice();-1!==i?t.splice(i,1):t=[...A,e],z(t)})(e._id)},children:A.includes(e._id)?(0,h.jsx)(s.g,{icon:a.GF6}):(0,h.jsx)(s.g,{icon:a.tdl})})}),details:e=>{var i,t;return(0,h.jsx)(n.x8,{visible:A.includes(e._id),children:(0,h.jsx)(n._v,{bordered:!0,borderColor:"#01579b",style:{backgroundColor:"white",fontWeight:450,fontSize:"0.75rem"},children:(0,h.jsx)(n.jS,{children:null===T||void 0===T||null===(i=T.activities)||void 0===i||null===(t=i.filter(i=>{var t;return(null===(t=i.category)||void 0===t?void 0:t.name)===e.name}))||void 0===t?void 0:t.map((i,t)=>(0,h.jsxs)(n.YI,{children:[(0,h.jsxs)(n.$s,{style:{width:"7%"},scope:"row",children:[(0,h.jsx)(r.A,{size:"small",value:i.id,onClick:U})," "," ",e.id,".",t+1]}),(0,h.jsx)(n.cC,{style:{width:"40%"},children:i.name}),(0,h.jsx)(n.cC,{style:{width:"7%"},children:i.estimationUnit}),(0,h.jsx)(n.cC,{style:{width:"5%"},children:Number(i.estimationQuantity).toLocaleString()}),(0,h.jsx)(n.cC,{style:{width:"5%"},children:Number(i.estimationRate).toLocaleString()||0}),(0,h.jsx)(n.cC,{style:{width:"7%"},children:Number(i.estimationTotalAmount).toLocaleString()||0})]},i.id+586))})})})}},tableProps:{responsive:!0}}),(0,h.jsxs)(n.zS,{size:"xl",style:{backgroundColor:"#01579b",color:"white"},visible:j,onClose:()=>{S(!1),k((0,p.EQ)(Q))},children:[(0,h.jsx)(n.E4,{}),(0,h.jsx)(n.Tc,{})]})]}),(0,h.jsx)("div",{style:{backgroundColor:"#01579b",width:"100%"},children:(0,h.jsxs)(m.A,{children:[(0,h.jsx)(v.A,{style:{paddingLeft:"21px",fontSize:"0.95rem",color:"white",fontWeight:"bold"},colSpan:3,children:"Grand Total:"}),(0,h.jsx)(v.A,{style:{fontSize:"0.95rem",color:"white",fontWeight:"bold"},colSpan:4,children:"".concat(Number(B).toLocaleString()," ").concat(null===T||void 0===T?void 0:T.currencyCode)})]})}),f&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:f}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),b&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:b}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})};var g=t(55956),b=t.n(g),y=t(33269),j=t(67580),S=t(46639),w=t(30091),C=t(79114);const A=function(){return(0,h.jsx)("div",{children:"AddEquipment"})};var z=t(44020);const k=e=>{var i;let{equipments:t}=e;const d=(0,u.wA)(),{singleProject:r}=(0,u.d4)(p.Br),{message:a,error:s}=(0,u.d4)(z.Os),[c,x]=(0,o.useState)(!1),m=y.A.Add;(0,o.useEffect)(()=>{const e=setTimeout(()=>{d((0,z.vi)())},3e3);return()=>clearTimeout(e)},[d,a,s]);const v=null===t||void 0===t||null===(i=t.allEquipments)||void 0===i?void 0:i.map(e=>(0,l.A)((0,l.A)({},e),{},{consumeAcrivityId:null===t||void 0===t?void 0:t.id,name:null===e||void 0===e?void 0:e.name,unit:null===e||void 0===e?void 0:e.unit,date:new Date,mQuantity:"---",mPrice:"---"}));return(0,h.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,h.jsx)("div",{children:(0,h.jsx)(b(),{title:"Record new Consumed Equipment",columns:[{title:"Id",field:"id",type:"text",editable:"never",align:"left",cellStyle:{fontSize:"12px"},headerStyle:{fontSize:"12px"}},{title:"Name",field:"name",type:"text",editable:"never",align:"left",cellStyle:{fontSize:"12px"},headerStyle:{fontSize:"12px"}},{title:"Unit",field:"unit",type:"text",editable:"never",align:"left",cellStyle:{fontSize:"12px",width:"5%"},headerStyle:{fontSize:"12px"}},{title:"date",field:"date",type:"date",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"Consumed Qty",field:"mQuantity",type:"numeric",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"Price",field:"mPrice",type:"numeric",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}}],data:v,icons:y.A,actions:[{icon:m,tooltip:"Add Equipment",isFreeAction:!0,onClick:e=>{x(!0)}}],editable:{onRowUpdate:(e,i)=>new Promise((t,l)=>{"---"===(null===e||void 0===e?void 0:e.mPrice)||"---"===(null===e||void 0===e?void 0:e.mQuantity)?t():d((0,z.Oj)({equipmentId:null===i||void 0===i?void 0:i.id,consumedQuantity:null===e||void 0===e?void 0:e.mQuantity,consumedPrice:null===e||void 0===e?void 0:e.mPrice,consumedDate:null===e||void 0===e?void 0:e.date,estimationId:null===i||void 0===i?void 0:i.consumeAcrivityId,name:null===i||void 0===i?void 0:i.name,unit:null===i||void 0===i?void 0:i.unit})).then(()=>{d((0,p.EQ)(null===r||void 0===r?void 0:r.id)),t()})})},options:{addRowPosition:"first",actionsColumnIndex:-1,paging:!1,paginationType:"stepped",showFirstLastPageButtons:!1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontWeight:"bold",width:"5%"},rowStyle:(e,i)=>i%2===0?{backgroundColor:"#eee"}:null}})}),(0,h.jsxs)(n.zS,{style:{backgroundColor:"#01579b",color:"white"},visible:c,onClose:()=>x(!1),children:[(0,h.jsx)(n.E4,{style:{backgroundColor:"#01579b",color:"white"},onClose:()=>x(!1),children:(0,h.jsx)(n.lb,{children:"Add a new Equipment"})}),(0,h.jsx)(n.Tc,{children:(0,h.jsx)(A,{})})]}),a&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:a}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),s&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:s}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})};var T=t(90222);const N=function(){return(0,h.jsx)("div",{children:"AddMaterial"})},Q=e=>{var i;let{materials:t}=e;const d=(0,u.wA)(),{singleProject:r}=(0,u.d4)(p.Br),{message:a,error:s}=(0,u.d4)(z.Os),{addSuccessMessage:c,addErrorMessage:m,updatedActivity:v}=(0,u.d4)(T.GN),[f,g]=(0,o.useState)(!1),j=y.A.Add;(0,o.useEffect)(()=>{const e=setTimeout(()=>{d((0,z.vi)())},3e3);return()=>clearTimeout(e)},[d,a,s]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{d((0,T.$9)())},3e3);return()=>clearTimeout(e)},[d,m,c]),(0,o.useEffect)(()=>{v&&d((0,x.q)(v))},[d,v]);const S=null===t||void 0===t||null===(i=t.allMaterials)||void 0===i?void 0:i.map(e=>{var i;return(0,l.A)((0,l.A)({},e),{},{name:null===e||void 0===e?void 0:e.name,unit:null===e||void 0===e?void 0:e.unit,date:new Date,amount:Number(null===e||void 0===e||null===(i=e.UserEstimationLibrary)||void 0===i?void 0:i.materialTotalAmount).toLocaleString(),mQuantity:"---",mPrice:"---"})});return(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{style:{marginBottom:"10px"},children:(0,h.jsx)(b(),{title:"Consumed Materials",columns:[{title:"Name",field:"name",type:"text",editable:"never",align:"left",cellStyle:{fontSize:"12px"},headerStyle:{fontSize:"12px"}},{title:"Unit",field:"unit",type:"text",editable:"never",align:"left",cellStyle:{fontSize:"12px",width:"5%"},headerStyle:{fontSize:"12px"}},{title:"date",field:"date",type:"date",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"Consumed Qty",field:"mQuantity",type:"numeric",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"Price",field:"mPrice",type:"numeric",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"Amount",field:"amount",type:"numeric",editable:"never",align:"left",cellStyle:{fontSize:"12px",width:"5%"},headerStyle:{fontSize:"12px"}}],data:S,icons:y.A,actions:[{icon:j,tooltip:"Add Material",isFreeAction:!0,onClick:e=>{g(!0)}}],editable:{onRowUpdate:(e,i)=>new Promise((l,o)=>{"---"===(null===e||void 0===e?void 0:e.mPrice)||"---"===(null===e||void 0===e?void 0:e.mQuantity)?l():d((0,z.rA)({materialId:null===i||void 0===i?void 0:i.id,consumedQuantity:null===e||void 0===e?void 0:e.mQuantity,consumedPrice:null===e||void 0===e?void 0:e.mPrice,consumedDate:null===e||void 0===e?void 0:e.date,estimationId:null===t||void 0===t?void 0:t.id,name:null===i||void 0===i?void 0:i.name,unit:null===i||void 0===i?void 0:i.unit})).then(()=>{d((0,p.EQ)(null===r||void 0===r?void 0:r.id)),l()})})},options:{addRowPosition:"first",actionsColumnIndex:-1,paging:!1,paginationType:"stepped",showFirstLastPageButtons:!1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontWeight:"bold",width:"5%"},rowStyle:(e,i)=>i%2===0?{backgroundColor:"#eee"}:null}})}),(0,h.jsxs)(n.zS,{style:{backgroundColor:"#01579b",color:"white"},visible:f,onClose:()=>g(!1),children:[(0,h.jsx)(n.E4,{style:{backgroundColor:"#01579b",color:"white"},onClose:()=>g(!1),children:(0,h.jsx)(n.lb,{children:"Add a new Material"})}),(0,h.jsx)(n.Tc,{children:(0,h.jsx)(N,{})})]}),c&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:c}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),m&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:m}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),a&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:a}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),s&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:s}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})};const E=function(){return(0,h.jsx)("div",{children:"AddLabour"})},P=e=>{var i;let{labours:t}=e;const d=(0,u.wA)(),{singleProject:r}=(0,u.d4)(p.Br),{message:a,error:s}=(0,u.d4)(z.Os),{addSuccessMessage:c,addErrorMessage:m,updatedActivity:v}=(0,u.d4)(T.GN),[f,g]=(0,o.useState)(!1),j=y.A.Add;(0,o.useEffect)(()=>{const e=setTimeout(()=>{d((0,z.vi)())},3e3);return()=>clearTimeout(e)},[d,a,s]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{d((0,T.$9)())},3e3);return()=>clearTimeout(e)},[d,m,c]),(0,o.useEffect)(()=>{v&&d((0,x.q)(v))},[d,v]);const S=null===t||void 0===t||null===(i=t.allLabours)||void 0===i?void 0:i.map(e=>{var i;return(0,l.A)((0,l.A)({},e),{},{name:null===e||void 0===e?void 0:e.name,unit:null===e||void 0===e?void 0:e.unit,date:new Date,amount:Number(null===e||void 0===e||null===(i=e.UserEstimationLibrary)||void 0===i?void 0:i.labourTotalAmount).toLocaleString(),mQuantity:"---",mPrice:"---"})});return(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{style:{marginBottom:"10px"},children:(0,h.jsx)(b(),{title:"Consumed Labours",columns:[{title:"Name",field:"name",type:"text",editable:"never",align:"left",cellStyle:{fontSize:"12px"},headerStyle:{fontSize:"12px"}},{title:"Unit",field:"unit",type:"text",editable:"never",align:"left",cellStyle:{fontSize:"12px",width:"5%"},headerStyle:{fontSize:"12px"}},{title:"date",field:"date",type:"date",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"Consumed Qty",field:"mQuantity",type:"numeric",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"Price",field:"mPrice",type:"numeric",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"Amount",field:"amount",type:"numeric",editable:"never",align:"left",cellStyle:{fontSize:"12px",width:"5%"},headerStyle:{fontSize:"12px"}}],data:S,icons:y.A,actions:[{icon:j,tooltip:"Add Equipment",isFreeAction:!0,onClick:e=>{g(!0)}}],editable:{onRowUpdate:(e,i)=>new Promise((l,o)=>{"---"===(null===e||void 0===e?void 0:e.mPrice)||"---"===(null===e||void 0===e?void 0:e.mQuantity)?l():d((0,z.jf)({labourId:null===i||void 0===i?void 0:i.id,consumedQuantity:null===e||void 0===e?void 0:e.mQuantity,consumedPrice:null===e||void 0===e?void 0:e.mPrice,consumedDate:null===e||void 0===e?void 0:e.date,estimationId:null===t||void 0===t?void 0:t.id,name:null===i||void 0===i?void 0:i.name,unit:null===i||void 0===i?void 0:i.unit})).then(()=>{d((0,p.EQ)(null===r||void 0===r?void 0:r.id)),l()})})},options:{addRowPosition:"first",actionsColumnIndex:-1,paging:!1,paginationType:"stepped",showFirstLastPageButtons:!1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontWeight:"bold",width:"5%"},rowStyle:(e,i)=>i%2===0?{backgroundColor:"#eee"}:null}})}),(0,h.jsxs)(n.zS,{style:{backgroundColor:"#01579b",color:"white"},visible:f,onClose:()=>g(!1),children:[(0,h.jsx)(n.E4,{style:{backgroundColor:"#01579b",color:"white"},onClose:()=>g(!1),children:(0,h.jsx)(n.lb,{children:"Add a new Labour"})}),(0,h.jsx)(n.Tc,{children:(0,h.jsx)(E,{})})]}),c&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:c}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),m&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:m}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),a&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:a}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),s&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:s}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})};const R=function(){return(0,h.jsx)("div",{children:"AddSubcontractor"})},F=e=>{var i;let{subcontractors:t}=e;const d=(0,u.wA)(),{singleProject:r}=(0,u.d4)(p.Br),{message:a,error:s}=(0,u.d4)(z.Os),{addSuccessMessage:c,addErrorMessage:m,updatedActivity:v}=(0,u.d4)(T.GN),[f,g]=(0,o.useState)(!1),j=y.A.Add;(0,o.useEffect)(()=>{const e=setTimeout(()=>{d((0,z.vi)())},3e3);return()=>clearTimeout(e)},[d,a,s]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{d((0,T.$9)())},3e3);return()=>clearTimeout(e)},[d,m,c]),(0,o.useEffect)(()=>{v&&d((0,x.q)(v))},[d,v]);const S=null===t||void 0===t||null===(i=t.allSubContractors)||void 0===i?void 0:i.map(e=>{var i;return(0,l.A)((0,l.A)({},e),{},{name:null===e||void 0===e?void 0:e.name,unit:null===e||void 0===e?void 0:e.unit,date:new Date,amount:Number(null===e||void 0===e||null===(i=e.UserEstimationLibrary)||void 0===i?void 0:i.subContractorTotalAmount).toLocaleString(),mQuantity:"---",mPrice:"---"})});return(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{style:{marginBottom:"10px"},children:(0,h.jsx)(b(),{title:"Consumed SubContractors",columns:[{title:"Name",field:"name",type:"text",editable:"never",align:"left",cellStyle:{fontSize:"12px"},headerStyle:{fontSize:"12px"}},{title:"Unit",field:"unit",type:"text",editable:"never",align:"left",cellStyle:{fontSize:"12px",width:"5%"},headerStyle:{fontSize:"12px"}},{title:"date",field:"date",type:"date",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"Consumed Qty",field:"mQuantity",type:"numeric",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"Price",field:"mPrice",type:"numeric",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"Amount",field:"amount",type:"numeric",editable:"never",align:"left",cellStyle:{fontSize:"12px",width:"5%"},headerStyle:{fontSize:"12px"}}],data:S,icons:y.A,actions:[{icon:j,tooltip:"Add Equipment",isFreeAction:!0,onClick:e=>{g(!0)}}],editable:{onRowUpdate:(e,i)=>new Promise((l,o)=>{"---"===(null===e||void 0===e?void 0:e.mPrice)||"---"===(null===e||void 0===e?void 0:e.mQuantity)?l():d((0,z.d6)({subcontractorId:null===i||void 0===i?void 0:i.id,consumedQuantity:null===e||void 0===e?void 0:e.mQuantity,consumedPrice:null===e||void 0===e?void 0:e.mPrice,consumedDate:null===e||void 0===e?void 0:e.date,estimationId:null===t||void 0===t?void 0:t.id,name:null===i||void 0===i?void 0:i.name,unit:null===i||void 0===i?void 0:i.unit})).then(()=>{d((0,p.EQ)(null===r||void 0===r?void 0:r.id)),l()})})},options:{addRowPosition:"first",actionsColumnIndex:-1,paging:!1,paginationType:"stepped",showFirstLastPageButtons:!1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontWeight:"bold",width:"5%"},rowStyle:(e,i)=>i%2===0?{backgroundColor:"#eee"}:null}})}),(0,h.jsxs)(n.zS,{style:{backgroundColor:"#01579b",color:"white"},visible:f,onClose:()=>g(!1),children:[(0,h.jsx)(n.E4,{style:{backgroundColor:"#01579b",color:"white"},onClose:()=>g(!1),children:(0,h.jsx)(n.lb,{children:"Add a new subcontractor"})}),(0,h.jsx)(n.Tc,{children:(0,h.jsx)(R,{})})]}),c&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:c}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),m&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:m}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})};function B(e){let{selectedExecutedEstimation:i}=e;const t=(0,u.wA)(),{projects:l,loading:d}=(0,u.d4)(p.Br),{role:r}=(0,C.Q)(),[a,s]=(0,o.useState)(1),{activityToProjectError:c,activityToProjectSuccess:m,consumedActivity:v}=(0,u.d4)(x.$z);(0,o.useEffect)(()=>{t((0,p.cf)())},[t]),(0,o.useEffect)(()=>{t((0,x.Ew)())},[t]),(0,o.useEffect)(()=>{t((0,x.jI)())},[t]),(0,o.useEffect)(()=>{const e=setTimeout(()=>{t((0,x.kd)())},3e3);return()=>clearTimeout(e)},[t,m,c]);const f={id:null===i||void 0===i?void 0:i.id,allEquipments:null===v||void 0===v?void 0:v.equipments},g={id:null===i||void 0===i?void 0:i.id,allMaterials:null===v||void 0===v?void 0:v.materials},b={id:null===i||void 0===i?void 0:i.id,allLabours:null===v||void 0===v?void 0:v.labours},y={id:null===i||void 0===i?void 0:i.id,allSubContractors:null===v||void 0===v?void 0:v.subContractors};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{style:{marginTop:"2rem",backgroundColor:"#CCCCCC"},children:v&&(0,h.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:[(0,h.jsxs)(n.by,{style:{marginBottom:"20px",backgroundColor:"white",fontWeight:"bold",cursor:"pointer",width:"fit-content",textAlign:"center"},variant:"pills",role:"tablist",children:[(0,h.jsx)(n.g9,{children:(0,h.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:1===a?"rgb(1, 87, 155)":"",color:1===a?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500,width:"150px"},active:1===a,onClick:()=>s(1),children:"EQUIPMENT"})}),(0,h.jsx)(n.g9,{children:(0,h.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:2===a?"rgb(1, 87, 155)":"",color:2===a?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500,width:"150px"},active:2===a,onClick:()=>s(2),children:"MATERIAL"})}),(0,h.jsx)(n.g9,{children:(0,h.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:3===a?"rgb(1, 87, 155)":"",color:3===a?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500,width:"150px"},active:3===a,onClick:()=>s(3),children:"LABOUR"})}),(0,h.jsx)(n.g9,{children:(0,h.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:4===a?"rgb(1, 87, 155)":"",color:4===a?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500,width:"150px"},active:4===a,onClick:()=>s(4),children:"SUBCONTRACTOR"})}),(0,h.jsx)(n.g9,{children:(0,h.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:4===a?"rgb(1, 87, 155)":"",color:4===a?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500,width:"150px"},active:4===a,onClick:()=>s(4),children:"OTHERS"})})]}),(0,h.jsxs)(n.eL,{children:[(0,h.jsx)(n.x1,{role:"tabpanel","aria-labelledby":"home-tab",visible:1===a,children:(0,h.jsx)(k,{equipments:f})}),(0,h.jsx)(n.x1,{role:"tabpanel","aria-labelledby":"profile-tab",visible:2===a,children:(0,h.jsx)(Q,{materials:g})}),(0,h.jsx)(n.x1,{role:"tabpanel","aria-labelledby":"contact-tab",visible:3===a,children:(0,h.jsx)(P,{labours:b})}),(0,h.jsx)(n.x1,{role:"tabpanel","aria-labelledby":"contact-tab",visible:4===a,children:(0,h.jsx)(F,{subcontractors:y})})]})]})}),"owner"!==r&&0===(null===l||void 0===l?void 0:l.length)&&(0,h.jsx)(w.A,{}),(0,h.jsx)("div",{children:(0,h.jsx)(j.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:d,children:(0,h.jsx)(S.A,{color:"inherit"})})})]})}const U=y.A.ViewEdit,I=()=>{var e,i,t,d,r,a;const{consumedActivity:s}=(0,u.d4)(x.$z),{singleProject:c}=(0,u.d4)(p.Br),[m,v]=(0,o.useState)(!1),[f,g]=(0,o.useState)(null),j=null===(i=(null===c||void 0===c||null===(e=c.activities)||void 0===e?void 0:e.filter(e=>(null===e||void 0===e?void 0:e.id)===(null===s||void 0===s?void 0:s.id)))[0])||void 0===i||null===(t=i.estimation_consumed)||void 0===t?void 0:t.map(e=>(0,l.A)((0,l.A)({},e),{},{constractedName:null===s||void 0===s?void 0:s.name,executedQuantity:null===e||void 0===e?void 0:e.executedQuantity,remainingQuantity:null===e||void 0===e?void 0:e.remainingQuantity,date:null===e||void 0===e?void 0:e.executedDate,unit:null===s||void 0===s?void 0:s.estimationUnit})),S=null===j||void 0===j||null===(d=j.map(e=>parseFloat(null===e||void 0===e?void 0:e.executedQuantity)))||void 0===d?void 0:d.reduce((e,i)=>e+i,0),w=null===j||void 0===j||null===(r=j.sort((e,i)=>(null===e||void 0===e?void 0:e.id)-(null===i||void 0===i?void 0:i.id)))||void 0===r?void 0:r.reverse();return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{children:[(0,h.jsx)(b(),{title:"All Previous execution Records",columns:[{title:"date",field:"date",type:"date",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"executed",field:"executedQuantity",type:"numeric",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"unit",field:"unit",type:"text",editable:"never",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}}],data:w,icons:y.A,actions:[{icon:U,tooltip:"Customize Items",onClick:(e,i)=>{g(i),v(!0)}}],options:{actionsColumnIndex:-1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontWeight:"bold"},rowStyle:{width:"100%",backgroundColor:"#fff",fontWeight:"bold"}}}),(0,h.jsx)(n.sK,{children:(0,h.jsxs)(n.UF,{xs:12,style:{paddingLeft:"30px",backgroundColor:"#01579b",fontSize:"0.95rem",color:"white",padding:"5px",border:"1px solid white"},children:["Total Executed Quantinties: ",null===(a=Number(S))||void 0===a?void 0:a.toLocaleString()]})}),(0,h.jsxs)(n.zS,{size:"lg",style:{backgroundColor:"#01579b",color:"white",border:"3px solid black"},visible:m,onClose:()=>v(!1),children:[(0,h.jsx)(n.E4,{style:{backgroundColor:"#01579b",color:"white"},onClose:()=>v(!1),children:(0,h.jsx)(n.lb,{children:null===s||void 0===s?void 0:s.name})}),(0,h.jsx)(n.Tc,{style:{backgroundColor:"#CCCCCC",border:"2px solid black"},children:(0,h.jsx)(B,{selectedExecutedEstimation:f})})]})]})})},_=()=>{const{role:e}=(0,C.Q)(),{consumedActivity:i}=(0,u.d4)(x.$z),{singleProject:t}=(0,u.d4)(p.Br),{message:l,error:d}=(0,u.d4)(z.Os),r=(0,u.wA)(),[a,s]=(0,o.useState)("---");(0,o.useEffect)(()=>{const e=setTimeout(()=>{r((0,z.vi)())},3e3);return()=>clearTimeout(e)},[r,l,d]);const c=[{constractedName:null===i||void 0===i?void 0:i.name,executedQuantity:a,date:new Date,unit:null===i||void 0===i?void 0:i.estimationUnit}];return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{style:{width:"60%"},children:[(0,h.jsx)(b(),{title:"Record new Quantinty",columns:[{title:"executed",field:"executedQuantity",type:"numeric",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"unit",field:"unit",type:"text",editable:"never",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"date",field:"date",type:"date",editable:"onUpdate",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}}],data:c,icons:y.A,editable:{onRowUpdate:(l,o)=>new Promise((o,n)=>{if("manager"===e||"admin"===e){s(null===l||void 0===l?void 0:l.executedQuantity);const e={executedQuantity:null===l||void 0===l?void 0:l.executedQuantity,executedDate:null===l||void 0===l?void 0:l.date,estimationId:null===i||void 0===i?void 0:i.id};r((0,z.Zp)(e)).then(()=>{r((0,p.EQ)(null===t||void 0===t?void 0:t.id))}).then(()=>{o()})}if("owner"===e){s(null===l||void 0===l?void 0:l.executedQuantity);const e={executedQuantity:null===l||void 0===l?void 0:l.executedQuantity,executedDate:null===l||void 0===l?void 0:l.date,estimationId:null===i||void 0===i?void 0:i.id};r((0,z.Zp)(e)).then(()=>{r((0,p.EQ)(null===t||void 0===t?void 0:t.id))}).then(()=>{o()})}})},options:{paging:!1,search:!1,actionsColumnIndex:-1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontWeight:"bold"},rowStyle:{backgroundColor:"#fff",fontWeight:"bold"}}}),l&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"success",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:l}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})}),d&&(0,h.jsx)(n.Yq,{placement:"top-end",children:(0,h.jsx)(n.JY,{autohide:!1,visible:!0,color:"danger",icon:"cil-check",className:"text-white align-items-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(n.Bw,{children:d}),(0,h.jsx)(n.vo,{className:"me-2 m-auto"})]})})})]})})},W=e=>{let{estimationConsumed:i}=e;const[t,l]=(0,o.useState)(1);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(n.by,{style:{marginBottom:"20px",backgroundColor:"white",fontWeight:"bold",cursor:"pointer",width:"fit-content"},variant:"pills",role:"tablist",children:[(0,h.jsx)(n.g9,{children:(0,h.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:1===t?"rgb(1, 87, 155)":"",color:1===t?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:1===t,onClick:()=>l(1),children:"New Record"})}),(0,h.jsx)(n.g9,{children:(0,h.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:2===t?"rgb(1, 87, 155)":"",color:2===t?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:2===t,onClick:()=>l(2),children:"Previous Records"})})]}),(0,h.jsxs)(n.eL,{children:[(0,h.jsx)(n.x1,{role:"tabpanel","aria-labelledby":"home-tab",visible:1===t,children:(0,h.jsx)(_,{})}),(0,h.jsx)(n.x1,{role:"tabpanel","aria-labelledby":"profile-tab",visible:2===t,children:(0,h.jsx)(I,{estimationConsumed:i})})]})]})},Y=y.A.ViewEdit,q=()=>{const{allConsumedActivities:e,consumedActivity:i}=(0,u.d4)(x.$z),t=(0,u.wA)(),[d,r]=(0,o.useState)(!1),a=null===e||void 0===e?void 0:e.map(e=>(0,l.A)((0,l.A)({},e),{},{constractedName:null===e||void 0===e?void 0:e.name,constractedQuantity:null===e||void 0===e?void 0:e.estimationQuantity,date:new Date,unit:null===e||void 0===e?void 0:e.estimationUnit}));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.Q_,{style:{fontWeight:500,marginBottom:"5px",color:"white",fontSize:"12px"},onClick:()=>{t((0,x.Zu)())},color:"info",size:"sm",children:"Clear Table"}),(0,h.jsx)("div",{style:{width:"fitContent"},children:(0,h.jsx)(b(),{title:"Quantinties",columns:[{title:"Description",field:"constractedName",type:"numeric",editable:"never",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"contract",field:"constractedQuantity",type:"numeric",editable:"never",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"unit",field:"unit",type:"text",editable:"never",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}},{title:"date",field:"date",type:"date",editable:"never",align:"left",cellStyle:{fontSize:"12px",paddingTop:"-100px"},headerStyle:{fontSize:"12px",paddingTop:"-100px"}}],data:a,icons:y.A,actions:[{icon:Y,tooltip:"Customize Items",onClick:(e,i)=>{t((0,x.F3)(i)),r(!0)}}],options:{paging:!1,search:!1,actionsColumnIndex:-1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontWeight:"bold"},rowStyle:{width:"100%",backgroundColor:"#fff",fontWeight:"bold"}}})}),(0,h.jsxs)(n.zS,{size:"lg",style:{backgroundColor:"#01579b",color:"white"},visible:d,onClose:()=>r(!1),children:[(0,h.jsx)(n.E4,{style:{backgroundColor:"#01579b",color:"white"},onClose:()=>r(!1),children:(0,h.jsxs)(n.sK,{children:[(0,h.jsx)(n.UF,{xs:12,children:(0,h.jsx)(n.lb,{children:null===i||void 0===i?void 0:i.name})}),(0,h.jsx)(n.UF,{xs:12,children:(0,h.jsxs)(n.lb,{style:{fontSize:"0.75rem"},children:["contract: ",null===i||void 0===i?void 0:i.estimationQuantity," Quantinties"]})})]})}),(0,h.jsx)(n.Tc,{style:{backgroundColor:"#CCCCCC"},children:(0,h.jsx)(W,{estimationConsumed:null===i||void 0===i?void 0:i.estimation_consumed})})]})]})};var L=t(26080);const D=()=>{var e;const i=(0,u.wA)(),{projects:t,singleProject:r,singleProjectGrouping:a,projectsGrouping:s}=(0,u.d4)(p.Br),[c,x]=(0,o.useState)(1),[m,v]=(0,o.useState)(!1);(0,o.useEffect)(()=>{i((0,p.EQ)(null===r||void 0===r?void 0:r.id))},[i,null===r||void 0===r?void 0:r.id]),(0,o.useEffect)(()=>{i((0,p.cf)())},[i]),(0,o.useEffect)(()=>{i((0,p.a2)())},[i]);const g=null===s||void 0===s?void 0:s.map(e=>({value:e.id,label:e.name})),b=null===t||void 0===t?void 0:t.filter(e=>null===e.groupId),y=null===a||void 0===a?void 0:a.projects;let w;w=void 0!==y?null===y||void 0===y?void 0:y.concat(b):b;const C=null===(e=w)||void 0===e?void 0:e.map(e=>({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name}));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{style:{width:"45%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,h.jsx)(L.A,{isClearable:!0,onChange:e=>{const t={id:e.value,labourName:e.label};i((0,p.Le)({id:t.id}))},options:g,placeholder:a?"PROJECT: ".concat(null===a||void 0===a?void 0:a.name):"Select a project",styles:{option:(e,i)=>(0,l.A)((0,l.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),s&&(0,h.jsx)("div",{style:{marginBottom:"20px",width:"40%",fontWeight:"bold",fontSize:"0.7rem",backgroundColor:"#CCCCCC"},children:(0,h.jsx)(L.A,{isClearable:!0,onChange:(e,t)=>{const l={id:e.value,labourName:e.label};v(!0),i((0,p.EQ)(l.id)).then(e=>{v(!1)})},options:C,placeholder:r?"SUB-PROJECT: ".concat(null===r||void 0===r?void 0:r.name):"Select a sub-project",styles:{option:(e,i)=>(0,l.A)((0,l.A)({},e),{},{borderBottom:"1px dotted #01579b",color:i.isSelected?"white":"black"})}})}),(0,h.jsxs)(n.by,{style:{marginBottom:"20px",backgroundColor:"white",fontWeight:"bold",cursor:"pointer",width:"fit-content"},variant:"pills",role:"tablist",children:[(0,h.jsx)(n.g9,{children:(0,h.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:1===c?"rgb(1, 87, 155)":"",color:1===c?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:1===c,onClick:()=>x(1),children:"Bills Of Quantinties"})}),(0,h.jsx)(n.g9,{children:(0,h.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:2===c?"rgb(1, 87, 155)":"",color:2===c?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:2===c,onClick:()=>x(2),children:"Progress"})}),(0,h.jsx)(n.g9,{children:(0,h.jsx)(n.HQ,{style:{borderRight:"2px solid #e9ecef",backgroundColor:3===c?"rgb(1, 87, 155)":"",color:3===c?"white":"rgb(1, 87, 155)",fontSize:"0.80rem",fontWeight:500},active:3===c,onClick:()=>x(3),children:"Reports"})})]}),(0,h.jsxs)(n.eL,{children:[(0,h.jsx)(n.x1,{role:"tabpanel","aria-labelledby":"home-tab",visible:1===c,children:(0,h.jsx)(f,{})}),(0,h.jsx)(n.x1,{role:"tabpanel","aria-labelledby":"profile-tab",visible:2===c,children:(0,h.jsx)(q,{})}),(0,h.jsx)(n.x1,{role:"tabpanel","aria-labelledby":"profile-tab",visible:3===c,children:(0,h.jsx)(d.default,{})})]}),(0,h.jsx)("div",{children:(0,h.jsx)(j.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:m,children:(0,h.jsx)(S.A,{color:"inherit"})})})]})}}}]);